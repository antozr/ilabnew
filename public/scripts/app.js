/*! For license information please see app.js.LICENSE.txt */
(()=>{var e,t={434:(e,t,n)=>{"use strict";e=n.nmd(e);const r=(e,t)=>(...n)=>`[${e(...n)+t}m`,i=(e,t)=>(...n)=>{const r=e(...n);return`[${38+t};5;${r}m`},s=(e,t)=>(...n)=>{const r=e(...n);return`[${38+t};2;${r[0]};${r[1]};${r[2]}m`},o=e=>e,a=(e,t,n)=>[e,t,n],c=(e,t,n)=>{Object.defineProperty(e,t,{get:()=>{const r=n();return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0}),r},enumerable:!0,configurable:!0})};let u;const l=(e,t,r,i)=>{void 0===u&&(u=n(85));const s=i?10:0,o={};for(const[n,i]of Object.entries(u)){const a="ansi16"===n?"ansi":n;n===t?o[a]=e(r,s):"object"==typeof i&&(o[a]=e(i[t],s))}return o};Object.defineProperty(e,"exports",{enumerable:!0,get:function(){const e=new Map,t={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};t.color.gray=t.color.blackBright,t.bgColor.bgGray=t.bgColor.bgBlackBright,t.color.grey=t.color.blackBright,t.bgColor.bgGrey=t.bgColor.bgBlackBright;for(const[n,r]of Object.entries(t)){for(const[n,i]of Object.entries(r))t[n]={open:`[${i[0]}m`,close:`[${i[1]}m`},r[n]=t[n],e.set(i[0],i[1]);Object.defineProperty(t,n,{value:r,enumerable:!1})}return Object.defineProperty(t,"codes",{value:e,enumerable:!1}),t.color.close="[39m",t.bgColor.close="[49m",c(t.color,"ansi",(()=>l(r,"ansi16",o,!1))),c(t.color,"ansi256",(()=>l(i,"ansi256",o,!1))),c(t.color,"ansi16m",(()=>l(s,"rgb",a,!1))),c(t.bgColor,"ansi",(()=>l(r,"ansi16",o,!0))),c(t.bgColor,"ansi256",(()=>l(i,"ansi256",o,!0))),c(t.bgColor,"ansi16m",(()=>l(s,"rgb",a,!0))),t}})},387:(e,t,n)=>{"use strict";var r=n(155);const i=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296==(64512&i)&&r+1<e.length&&56320==(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},s={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let t=0;t<e.length;t+=3){const i=e[t],s=t+1<e.length,o=s?e[t+1]:0,a=t+2<e.length,c=a?e[t+2]:0,u=i>>2,l=(3&i)<<4|o>>4;let h=(15&o)<<2|c>>6,d=63&c;a||(d=64,s||(h=64)),r.push(n[u],n[l],n[h],n[d])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(i(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let t=0;t<e.length;){const i=n[e.charAt(t++)],s=t<e.length?n[e.charAt(t)]:0;++t;const o=t<e.length?n[e.charAt(t)]:64;++t;const a=t<e.length?n[e.charAt(t)]:64;if(++t,null==i||null==s||null==o||null==a)throw Error();const c=i<<2|s>>4;if(r.push(c),64!==o){const e=s<<4&240|o>>2;if(r.push(e),64!==a){const e=o<<6&192|a;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},o=function(e){return function(e){const t=i(e);return s.encodeByteArray(t,!0)}(e).replace(/\./g,"")},a=function(e){try{return s.decodeString(e,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function c(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function u(){const e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof e&&void 0!==e.id}function l(){return"object"==typeof indexedDB}function h(){return new Promise(((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(e){t(e)}}))}const d=()=>function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,f=()=>d()||(()=>{if(void 0===r||void 0===r.env)return;const e=r.env.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"==typeof document)return;const e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/),t=e&&a(e[1]);return t&&JSON.parse(t)})(),p=e=>{var t,n;return null===(n=null===(t=f())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},g=e=>{var t;return null===(t=f())||void 0===t?void 0:t[`_${e}`]};class m{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"==typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}class y extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,y.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,v.prototype.create)}}class v{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},r=`${this.service}/${e}`,i=this.errors[e],s=i?function(e,t){return e.replace(w,((e,n)=>{const r=t[n];return null!=r?String(r):`<${n}?>`}))}(i,n):"Error",o=`${this.serviceName}: ${s} (${r}).`;return new y(r,o,n)}}const w=/\{\$([^}]+)}/g;function b(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if(I(n)&&I(s)){if(!b(n,s))return!1}else if(n!==s)return!1}for(const e of r)if(!n.includes(e))return!1;return!0}function I(e){return null!==e&&"object"==typeof e}function E(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function T(e){const t={};return e.replace(/^\?/,"").split("&").forEach((e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}})),t}function _(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class S{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!=typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"==typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=k),void 0===r.error&&(r.error=k),void 0===r.complete&&(r.complete=k);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}})),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(e){"undefined"!=typeof console&&console.error&&console.error(e)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function k(){}function C(e,t=1e3,n=2){const r=t*Math.pow(n,e),i=Math.round(.5*r*(Math.random()-.5)*2);return Math.min(144e5,r+i)}function A(e){return e&&e._delegate?e._delegate:e}class O{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const N="[DEFAULT]";class D{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new m;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(e){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),r=null!==(t=null==e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(e){if(r)return null;throw e}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:N})}catch(e){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(e){}}}}clearInstance(e="[DEFAULT]"){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(e="[DEFAULT]"){return this.instances.has(e)}getOptions(e="[DEFAULT]"){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[e,t]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(e)&&t.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const r of n)try{r(e,t)}catch(e){}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:(r=e,r===N?void 0:r),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch(e){}var r;return n||null}normalizeInstanceIdentifier(e="[DEFAULT]"){return this.component?this.component.multipleInstances?e:N:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class R{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new D(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const P=[];var L;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(L||(L={}));const M={debug:L.DEBUG,verbose:L.VERBOSE,info:L.INFO,warn:L.WARN,error:L.ERROR,silent:L.SILENT},x=L.INFO,U={[L.DEBUG]:"log",[L.VERBOSE]:"log",[L.INFO]:"info",[L.WARN]:"warn",[L.ERROR]:"error"},F=(e,t,...n)=>{if(t<e.logLevel)return;const r=(new Date).toISOString(),i=U[t];if(!i)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);console[i](`[${r}]  ${e.name}:`,...n)};class j{constructor(e){this.name=e,this._logLevel=x,this._logHandler=F,this._userLogHandler=null,P.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in L))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?M[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,L.DEBUG,...e),this._logHandler(this,L.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,L.VERBOSE,...e),this._logHandler(this,L.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,L.INFO,...e),this._logHandler(this,L.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,L.WARN,...e),this._logHandler(this,L.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,L.ERROR,...e),this._logHandler(this,L.ERROR,...e)}}let V,B;const q=new WeakMap,H=new WeakMap,$=new WeakMap,z=new WeakMap,K=new WeakMap;let G={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return H.get(e);if("objectStoreNames"===t)return e.objectStoreNames||$.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return X(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function W(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(B||(B=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(J(this),t),X(q.get(this))}:function(...t){return X(e.apply(J(this),t))}:function(t,...n){const r=e.call(J(this),t,...n);return $.set(r,t.sort?t.sort():[t]),X(r)}}function Q(e){return"function"==typeof e?W(e):(e instanceof IDBTransaction&&function(e){if(H.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)}));H.set(e,t)}(e),t=e,(V||(V=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((e=>t instanceof e))?new Proxy(e,G):e);var t}function X(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(X(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)}));return t.then((t=>{t instanceof IDBCursor&&q.set(t,e)})).catch((()=>{})),K.set(t,e),t}(e);if(z.has(e))return z.get(e);const t=Q(e);return t!==e&&(z.set(e,t),K.set(t,e)),t}const J=e=>K.get(e);function Y(e,t,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(e,t),a=X(o);return r&&o.addEventListener("upgradeneeded",(e=>{r(X(o.result),e.oldVersion,e.newVersion,X(o.transaction))})),n&&o.addEventListener("blocked",(()=>n())),a.then((e=>{s&&e.addEventListener("close",(()=>s())),i&&e.addEventListener("versionchange",(()=>i()))})).catch((()=>{})),a}const Z=["get","getKey","getAll","getAllKeys","count"],ee=["put","add","delete","clear"],te=new Map;function ne(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(te.get(t))return te.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=ee.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!Z.includes(n))return;const s=async function(e,...t){const s=this.transaction(e,i?"readwrite":"readonly");let o=s.store;return r&&(o=o.index(t.shift())),(await Promise.all([o[n](...t),i&&s.done]))[0]};return te.set(t,s),s}G=(e=>({...e,get:(t,n,r)=>ne(t,n)||e.get(t,n,r),has:(t,n)=>!!ne(t,n)||e.has(t,n)}))(G);class re{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null==t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null})).filter((e=>e)).join(" ")}}const ie="@firebase/app",se="0.8.1",oe=new j("@firebase/app"),ae="[DEFAULT]",ce={[ie]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},ue=new Map,le=new Map;function he(e,t){try{e.container.addComponent(t)}catch(n){oe.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function de(e){const t=e.name;if(le.has(t))return oe.debug(`There were multiple attempts to register component ${t}.`),!1;le.set(t,e);for(const t of ue.values())he(t,e);return!0}function fe(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}const pe=new v("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class ge{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new O("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw pe.create("app-deleted",{appName:this._name})}}const me="9.12.0";function ye(e,t={}){let n=e;if("object"!=typeof t){t={name:t}}const r=Object.assign({name:ae,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!=typeof i||!i)throw pe.create("bad-app-name",{appName:String(i)});if(n||(n=(()=>{var e;return null===(e=f())||void 0===e?void 0:e.config})()),!n)throw pe.create("no-options");const s=ue.get(i);if(s){if(b(n,s.options)&&b(r,s.config))return s;throw pe.create("duplicate-app",{appName:i})}const o=new R(i);for(const e of le.values())o.addComponent(e);const a=new ge(n,r,o);return ue.set(i,a),a}function ve(e="[DEFAULT]"){const t=ue.get(e);if(!t&&e===ae)return ye();if(!t)throw pe.create("no-app",{appName:e});return t}function we(e,t,n){var r;let i=null!==(r=ce[e])&&void 0!==r?r:e;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const e=[`Unable to register library "${i}" with version "${t}":`];return s&&e.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&e.push("and"),o&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void oe.warn(e.join(" "))}de(new O(`${i}-version`,(()=>({library:i,version:t})),"VERSION"))}const be="firebase-heartbeat-store";let Ie=null;function Ee(){return Ie||(Ie=Y("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)e.createObjectStore(be)}}).catch((e=>{throw pe.create("idb-open",{originalErrorMessage:e.message})}))),Ie}async function Te(e,t){var n;try{const n=(await Ee()).transaction(be,"readwrite"),r=n.objectStore(be);return await r.put(t,_e(e)),n.done}catch(e){if(e instanceof y)oe.warn(e.message);else{const t=pe.create("idb-set",{originalErrorMessage:null===(n=e)||void 0===n?void 0:n.message});oe.warn(t.message)}}}function _e(e){return`${e.name}!${e.options.appId}`}class Se{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Ce(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){const e=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),t=ke();if(null===this._heartbeatsCache&&(this._heartbeatsCache=await this._heartbeatsCachePromise),this._heartbeatsCache.lastSentHeartbeatDate!==t&&!this._heartbeatsCache.heartbeats.some((e=>e.date===t)))return this._heartbeatsCache.heartbeats.push({date:t,agent:e}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null===this._heartbeatsCache||0===this._heartbeatsCache.heartbeats.length)return"";const e=ke(),{heartbeatsToSend:t,unsentEntries:n}=function(e,t=1024){const n=[];let r=e.slice();for(const i of e){const e=n.find((e=>e.agent===i.agent));if(e){if(e.dates.push(i.date),Ae(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Ae(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),r=o(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}}function ke(){return(new Date).toISOString().substring(0,10)}class Ce{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!l()&&h().then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){var t;try{return(await Ee()).transaction(be).objectStore(be).get(_e(e))}catch(e){if(e instanceof y)oe.warn(e.message);else{const n=pe.create("idb-get",{originalErrorMessage:null===(t=e)||void 0===t?void 0:t.message});oe.warn(n.message)}}}(this.app);return e||{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Te(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Te(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function Ae(e){return o(JSON.stringify({version:2,heartbeats:e})).length}var Oe;Oe="",de(new O("platform-logger",(e=>new re(e)),"PRIVATE")),de(new O("heartbeat",(e=>new Se(e)),"PRIVATE")),we(ie,se,Oe),we(ie,se,"esm2017"),we("fire-js","");function Ne(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;Object.create;function De(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Re=De,Pe=new v("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Le=new j("@firebase/auth");function Me(e,...t){Le.logLevel<=L.ERROR&&Le.error(`Auth (9.12.0): ${e}`,...t)}function xe(e,...t){throw Ve(e,...t)}function Ue(e,...t){return Ve(e,...t)}function Fe(e,t,n){const r=Object.assign(Object.assign({},Re()),{[t]:n});return new v("auth","Firebase",r).create(t,{appName:e.name})}function je(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&xe(e,"argument-error"),Fe(e,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ve(e,...t){if("string"!=typeof e){const n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return Pe.create(e,...t)}function Be(e,t,...n){if(!e)throw Ve(t,...n)}function qe(e){const t="INTERNAL ASSERTION FAILED: "+e;throw Me(t),new Error(t)}function He(e,t){e||qe(t)}const $e=new Map;function ze(e){He(e instanceof Function,"Expected a class definition");let t=$e.get(e);return t?(He(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,$e.set(e,t),t)}function Ke(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Ge(){return"http:"===We()||"https:"===We()}function We(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}class Qe{constructor(e,t){this.shortDelay=e,this.longDelay=t,He(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(c())||"object"==typeof navigator&&"ReactNative"===navigator.product}get(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Ge()||u()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function Xe(e,t){He(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}class Je{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void qe("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void qe("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void qe("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Ye={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Ze=new Qe(3e4,6e4);function et(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function tt(e,t,n,r,i={}){return nt(e,i,(async()=>{let i={},s={};r&&("GET"===t?s=r:i={body:JSON.stringify(r)});const o=E(Object.assign({key:e.config.apiKey},s)).slice(1),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/json",e.languageCode&&(a["X-Firebase-Locale"]=e.languageCode),Je.fetch()(it(e,e.config.apiHost,n,o),Object.assign({method:t,headers:a,referrerPolicy:"no-referrer"},i))}))}async function nt(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},Ye),t);try{const t=new st(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await i.json();if("needConfirmation"in s)throw ot(e,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const t=i.ok?s.errorMessage:s.error.message,[n,o]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw ot(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw ot(e,"email-already-in-use",s);if("USER_DISABLED"===n)throw ot(e,"user-disabled",s);const a=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw Fe(e,a,o);xe(e,a)}}catch(t){if(t instanceof y)throw t;xe(e,"network-request-failed")}}async function rt(e,t,n,r,i={}){const s=await tt(e,t,n,r,i);return"mfaPendingCredential"in s&&xe(e,"multi-factor-auth-required",{_serverResponse:s}),s}function it(e,t,n,r){const i=`${t}${n}?${r}`;return e.config.emulator?Xe(e.config,i):`${e.config.apiScheme}://${i}`}class st{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t(Ue(this.auth,"network-request-failed"))),Ze.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function ot(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Ue(e,t,r);return i.customData._tokenResponse=n,i}function at(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(e){}}function ct(e){return 1e3*Number(e)}function ut(e){var t;const[n,r,i]=e.split(".");if(void 0===n||void 0===r||void 0===i)return Me("JWT malformed, contained fewer than 3 sections"),null;try{const e=a(r);return e?JSON.parse(e):(Me("Failed to decode base64 JWT payload"),null)}catch(e){return Me("Caught error parsing JWT payload as JSON",null===(t=e)||void 0===t?void 0:t.toString()),null}}async function lt(e,t,n=!1){if(n)return t;try{return await t}catch(t){throw t instanceof y&&function({code:e}){return"auth/user-disabled"===e||"auth/user-token-expired"===e}(t)&&e.auth.currentUser===e&&await e.auth.signOut(),t}}class ht{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){var e;try{await this.user.getIdToken(!0)}catch(t){return void("auth/network-request-failed"===(null===(e=t)||void 0===e?void 0:e.code)&&this.schedule(!0))}this.schedule()}}class dt{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=at(this.lastLoginAt),this.creationTime=at(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function ft(e){var t;const n=e.auth,r=await e.getIdToken(),i=await lt(e,async function(e,t){return tt(e,"POST","/v1/accounts:lookup",t)}(n,{idToken:r}));Be(null==i?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const o=(null===(t=s.providerUserInfo)||void 0===t?void 0:t.length)?s.providerUserInfo.map((e=>{var{providerId:t}=e,n=Ne(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})):[];const a=function(e,t){const n=e.filter((e=>!t.some((t=>t.providerId===e.providerId))));return[...n,...t]}(e.providerData,o),c=e.isAnonymous,u=!(e.email&&s.passwordHash||(null==a?void 0:a.length)),l=!!c&&u,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new dt(s.createdAt,s.lastLoginAt),isAnonymous:l};Object.assign(e,h)}class pt{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Be(e.idToken,"internal-error"),Be(void 0!==e.idToken,"internal-error"),Be(void 0!==e.refreshToken,"internal-error");const t="expiresIn"in e&&void 0!==e.expiresIn?Number(e.expiresIn):function(e){const t=ut(e);return Be(t,"internal-error"),Be(void 0!==t.exp,"internal-error"),Be(void 0!==t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}async getToken(e,t=!1){return Be(!this.accessToken||this.refreshToken,e,"user-token-expired"),t||!this.accessToken||this.isExpired?this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null:this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await nt(e,{},(async()=>{const n=E({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,s=it(e,r,"/v1/token",`key=${i}`),o=await e._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",Je.fetch()(s,{method:"POST",headers:o,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,s=new pt;return n&&(Be("string"==typeof n,"internal-error",{appName:e}),s.refreshToken=n),r&&(Be("string"==typeof r,"internal-error",{appName:e}),s.accessToken=r),i&&(Be("number"==typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new pt,this.toJSON())}_performRefresh(){return qe("not implemented")}}function gt(e,t){Be("string"==typeof e||void 0===e,"internal-error",{appName:t})}class mt{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=Ne(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ht(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new dt(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await lt(this,this.stsTokenManager.getToken(this.auth,e));return Be(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e,t=!1){const n=A(e),r=await n.getIdToken(t),i=ut(r);Be(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s="object"==typeof i.firebase?i.firebase:void 0,o=null==s?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:at(ct(i.auth_time)),issuedAtTime:at(ct(i.iat)),expirationTime:at(ct(i.exp)),signInProvider:o||null,signInSecondFactor:(null==s?void 0:s.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=A(e);await ft(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(Be(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){return new mt(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(e){Be(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await ft(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await lt(this,async function(e,t){return tt(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,s,o,a,c,u;const l=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(r=t.email)&&void 0!==r?r:void 0,d=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,f=null!==(s=t.photoURL)&&void 0!==s?s:void 0,p=null!==(o=t.tenantId)&&void 0!==o?o:void 0,g=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,m=null!==(c=t.createdAt)&&void 0!==c?c:void 0,y=null!==(u=t.lastLoginAt)&&void 0!==u?u:void 0,{uid:v,emailVerified:w,isAnonymous:b,providerData:I,stsTokenManager:E}=t;Be(v&&E,e,"internal-error");const T=pt.fromJSON(this.name,E);Be("string"==typeof v,e,"internal-error"),gt(l,e.name),gt(h,e.name),Be("boolean"==typeof w,e,"internal-error"),Be("boolean"==typeof b,e,"internal-error"),gt(d,e.name),gt(f,e.name),gt(p,e.name),gt(g,e.name),gt(m,e.name),gt(y,e.name);const _=new mt({uid:v,auth:e,email:h,emailVerified:w,displayName:l,isAnonymous:b,photoURL:f,phoneNumber:d,tenantId:p,stsTokenManager:T,createdAt:m,lastLoginAt:y});return I&&Array.isArray(I)&&(_.providerData=I.map((e=>Object.assign({},e)))),g&&(_._redirectEventId=g),_}static async _fromIdTokenResponse(e,t,n=!1){const r=new pt;r.updateFromServerResponse(t);const i=new mt({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await ft(i),i}}class yt{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}yt.type="NONE";const vt=yt;function wt(e,t,n){return`firebase:${e}:${t}:${n}`}class bt{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=wt(this.userKey,r.apiKey,i),this.fullPersistenceKey=wt("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?mt._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,n="authUser"){if(!t.length)return new bt(ze(vt),e,n);const r=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let i=r[0]||ze(vt);const s=wt(n,e.config.apiKey,e.name);let o=null;for(const n of t)try{const t=await n._get(s);if(t){const r=mt._fromJSON(e,t);n!==i&&(o=r),i=n;break}}catch(e){}const a=r.filter((e=>e._shouldAllowMigration));return i._shouldAllowMigration&&a.length?(i=a[0],o&&await i._set(s,o.toJSON()),await Promise.all(t.map((async e=>{if(e!==i)try{await e._remove(s)}catch(e){}}))),new bt(i,e,n)):new bt(i,e,n)}}function It(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(St(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Et(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Ct(t))return"Blackberry";if(At(t))return"Webos";if(Tt(t))return"Safari";if((t.includes("chrome/")||_t(t))&&!t.includes("edge/"))return"Chrome";if(kt(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null==n?void 0:n.length))return n[1]}return"Other"}function Et(e=c()){return/firefox\//i.test(e)}function Tt(e=c()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function _t(e=c()){return/crios\//i.test(e)}function St(e=c()){return/iemobile/i.test(e)}function kt(e=c()){return/android/i.test(e)}function Ct(e=c()){return/blackberry/i.test(e)}function At(e=c()){return/webos/i.test(e)}function Ot(e=c()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Nt(){return function(){const e=c();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function Dt(e=c()){return Ot(e)||kt(e)||At(e)||Ct(e)||/windows phone/i.test(e)||St(e)}function Rt(e,t=[]){let n;switch(e){case"Browser":n=It(c());break;case"Worker":n=`${It(c())}-${e}`;break;default:n=e}return`${n}/JsCore/9.12.0/${t.length?t.join(","):"FirebaseCore-web"}`}class Pt{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise(((n,r)=>{try{n(e(t))}catch(e){r(e)}}));n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){var t;if(this.auth.currentUser===e)return;const n=[];try{for(const t of this.queue)await t(e),t.onAbort&&n.push(t.onAbort)}catch(e){n.reverse();for(const e of n)try{e()}catch(e){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===(t=e)||void 0===t?void 0:t.message})}}}class Lt{constructor(e,t,n){this.app=e,this.heartbeatServiceProvider=t,this.config=n,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new xt(this),this.idTokenSubscription=new xt(this),this.beforeStateQueue=new Pt(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Pe,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=n.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ze(t)),this._initializationPromise=this.queue((async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await bt.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(e){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUser(e){var t;const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,s=null==r?void 0:r._redirectEventId,o=await this.tryRedirectSignIn(e);n&&n!==s||!(null==o?void 0:o.user)||(r=o.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(e){r=n,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(e)))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Be(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(e){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){var t;try{await ft(e)}catch(e){if("auth/network-request-failed"!==(null===(t=e)||void 0===t?void 0:t.code))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const t=e?A(e):null;return t&&Be(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Be(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue((async()=>{await this.assertedPersistence.setPersistence(ze(e))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new v("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ze(e)||this._popupRedirectResolver;Be(t,this,"argument-error"),this.redirectPersistenceManager=await bt.create(this,[ze(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"==typeof t?t:t.next.bind(t),s=this._isInitialized?Promise.resolve():this._initializationPromise;return Be(s,this,"internal-error"),s.then((()=>i(this.currentUser))),"function"==typeof t?e.addObserver(t,n,r):e.addObserver(t)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Be(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Rt(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());return n&&(t["X-Firebase-Client"]=n),t}}function Mt(e){return A(e)}class xt{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new S(e,t);return n.subscribe.bind(n)}((e=>this.observer=e))}get next(){return Be(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Ut(e,t,n){const r=Mt(e);Be(r._canInitEmulator,r,"emulator-config-failed"),Be(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(null==n?void 0:n.disableWarnings),s=Ft(t),{host:o,port:a}=function(e){const t=Ft(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:jt(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:jt(t)}}}(t),c=null===a?"":`:${a}`;r.config.emulator={url:`${s}//${o}${c}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Ft(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function jt(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class Vt{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return qe("not implemented")}_getIdTokenResponse(e){return qe("not implemented")}_linkToIdToken(e,t){return qe("not implemented")}_getReauthenticationResolver(e){return qe("not implemented")}}async function Bt(e,t){return tt(e,"POST","/v1/accounts:update",t)}class qt extends Vt{constructor(e,t,n,r=null){super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new qt(e,t,"password")}static _fromEmailAndCode(e,t,n=null){return new qt(e,t,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e;if((null==t?void 0:t.email)&&(null==t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return async function(e,t){return rt(e,"POST","/v1/accounts:signInWithPassword",et(e,t))}(e,{returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return async function(e,t){return rt(e,"POST","/v1/accounts:signInWithEmailLink",et(e,t))}(e,{email:this._email,oobCode:this._password});default:xe(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return Bt(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return async function(e,t){return rt(e,"POST","/v1/accounts:signInWithEmailLink",et(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:xe(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Ht(e,t){return rt(e,"POST","/v1/accounts:signInWithIdp",et(e,t))}class $t extends Vt{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new $t(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):xe("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=Ne(t,["providerId","signInMethod"]);if(!n||!r)return null;const s=new $t(n,r);return s.idToken=i.idToken||void 0,s.accessToken=i.accessToken||void 0,s.secret=i.secret,s.nonce=i.nonce,s.pendingToken=i.pendingToken||null,s}_getIdTokenResponse(e){return Ht(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Ht(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Ht(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=E(t)}return e}}const zt={USER_NOT_FOUND:"user-not-found"};class Kt extends Vt{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new Kt({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new Kt({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return rt(e,"POST","/v1/accounts:signInWithPhoneNumber",et(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await rt(e,"POST","/v1/accounts:signInWithPhoneNumber",et(e,t));if(n.temporaryProof)throw ot(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return rt(e,"POST","/v1/accounts:signInWithPhoneNumber",et(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),zt)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"==typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new Kt({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class Gt{constructor(e){var t,n,r,i,s,o;const a=T(_(e)),c=null!==(t=a.apiKey)&&void 0!==t?t:null,u=null!==(n=a.oobCode)&&void 0!==n?n:null,l=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=a.mode)&&void 0!==r?r:null);Be(c&&u&&l,"argument-error"),this.apiKey=c,this.operation=l,this.code=u,this.continueUrl=null!==(i=a.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(s=a.languageCode)&&void 0!==s?s:null,this.tenantId=null!==(o=a.tenantId)&&void 0!==o?o:null}static parseLink(e){const t=function(e){const t=T(_(e)).link,n=t?T(_(t)).deep_link_id:null,r=T(_(e)).deep_link_id;return(r?T(_(r)).link:null)||r||n||t||e}(e);try{return new Gt(t)}catch(e){return null}}}class Wt{constructor(){this.providerId=Wt.PROVIDER_ID}static credential(e,t){return qt._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=Gt.parseLink(t);return Be(n,"argument-error"),qt._fromEmailAndCode(e,n.code,n.tenantId)}}Wt.PROVIDER_ID="password",Wt.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Wt.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Qt{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Xt extends Qt{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Jt extends Xt{constructor(){super("facebook.com")}static credential(e){return $t._fromParams({providerId:Jt.PROVIDER_ID,signInMethod:Jt.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Jt.credentialFromTaggedObject(e)}static credentialFromError(e){return Jt.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return Jt.credential(e.oauthAccessToken)}catch(e){return null}}}Jt.FACEBOOK_SIGN_IN_METHOD="facebook.com",Jt.PROVIDER_ID="facebook.com";class Yt extends Xt{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return $t._fromParams({providerId:Yt.PROVIDER_ID,signInMethod:Yt.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Yt.credentialFromTaggedObject(e)}static credentialFromError(e){return Yt.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n}=e;if(!t&&!n)return null;try{return Yt.credential(t,n)}catch(e){return null}}}Yt.GOOGLE_SIGN_IN_METHOD="google.com",Yt.PROVIDER_ID="google.com";class Zt extends Xt{constructor(){super("github.com")}static credential(e){return $t._fromParams({providerId:Zt.PROVIDER_ID,signInMethod:Zt.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Zt.credentialFromTaggedObject(e)}static credentialFromError(e){return Zt.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return Zt.credential(e.oauthAccessToken)}catch(e){return null}}}Zt.GITHUB_SIGN_IN_METHOD="github.com",Zt.PROVIDER_ID="github.com";class en extends Xt{constructor(){super("twitter.com")}static credential(e,t){return $t._fromParams({providerId:en.PROVIDER_ID,signInMethod:en.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return en.credentialFromTaggedObject(e)}static credentialFromError(e){return en.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:n}=e;if(!t||!n)return null;try{return en.credential(t,n)}catch(e){return null}}}en.TWITTER_SIGN_IN_METHOD="twitter.com",en.PROVIDER_ID="twitter.com";class tn{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n,r=!1){const i=await mt._fromIdTokenResponse(e,n,r),s=nn(n);return new tn({user:i,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=nn(n);return new tn({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function nn(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class rn extends y{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,rn.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new rn(e,t,n,r)}}function sn(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((n=>{if("auth/multi-factor-auth-required"===n.code)throw rn._fromErrorAndOperation(e,n,t,r);throw n}))}async function on(e,t,n=!1){const r=await lt(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return tn._forOperation(e,"link",r)}async function an(e,t,n=!1){var r;const{auth:i}=e,s="reauthenticate";try{const r=await lt(e,sn(i,s,t,e),n);Be(r.idToken,i,"internal-error");const o=ut(r.idToken);Be(o,i,"internal-error");const{sub:a}=o;return Be(e.uid===a,i,"user-mismatch"),tn._forOperation(e,s,r)}catch(e){throw"auth/user-not-found"===(null===(r=e)||void 0===r?void 0:r.code)&&xe(i,"user-mismatch"),e}}async function cn(e,t,n=!1){const r="signIn",i=await sn(e,r,t),s=await tn._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}new WeakMap;const un="__sak";class ln{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(un,"1"),this.storage.removeItem(un),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class hn extends ln{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const e=c();return Tt(e)||Ot(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),this.fallbackToPolling=Dt(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e,t=!1){if(!e.key)return void this.forAllChangedKeys(((e,t,n)=>{this.notifyListeners(e,n)}));const n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const r=this.storage.getItem(n);if(e.newValue!==r)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);Nt()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const e of Array.from(n))e(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}hn.type="LOCAL";const dn=hn;class fn extends ln{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(e,t){}_removeListener(e,t){}}fn.type="SESSION";const pn=fn;class gn{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const n=new gn(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,s=this.handlersMap[r];if(!(null==s?void 0:s.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const o=Array.from(s).map((async e=>e(t.origin,i))),a=await function(e){return Promise.all(e.map((async e=>{try{return{fulfilled:!0,value:await e}}catch(e){return{fulfilled:!1,reason:e}}})))}(o);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function mn(e="",t=10){let n="";for(let e=0;e<t;e++)n+=Math.floor(10*Math.random());return e+n}gn.receivers=[];class yn{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,n=50){const r="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,s;return new Promise(((o,a)=>{const c=mn("",20);r.port1.start();const u=setTimeout((()=>{a(new Error("unsupported_event"))}),n);s={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===c)switch(t.data.status){case"ack":clearTimeout(u),i=setTimeout((()=>{a(new Error("timeout"))}),3e3);break;case"done":clearTimeout(i),o(t.data.response);break;default:clearTimeout(u),clearTimeout(i),a(new Error("invalid_response"))}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:c,data:t},[r.port2])})).finally((()=>{s&&this.removeMessageHandler(s)}))}}function vn(){return window}function wn(){return void 0!==vn().WorkerGlobalScope&&"function"==typeof vn().importScripts}const bn="firebaseLocalStorageDb",In="firebaseLocalStorage",En="fbase_key";class Tn{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function _n(e,t){return e.transaction([In],t?"readwrite":"readonly").objectStore(In)}function Sn(){const e=indexedDB.open(bn,1);return new Promise(((t,n)=>{e.addEventListener("error",(()=>{n(e.error)})),e.addEventListener("upgradeneeded",(()=>{const t=e.result;try{t.createObjectStore(In,{keyPath:En})}catch(e){n(e)}})),e.addEventListener("success",(async()=>{const n=e.result;n.objectStoreNames.contains(In)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(bn);return new Tn(e).toPromise()}(),t(await Sn()))}))}))}async function kn(e,t,n){const r=_n(e,!0).put({[En]:t,value:n});return new Tn(r).toPromise()}function Cn(e,t){const n=_n(e,!0).delete(t);return new Tn(n).toPromise()}class An{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await Sn()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(e){if(t++>3)throw e;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return wn()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=gn._getInstance(wn()?self:null),this.receiver._subscribe("keyChanged",(async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)}))),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new yn(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(e){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Sn();return await kn(e,un,"1"),await Cn(e,un),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((n=>kn(n,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>async function(e,t){const n=_n(e,!1).get(t),r=await new Tn(n).toPromise();return void 0===r?null:r.value}(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>Cn(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=_n(e,!1).getAll();return new Tn(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const e of Object.keys(this.localCache))this.localCache[e]&&!n.has(e)&&(this.notifyListeners(e,null),t.push(e));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const e of Array.from(n))e(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}An.type="LOCAL";const On=An;function Nn(e){return new Promise(((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=Ue("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function Dn(e){return`__${e}${Math.floor(1e6*Math.random())}`}Dn("rcb"),new Qe(3e4,6e4);const Rn="recaptcha";async function Pn(e,t,n){var r;const i=await n.verify();try{let s;if(Be("string"==typeof i,e,"argument-error"),Be(n.type===Rn,e,"argument-error"),s="string"==typeof t?{phoneNumber:t}:t,"session"in s){const t=s.session;if("phoneNumber"in s){Be("enroll"===t.type,e,"internal-error");const n=await function(e,t){return tt(e,"POST","/v2/accounts/mfaEnrollment:start",et(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:i}});return n.phoneSessionInfo.sessionInfo}{Be("signin"===t.type,e,"internal-error");const n=(null===(r=s.multiFactorHint)||void 0===r?void 0:r.uid)||s.multiFactorUid;Be(n,e,"missing-multi-factor-info");const o=await function(e,t){return tt(e,"POST","/v2/accounts/mfaSignIn:start",et(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:i}});return o.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return tt(e,"POST","/v1/accounts:sendVerificationCode",et(e,t))}(e,{phoneNumber:s.phoneNumber,recaptchaToken:i});return t}}finally{n._reset()}}class Ln{constructor(e){this.providerId=Ln.PROVIDER_ID,this.auth=Mt(e)}verifyPhoneNumber(e,t){return Pn(this.auth,e,A(t))}static credential(e,t){return Kt._fromVerification(e,t)}static credentialFromResult(e){const t=e;return Ln.credentialFromTaggedObject(t)}static credentialFromError(e){return Ln.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:t,temporaryProof:n}=e;return t&&n?Kt._fromTokenResponse(t,n):null}}function Mn(e,t){return t?ze(t):(Be(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}Ln.PROVIDER_ID="phone",Ln.PHONE_SIGN_IN_METHOD="phone";class xn extends Vt{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ht(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ht(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ht(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Un(e){return cn(e.auth,new xn(e),e.bypassAuthState)}function Fn(e){const{auth:t,user:n}=e;return Be(n,t,"internal-error"),an(n,new xn(e),e.bypassAuthState)}async function jn(e){const{auth:t,user:n}=e;return Be(n,t,"internal-error"),on(n,new xn(e),e.bypassAuthState)}class Vn{constructor(e,t,n,r,i=!1){this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(e){this.reject(e)}}))}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:s,type:o}=e;if(s)return void this.reject(s);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(e){this.reject(e)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Un;case"linkViaPopup":case"linkViaRedirect":return jn;case"reauthViaPopup":case"reauthViaRedirect":return Fn;default:xe(this.auth,"internal-error")}}resolve(e){He(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){He(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Bn=new Qe(2e3,1e4);class qn extends Vn{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,qn.currentPopupAction&&qn.currentPopupAction.cancel(),qn.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Be(e,this.auth,"internal-error"),e}async onExecution(){He(1===this.filter.length,"Popup operations only handle one event");const e=mn();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject(Ue(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(Ue(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,qn.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(Ue(this.auth,"popup-closed-by-user"))}),2e3):this.pollId=window.setTimeout(e,Bn.get())};e()}}qn.currentPopupAction=null;const Hn=new Map;class $n extends Vn{constructor(e,t,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,n),this.eventId=null}async execute(){let e=Hn.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=Gn(t),r=Kn(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}Hn.set(this.auth._key(),e)}return this.bypassAuthState||Hn.set(this.auth._key(),(()=>Promise.resolve(null))),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function zn(e,t){Hn.set(e._key(),t)}function Kn(e){return ze(e._redirectPersistence)}function Gn(e){return wt("pendingRedirect",e.config.apiKey,e.name)}async function Wn(e,t,n=!1){const r=Mt(e),i=Mn(r,t),s=new $n(r,i,n),o=await s.execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}class Qn{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Jn(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!Jn(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Ue(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Xn(e))}saveEventToCache(e){this.cachedEventUids.add(Xn(e)),this.lastProcessedEventTime=Date.now()}}function Xn(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((e=>e)).join("-")}function Jn({type:e,error:t}){return"unknown"===e&&"auth/no-auth-event"===(null==t?void 0:t.code)}const Yn=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Zn=/^https?/;async function er(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e,t={}){return tt(e,"GET","/v1/projects",t)}(e);for(const e of t)try{if(tr(e))return}catch(e){}xe(e,"unauthorized-domain")}function tr(e){const t=Ke(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!Zn.test(n))return!1;if(Yn.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const nr=new Qe(3e4,6e4);function rr(){const e=vn().___jsl;if(null==e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let t=0;t<e.CP.length;t++)e.CP[t]=null}let ir=null;function sr(e){return ir=ir||function(e){return new Promise(((t,n)=>{var r,i,s;function o(){rr(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{rr(),n(Ue(e,"network-request-failed"))},timeout:nr.get()})}if(null===(i=null===(r=vn().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(s=vn().gapi)||void 0===s?void 0:s.load)){const t=Dn("iframefcb");return vn()[t]=()=>{gapi.load?o():n(Ue(e,"network-request-failed"))},Nn(`https://apis.google.com/js/api.js?onload=${t}`).catch((e=>n(e)))}o()}})).catch((e=>{throw ir=null,e}))}(e),ir}const or=new Qe(5e3,15e3),ar={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},cr=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ur(e){const t=e.config;Be(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?Xe(t,"emulator/auth/iframe"):`https://${e.config.authDomain}/__/auth/iframe`,r={apiKey:t.apiKey,appName:e.name,v:me},i=cr.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${E(r).slice(1)}`}const lr={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class hr{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function dr(e,t,n,r=500,i=600){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const u=Object.assign(Object.assign({},lr),{width:r.toString(),height:i.toString(),top:s,left:o}),l=c().toLowerCase();n&&(a=_t(l)?"_blank":n),Et(l)&&(t=t||"http://localhost",u.scrollbars="yes");const h=Object.entries(u).reduce(((e,[t,n])=>`${e}${t}=${n},`),"");if(function(e=c()){var t;return Ot(e)&&!!(null===(t=window.navigator)||void 0===t?void 0:t.standalone)}(l)&&"_self"!==a)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",a),new hr(null);const d=window.open(t||"",a,h);Be(d,e,"popup-blocked");try{d.focus()}catch(e){}return new hr(d)}const fr="__/auth/handler",pr="emulator/auth/handler";function gr(e,t,n,r,i,s){Be(e.config.authDomain,e,"auth-domain-config-required"),Be(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:me,eventId:i};if(t instanceof Qt){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(s||{}))o[e]=t}if(t instanceof Xt){const e=t.getScopes().filter((e=>""!==e));e.length>0&&(o.scopes=e.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const e of Object.keys(a))void 0===a[e]&&delete a[e];return`${function({config:e}){if(!e.emulator)return`https://${e.authDomain}/${fr}`;return Xe(e,pr)}(e)}?${E(a).slice(1)}`}const mr="webStorageSupport";const yr=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=pn,this._completeRedirectFn=Wn,this._overrideRedirectResult=zn}async _openPopup(e,t,n,r){var i;He(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return dr(e,gr(e,t,n,Ke(),r),mn())}async _openRedirect(e,t,n,r){var i;return await this._originValidation(e),i=gr(e,t,n,Ke(),r),vn().location.href=i,new Promise((()=>{}))}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(He(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch((()=>{delete this.eventManagers[t]})),n}async initAndGetManager(e){const t=await async function(e){const t=await sr(e),n=vn().gapi;return Be(n,e,"internal-error"),t.open({where:document.body,url:ur(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ar,dontclear:!0},(t=>new Promise((async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=Ue(e,"network-request-failed"),s=vn().setTimeout((()=>{r(i)}),or.get());function o(){vn().clearTimeout(s),n(t)}t.ping(o).then(o,(()=>{r(i)}))}))))}(e),n=new Qn(e);return t.register("authEvent",(t=>{Be(null==t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(mr,{type:mr},(n=>{var r;const i=null===(r=null==n?void 0:n[0])||void 0===r?void 0:r.webStorageSupport;void 0!==i&&t(!!i),xe(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=er(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Dt()||Tt()||Ot()}};var vr="@firebase/auth",wr="0.20.9";class br{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{var n;e((null===(n=t)||void 0===n?void 0:n.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Be(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const Ir=g("authIdTokenMaxAge")||300;let Er=null;var Tr;Tr="Browser",de(new O("auth",((e,{options:t})=>{const n=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),{apiKey:i,authDomain:s}=n.options;return((e,n)=>{Be(i&&!i.includes(":"),"invalid-api-key",{appName:e.name}),Be(!(null==s?void 0:s.includes(":")),"argument-error",{appName:e.name});const r={apiKey:i,authDomain:s,clientPlatform:Tr,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Rt(Tr)},o=new Lt(e,n,r);return function(e,t){const n=(null==t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(ze);(null==t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null==t?void 0:t.popupRedirectResolver)}(o,t),o})(n,r)}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,n)=>{e.getProvider("auth-internal").initialize()}))),de(new O("auth-internal",(e=>(e=>new br(e))(Mt(e.getProvider("auth").getImmediate()))),"PRIVATE").setInstantiationMode("EXPLICIT")),we(vr,wr,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(Tr)),we(vr,wr,"esm2017");we("firebase","9.12.0","app");const _r="@firebase/installations",Sr="0.5.14",kr=1e4,Cr="w:0.5.14",Ar="FIS_v2",Or=36e5,Nr=new v("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Dr(e){return e instanceof y&&e.code.includes("request-failed")}function Rr({projectId:e}){return`https://firebaseinstallations.googleapis.com/v1/projects/${e}/installations`}function Pr(e){return{token:e.token,requestStatus:2,expiresIn:(t=e.expiresIn,Number(t.replace("s","000"))),creationTime:Date.now()};var t}async function Lr(e,t){const n=(await t.json()).error;return Nr.create("request-failed",{requestName:e,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function Mr({apiKey:e}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}function xr(e,{refreshToken:t}){const n=Mr(e);return n.append("Authorization",function(e){return`FIS_v2 ${e}`}(t)),n}async function Ur(e){const t=await e();return t.status>=500&&t.status<600?e():t}function Fr(e){return new Promise((t=>{setTimeout(t,e)}))}const jr=/^[cdef][\w-]{21}$/;function Vr(){try{const e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;const t=function(e){return(t=e,btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")).substr(0,22);var t}(e);return jr.test(t)?t:""}catch(e){return""}}function Br(e){return`${e.appName}!${e.appId}`}const qr=new Map;function Hr(e,t){const n=Br(e);$r(n,t),function(e,t){const n=Kr();n&&n.postMessage({key:e,fid:t});Gr()}(n,t)}function $r(e,t){const n=qr.get(e);if(n)for(const e of n)e(t)}let zr=null;function Kr(){return!zr&&"BroadcastChannel"in self&&(zr=new BroadcastChannel("[Firebase] FID Change"),zr.onmessage=e=>{$r(e.data.key,e.data.fid)}),zr}function Gr(){0===qr.size&&zr&&(zr.close(),zr=null)}const Wr="firebase-installations-store";let Qr=null;function Xr(){return Qr||(Qr=Y("firebase-installations-database",1,{upgrade:(e,t)=>{if(0===t)e.createObjectStore(Wr)}})),Qr}async function Jr(e,t){const n=Br(e),r=(await Xr()).transaction(Wr,"readwrite"),i=r.objectStore(Wr),s=await i.get(n);return await i.put(t,n),await r.done,s&&s.fid===t.fid||Hr(e,t.fid),t}async function Yr(e){const t=Br(e),n=(await Xr()).transaction(Wr,"readwrite");await n.objectStore(Wr).delete(t),await n.done}async function Zr(e,t){const n=Br(e),r=(await Xr()).transaction(Wr,"readwrite"),i=r.objectStore(Wr),s=await i.get(n),o=t(s);return void 0===o?await i.delete(n):await i.put(o,n),await r.done,!o||s&&s.fid===o.fid||Hr(e,o.fid),o}async function ei(e){let t;const n=await Zr(e.appConfig,(n=>{const r=function(e){return ri(e||{fid:Vr(),registrationStatus:0})}(n),i=function(e,t){if(0===t.registrationStatus){if(!navigator.onLine){return{installationEntry:t,registrationPromise:Promise.reject(Nr.create("app-offline"))}}const n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},r=async function(e,t){try{const n=await async function({appConfig:e,heartbeatServiceProvider:t},{fid:n}){const r=Rr(e),i=Mr(e),s=t.getImmediate({optional:!0});if(s){const e=await s.getHeartbeatsHeader();e&&i.append("x-firebase-client",e)}const o={fid:n,authVersion:Ar,appId:e.appId,sdkVersion:Cr},a={method:"POST",headers:i,body:JSON.stringify(o)},c=await Ur((()=>fetch(r,a)));if(c.ok){const e=await c.json();return{fid:e.fid||n,registrationStatus:2,refreshToken:e.refreshToken,authToken:Pr(e.authToken)}}throw await Lr("Create Installation",c)}(e,t);return Jr(e.appConfig,n)}catch(n){throw Dr(n)&&409===n.customData.serverCode?await Yr(e.appConfig):await Jr(e.appConfig,{fid:t.fid,registrationStatus:0}),n}}(e,n);return{installationEntry:n,registrationPromise:r}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:ti(e)}:{installationEntry:t}}(e,r);return t=i.registrationPromise,i.installationEntry}));return""===n.fid?{installationEntry:await t}:{installationEntry:n,registrationPromise:t}}async function ti(e){let t=await ni(e.appConfig);for(;1===t.registrationStatus;)await Fr(100),t=await ni(e.appConfig);if(0===t.registrationStatus){const{installationEntry:t,registrationPromise:n}=await ei(e);return n||t}return t}function ni(e){return Zr(e,(e=>{if(!e)throw Nr.create("installation-not-found");return ri(e)}))}function ri(e){return 1===(t=e).registrationStatus&&t.registrationTime+kr<Date.now()?{fid:e.fid,registrationStatus:0}:e;var t}async function ii({appConfig:e,heartbeatServiceProvider:t},n){const r=function(e,{fid:t}){return`${Rr(e)}/${t}/authTokens:generate`}(e,n),i=xr(e,n),s=t.getImmediate({optional:!0});if(s){const e=await s.getHeartbeatsHeader();e&&i.append("x-firebase-client",e)}const o={installation:{sdkVersion:Cr,appId:e.appId}},a={method:"POST",headers:i,body:JSON.stringify(o)},c=await Ur((()=>fetch(r,a)));if(c.ok){return Pr(await c.json())}throw await Lr("Generate Auth Token",c)}async function si(e,t=!1){let n;const r=await Zr(e.appConfig,(r=>{if(!ai(r))throw Nr.create("not-registered");const i=r.authToken;if(!t&&function(e){return 2===e.requestStatus&&!function(e){const t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+Or}(e)}(i))return r;if(1===i.requestStatus)return n=async function(e,t){let n=await oi(e.appConfig);for(;1===n.authToken.requestStatus;)await Fr(100),n=await oi(e.appConfig);const r=n.authToken;return 0===r.requestStatus?si(e,t):r}(e,t),r;{if(!navigator.onLine)throw Nr.create("app-offline");const t=function(e){const t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},e),{authToken:t})}(r);return n=async function(e,t){try{const n=await ii(e,t),r=Object.assign(Object.assign({},t),{authToken:n});return await Jr(e.appConfig,r),n}catch(n){if(!Dr(n)||401!==n.customData.serverCode&&404!==n.customData.serverCode){const n=Object.assign(Object.assign({},t),{authToken:{requestStatus:0}});await Jr(e.appConfig,n)}else await Yr(e.appConfig);throw n}}(e,t),t}}));return n?await n:r.authToken}function oi(e){return Zr(e,(e=>{if(!ai(e))throw Nr.create("not-registered");const t=e.authToken;return 1===(n=t).requestStatus&&n.requestTime+kr<Date.now()?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e;var n}))}function ai(e){return void 0!==e&&2===e.registrationStatus}async function ci(e,t=!1){const n=e;await async function(e){const{registrationPromise:t}=await ei(e);t&&await t}(n);return(await si(n,t)).token}function ui(e){return Nr.create("missing-app-config-values",{valueName:e})}const li="installations",hi=e=>{const t=e.getProvider("app").getImmediate(),n=function(e){if(!e||!e.options)throw ui("App Configuration");if(!e.name)throw ui("App Name");const t=["projectId","apiKey","appId"];for(const n of t)if(!e.options[n])throw ui(n);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(t);return{app:t,appConfig:n,heartbeatServiceProvider:fe(t,"heartbeat"),_delete:()=>Promise.resolve()}},di=e=>{const t=fe(e.getProvider("app").getImmediate(),li).getImmediate();return{getId:()=>async function(e){const t=e,{installationEntry:n,registrationPromise:r}=await ei(t);return r?r.catch(console.error):si(t).catch(console.error),n.fid}(t),getToken:e=>ci(t,e)}};de(new O(li,hi,"PUBLIC")),de(new O("installations-internal",di,"PRIVATE")),we(_r,Sr),we(_r,Sr,"esm2017");const fi="analytics",pi="https://www.googletagmanager.com/gtag/js",gi=new j("@firebase/analytics");function mi(e){return Promise.all(e.map((e=>e.catch((e=>e)))))}function yi(e,t,n,r){return async function(i,s,o){try{"event"===i?await async function(e,t,n,r,i){try{let s=[];if(i&&i.send_to){let e=i.send_to;Array.isArray(e)||(e=[e]);const r=await mi(n);for(const n of e){const e=r.find((e=>e.measurementId===n)),i=e&&t[e.appId];if(!i){s=[];break}s.push(i)}}0===s.length&&(s=Object.values(t)),await Promise.all(s),e("event",r,i||{})}catch(e){gi.error(e)}}(e,t,n,s,o):"config"===i?await async function(e,t,n,r,i,s){const o=r[i];try{if(o)await t[o];else{const e=(await mi(n)).find((e=>e.measurementId===i));e&&await t[e.appId]}}catch(e){gi.error(e)}e("config",i,s)}(e,t,n,r,s,o):"consent"===i?e("consent","update",o):e("set",s)}catch(e){gi.error(e)}}}const vi=new v("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'});const wi=new class{constructor(e={},t=1e3){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};function bi(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}async function Ii(e,t=wi,n){const{appId:r,apiKey:i,measurementId:s}=e.options;if(!r)throw vi.create("no-app-id");if(!i){if(s)return{measurementId:s,appId:r};throw vi.create("no-api-key")}const o=t.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new Ti;return setTimeout((async()=>{a.abort()}),void 0!==n?n:6e4),Ei({appId:r,apiKey:i,measurementId:s},o,a,t)}async function Ei(e,{throttleEndTimeMillis:t,backoffCount:n},r,i=wi){var s,o;const{appId:a,measurementId:c}=e;try{await function(e,t){return new Promise(((n,r)=>{const i=Math.max(t-Date.now(),0),s=setTimeout(n,i);e.addEventListener((()=>{clearTimeout(s),r(vi.create("fetch-throttle",{throttleEndTimeMillis:t}))}))}))}(r,t)}catch(e){if(c)return gi.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${c} provided in the "measurementId" field in the local Firebase config. [${null===(s=e)||void 0===s?void 0:s.message}]`),{appId:a,measurementId:c};throw e}try{const t=await async function(e){var t;const{appId:n,apiKey:r}=e,i={method:"GET",headers:bi(r)},s="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig".replace("{app-id}",n),o=await fetch(s,i);if(200!==o.status&&304!==o.status){let e="";try{const n=await o.json();(null===(t=n.error)||void 0===t?void 0:t.message)&&(e=n.error.message)}catch(e){}throw vi.create("config-fetch-failed",{httpStatus:o.status,responseMessage:e})}return o.json()}(e);return i.deleteThrottleMetadata(a),t}catch(t){const s=t;if(!function(e){if(!(e instanceof y&&e.customData))return!1;const t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}(s)){if(i.deleteThrottleMetadata(a),c)return gi.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${c} provided in the "measurementId" field in the local Firebase config. [${null==s?void 0:s.message}]`),{appId:a,measurementId:c};throw t}const u=503===Number(null===(o=null==s?void 0:s.customData)||void 0===o?void 0:o.httpStatus)?C(n,i.intervalMillis,30):C(n,i.intervalMillis),l={throttleEndTimeMillis:Date.now()+u,backoffCount:n+1};return i.setThrottleMetadata(a,l),gi.debug(`Calling attemptFetch again in ${u} millis`),Ei(e,l,r,i)}}class Ti{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach((e=>e()))}}let _i,Si;function ki(e){Si=e}function Ci(e){_i=e}async function Ai(e,t,n,r,i,s,o){var a;const c=Ii(e);c.then((t=>{n[t.measurementId]=t.appId,e.options.measurementId&&t.measurementId!==e.options.measurementId&&gi.warn(`The measurement ID in the local Firebase config (${e.options.measurementId}) does not match the measurement ID fetched from the server (${t.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)})).catch((e=>gi.error(e))),t.push(c);const u=async function(){var e;if(!l())return gi.warn(vi.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{await h()}catch(t){return gi.warn(vi.create("indexeddb-unavailable",{errorInfo:null===(e=t)||void 0===e?void 0:e.toString()}).message),!1}return!0}().then((e=>e?r.getId():void 0)),[d,f]=await Promise.all([c,u]);(function(e){const t=window.document.getElementsByTagName("script");for(const n of Object.values(t))if(n.src&&n.src.includes(pi)&&n.src.includes(e))return n;return null})(s)||function(e,t){const n=document.createElement("script");n.src=`${pi}?l=${e}&id=${t}`,n.async=!0,document.head.appendChild(n)}(s,d.measurementId),Si&&(i("consent","default",Si),ki(void 0)),i("js",new Date);const p=null!==(a=null==o?void 0:o.config)&&void 0!==a?a:{};return p.origin="firebase",p.update=!0,null!=f&&(p.firebase_id=f),i("config",d.measurementId,p),_i&&(i("set",_i),Ci(void 0)),d.measurementId}class Oi{constructor(e){this.app=e}_delete(){return delete Ni[this.app.options.appId],Promise.resolve()}}let Ni={},Di=[];const Ri={};let Pi,Li,Mi="dataLayer",xi="gtag",Ui=!1;function Fi(){const e=[];if(u()&&e.push("This is a browser extension environment."),"undefined"!=typeof navigator&&navigator.cookieEnabled||e.push("Cookies are not available."),e.length>0){const t=e.map(((e,t)=>`(${t+1}) ${e}`)).join(" "),n=vi.create("invalid-analytics-context",{errorInfo:t});gi.warn(n.message)}}function ji(e,t,n){Fi();const r=e.options.appId;if(!r)throw vi.create("no-app-id");if(!e.options.apiKey){if(!e.options.measurementId)throw vi.create("no-api-key");gi.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${e.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Ni[r])throw vi.create("already-exists",{id:r});if(!Ui){!function(e){let t=[];Array.isArray(window[e])?t=window[e]:window[e]=t}(Mi);const{wrappedGtag:e,gtagCore:t}=function(e,t,n,r,i){let s=function(...e){window[r].push(arguments)};return window[i]&&"function"==typeof window[i]&&(s=window[i]),window[i]=yi(s,e,t,n),{gtagCore:s,wrappedGtag:window[i]}}(Ni,Di,Ri,Mi,xi);Li=e,Pi=t,Ui=!0}Ni[r]=Ai(e,Di,Ri,t,Pi,Mi,n);return new Oi(e)}function Vi(e,t,n,r){e=A(e),async function(e,t,n,r,i){if(i&&i.global)e("event",n,r);else{const i=await t;e("event",n,Object.assign(Object.assign({},r),{send_to:i}))}}(Li,Ni[e.app.options.appId],t,n,r).catch((e=>gi.error(e)))}const Bi="@firebase/analytics",qi="0.8.2";de(new O(fi,((e,{options:t})=>ji(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),t)),"PUBLIC")),de(new O("analytics-internal",(function(e){try{const t=e.getProvider(fi).getImmediate();return{logEvent:(e,n,r)=>Vi(t,e,n,r)}}catch(e){throw vi.create("interop-component-reg-failed",{reason:e})}}),"PRIVATE")),we(Bi,qi),we(Bi,qi,"esm2017");var Hi,$i="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self?self:{},zi={},Ki=Ki||{},Gi=$i||self;function Wi(){}function Qi(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function Xi(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var Ji="closure_uid_"+(1e9*Math.random()>>>0),Yi=0;function Zi(e,t,n){return e.call.apply(e.bind,arguments)}function es(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function ts(e,t,n){return(ts=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Zi:es).apply(null,arguments)}function ns(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function rs(e,t){function n(){}n.prototype=t.prototype,e.X=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Wb=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}function is(){this.s=this.s,this.o=this.o}var ss={};is.prototype.s=!1,is.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var e=function(e){return Object.prototype.hasOwnProperty.call(e,Ji)&&e[Ji]||(e[Ji]=++Yi)}(this);delete ss[e]}},is.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const os=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"==typeof e)return"string"!=typeof t||1!=t.length?-1:e.indexOf(t,0);for(let n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function as(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function cs(e,t){for(let t=1;t<arguments.length;t++){const n=arguments[t];if(Qi(n)){const t=e.length||0,r=n.length||0;e.length=t+r;for(let i=0;i<r;i++)e[t+i]=n[i]}else e.push(n)}}function us(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}us.prototype.h=function(){this.defaultPrevented=!0};var ls=function(){if(!Gi.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{Gi.addEventListener("test",Wi,t),Gi.removeEventListener("test",Wi,t)}catch(e){}return e}();function hs(e){return/^[\s\xa0]*$/.test(e)}var ds=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function fs(e,t){return e<t?-1:e>t?1:0}function ps(){var e=Gi.navigator;return e&&(e=e.userAgent)?e:""}function gs(e){return-1!=ps().indexOf(e)}function ms(e){return ms[" "](e),e}ms[" "]=Wi;var ys,vs=gs("Opera"),ws=gs("Trident")||gs("MSIE"),bs=gs("Edge"),Is=bs||ws,Es=gs("Gecko")&&!(-1!=ps().toLowerCase().indexOf("webkit")&&!gs("Edge"))&&!(gs("Trident")||gs("MSIE"))&&!gs("Edge"),Ts=-1!=ps().toLowerCase().indexOf("webkit")&&!gs("Edge");function _s(){var e=Gi.document;return e?e.documentMode:void 0}e:{var Ss="",ks=function(){var e=ps();return Es?/rv:([^\);]+)(\)|;)/.exec(e):bs?/Edge\/([\d\.]+)/.exec(e):ws?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):Ts?/WebKit\/(\S+)/.exec(e):vs?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(ks&&(Ss=ks?ks[1]:""),ws){var Cs=_s();if(null!=Cs&&Cs>parseFloat(Ss)){ys=String(Cs);break e}}ys=Ss}var As,Os={};function Ns(){return function(e){var t=Os;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}((function(){let e=0;const t=ds(String(ys)).split("."),n=ds("9").split("."),r=Math.max(t.length,n.length);for(let o=0;0==e&&o<r;o++){var i=t[o]||"",s=n[o]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==i[0].length&&0==s[0].length)break;e=fs(0==i[1].length?0:parseInt(i[1],10),0==s[1].length?0:parseInt(s[1],10))||fs(0==i[2].length,0==s[2].length)||fs(i[2],s[2]),i=i[3],s=s[3]}while(0==e)}return 0<=e}))}if(Gi.document&&ws){var Ds=_s();As=Ds||(parseInt(ys,10)||void 0)}else As=void 0;var Rs=As;function Ps(e,t){if(us.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(Es){e:{try{ms(t.nodeName);var i=!0;break e}catch(e){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"==typeof e.pointerType?e.pointerType:Ls[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Ps.X.h.call(this)}}rs(Ps,us);var Ls={2:"touch",3:"pen",4:"mouse"};Ps.prototype.h=function(){Ps.X.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Ms="closure_listenable_"+(1e6*Math.random()|0),xs=0;function Us(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++xs,this.ba=this.ea=!1}function Fs(e){e.ba=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function js(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function Vs(e){const t={};for(const n in e)t[n]=e[n];return t}const Bs="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function qs(e,t){let n,r;for(let t=1;t<arguments.length;t++){for(n in r=arguments[t],r)e[n]=r[n];for(let t=0;t<Bs.length;t++)n=Bs[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Hs(e){this.src=e,this.g={},this.h=0}function $s(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],s=os(i,t);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(Fs(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function zs(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.ba&&s.listener==t&&s.capture==!!n&&s.ha==r)return i}return-1}Hs.prototype.add=function(e,t,n,r,i){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var o=zs(e,t,r,i);return-1<o?(t=e[o],n||(t.ea=!1)):((t=new Us(t,this.src,s,!!r,i)).ea=n,e.push(t)),t};var Ks="closure_lm_"+(1e6*Math.random()|0),Gs={};function Ws(e,t,n,r,i){if(r&&r.once)return Xs(e,t,n,r,i);if(Array.isArray(t)){for(var s=0;s<t.length;s++)Ws(e,t[s],n,r,i);return null}return n=ro(n),e&&e[Ms]?e.N(t,n,Xi(r)?!!r.capture:!!r,i):Qs(e,t,n,!1,r,i)}function Qs(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var o=Xi(i)?!!i.capture:!!i,a=to(e);if(a||(e[Ks]=a=new Hs(e)),(n=a.add(t,n,r,o,s)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=eo;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)ls||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Zs(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Xs(e,t,n,r,i){if(Array.isArray(t)){for(var s=0;s<t.length;s++)Xs(e,t[s],n,r,i);return null}return n=ro(n),e&&e[Ms]?e.O(t,n,Xi(r)?!!r.capture:!!r,i):Qs(e,t,n,!0,r,i)}function Js(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)Js(e,t[s],n,r,i);else r=Xi(r)?!!r.capture:!!r,n=ro(n),e&&e[Ms]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=zs(s=e.g[t],n,r,i))&&(Fs(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--)))):e&&(e=to(e))&&(t=e.g[t.toString()],e=-1,t&&(e=zs(t,n,r,i)),(n=-1<e?t[e]:null)&&Ys(n))}function Ys(e){if("number"!=typeof e&&e&&!e.ba){var t=e.src;if(t&&t[Ms])$s(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Zs(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=to(t))?($s(n,e),0==n.h&&(n.src=null,t[Ks]=null)):Fs(e)}}}function Zs(e){return e in Gs?Gs[e]:Gs[e]="on"+e}function eo(e,t){if(e.ba)e=!0;else{t=new Ps(t,this);var n=e.listener,r=e.ha||e.src;e.ea&&Ys(e),e=n.call(r,t)}return e}function to(e){return(e=e[Ks])instanceof Hs?e:null}var no="__closure_events_fn_"+(1e9*Math.random()>>>0);function ro(e){return"function"==typeof e?e:(e[no]||(e[no]=function(t){return e.handleEvent(t)}),e[no])}function io(){is.call(this),this.i=new Hs(this),this.P=this,this.I=null}function so(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"==typeof t)t=new us(t,e);else if(t instanceof us)t.target=t.target||e;else{var i=t;qs(t=new us(r,e),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=t.g=n[s];i=oo(o,r,!0,t)&&i}if(i=oo(o=t.g=e,r,!0,t)&&i,i=oo(o,r,!1,t)&&i,n)for(s=0;s<n.length;s++)i=oo(o=t.g=n[s],r,!1,t)&&i}function oo(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var o=t[s];if(o&&!o.ba&&o.capture==n){var a=o.listener,c=o.ha||o.src;o.ea&&$s(e.i,o),i=!1!==a.call(c,r)&&i}}return i&&!r.defaultPrevented}rs(io,is),io.prototype[Ms]=!0,io.prototype.removeEventListener=function(e,t,n,r){Js(this,e,t,n,r)},io.prototype.M=function(){if(io.X.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Fs(n[r]);delete t.g[e],t.h--}}this.I=null},io.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},io.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var ao=Gi.JSON.stringify;function co(){var e=mo;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var uo,lo=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}((()=>new ho),(e=>e.reset()));class ho{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function fo(e){Gi.setTimeout((()=>{throw e}),0)}function po(e,t){uo||function(){var e=Gi.Promise.resolve(void 0);uo=function(){e.then(yo)}}(),go||(uo(),go=!0),mo.add(e,t)}var go=!1,mo=new class{constructor(){this.h=this.g=null}add(e,t){const n=lo.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}};function yo(){for(var e;e=co();){try{e.h.call(e.g)}catch(e){fo(e)}var t=lo;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}go=!1}function vo(e,t){io.call(this),this.h=e||1,this.g=t||Gi,this.j=ts(this.lb,this),this.l=Date.now()}function wo(e){e.ca=!1,e.R&&(e.g.clearTimeout(e.R),e.R=null)}function bo(e,t,n){if("function"==typeof e)n&&(e=ts(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=ts(e.handleEvent,e)}return 2147483647<Number(t)?-1:Gi.setTimeout(e,t||0)}function Io(e){e.g=bo((()=>{e.g=null,e.i&&(e.i=!1,Io(e))}),e.j);const t=e.h;e.h=null,e.m.apply(null,t)}rs(vo,io),(Hi=vo.prototype).ca=!1,Hi.R=null,Hi.lb=function(){if(this.ca){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-e):(this.R&&(this.g.clearTimeout(this.R),this.R=null),so(this,"tick"),this.ca&&(wo(this),this.start()))}},Hi.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Hi.M=function(){vo.X.M.call(this),wo(this),delete this.g};class Eo extends is{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Io(this)}M(){super.M(),this.g&&(Gi.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function To(e){is.call(this),this.h=e,this.g={}}rs(To,is);var _o=[];function So(e,t,n,r){Array.isArray(n)||(n&&(_o[0]=n.toString()),n=_o);for(var i=0;i<n.length;i++){var s=Ws(t,n[i],r||e.handleEvent,!1,e.h||e);if(!s)break;e.g[s.key]=s}}function ko(e){js(e.g,(function(e,t){this.g.hasOwnProperty(t)&&Ys(e)}),e),e.g={}}function Co(){this.g=!0}function Ao(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return ao(n)}catch(e){return t}}(e,n)+(r?" "+r:"")}))}To.prototype.M=function(){To.X.M.call(this),ko(this)},To.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Co.prototype.Aa=function(){this.g=!1},Co.prototype.info=function(){};var Oo={},No=null;function Do(){return No=No||new io}function Ro(e){us.call(this,Oo.Pa,e)}function Po(e){const t=Do();so(t,new Ro(t,e))}function Lo(e,t){us.call(this,Oo.STAT_EVENT,e),this.stat=t}function Mo(e){const t=Do();so(t,new Lo(t,e))}function xo(e,t){us.call(this,Oo.Qa,e),this.size=t}function Uo(e,t){if("function"!=typeof e)throw Error("Fn must not be null and must be a function");return Gi.setTimeout((function(){e()}),t)}Oo.Pa="serverreachability",rs(Ro,us),Oo.STAT_EVENT="statevent",rs(Lo,us),Oo.Qa="timingevent",rs(xo,us);var Fo={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},jo={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function Vo(){}function Bo(e){return e.h||(e.h=e.i())}function qo(){}Vo.prototype.h=null;var Ho,$o={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function zo(){us.call(this,"d")}function Ko(){us.call(this,"c")}function Go(){}function Wo(e,t,n,r){this.l=e,this.j=t,this.m=n,this.U=r||1,this.S=new To(this),this.O=Xo,e=Is?125:void 0,this.T=new vo(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new Qo}function Qo(){this.i=null,this.g="",this.h=!1}rs(zo,us),rs(Ko,us),rs(Go,Vo),Go.prototype.g=function(){return new XMLHttpRequest},Go.prototype.i=function(){return{}},Ho=new Go;var Xo=45e3,Jo={},Yo={};function Zo(e,t,n){e.K=1,e.v=va(fa(t)),e.s=n,e.P=!0,ea(e,null)}function ea(e,t){e.F=Date.now(),ia(e),e.A=fa(e.v);var n=e.A,r=e.U;Array.isArray(r)||(r=[String(r)]),Da(n.i,"t",r),e.C=0,n=e.l.H,e.h=new Qo,e.g=Nc(e.l,n?t:null,!e.s),0<e.N&&(e.L=new Eo(ts(e.La,e,e.g),e.N)),So(e.S,e.g,"readystatechange",e.ib),t=e.H?Vs(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.da(e.A,e.u,e.s,t)):(e.u="GET",e.g.da(e.A,e.u,null,t)),Po(1),function(e,t,n,r,i,s){e.info((function(){if(e.g)if(s)for(var o="",a=s.split("&"),c=0;c<a.length;c++){var u=a[c].split("=");if(1<u.length){var l=u[0];u=u[1];var h=l.split("_");o=2<=h.length&&"type"==h[1]?o+(l+"=")+u+"&":o+(l+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.U,e.s)}function ta(e){return!!e.g&&("GET"==e.u&&2!=e.K&&e.l.Da)}function na(e,t,n){let r,i=!0;for(;!e.I&&e.C<n.length;){if(r=ra(e,n),r==Yo){4==t&&(e.o=4,Mo(14),i=!1),Ao(e.j,e.m,null,"[Incomplete Response]");break}if(r==Jo){e.o=4,Mo(15),Ao(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}Ao(e.j,e.m,r,null),ua(e,r)}ta(e)&&r!=Yo&&r!=Jo&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,Mo(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.$&&(e.$=!0,(t=e.l).g==e&&t.$&&!t.K&&(t.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),Ec(t),t.K=!0,Mo(11))):(Ao(e.j,e.m,n,"[Invalid Chunked Response]"),ca(e),aa(e))}function ra(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Yo:(n=Number(t.substring(n,r)),isNaN(n)?Jo:(r+=1)+n>t.length?Yo:(t=t.substr(r,n),e.C=r+n,t))}function ia(e){e.V=Date.now()+e.O,sa(e,e.O)}function sa(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Uo(ts(e.gb,e),t)}function oa(e){e.B&&(Gi.clearTimeout(e.B),e.B=null)}function aa(e){0==e.l.G||e.I||Sc(e.l,e)}function ca(e){oa(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,wo(e.T),ko(e.S),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function ua(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||Ua(n.h,e)))if(!e.J&&Ua(n.h,e)&&3==n.G){try{var r=n.Fa.g.parse(t)}catch(e){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;_c(n),pc(n)}Ic(n),Mo(18)}}else n.Ba=i[1],0<n.Ba-n.T&&37500>i[2]&&n.L&&0==n.A&&!n.v&&(n.v=Uo(ts(n.cb,n),6e3));if(1>=xa(n.h)&&n.ja){try{n.ja()}catch(e){}n.ja=void 0}}else Cc(n,11)}else if((e.J||n.g==e)&&_c(n),!hs(t))for(i=n.Fa.g.parse(t),t=0;t<i.length;t++){let u=i[t];if(n.T=u[0],u=u[1],2==n.G)if("c"==u[0]){n.I=u[1],n.ka=u[2];const t=u[3];null!=t&&(n.ma=t,n.j.info("VER="+n.ma));const i=u[4];null!=i&&(n.Ca=i,n.j.info("SVER="+n.Ca));const l=u[5];null!=l&&"number"==typeof l&&0<l&&(r=1.5*l,n.J=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.h;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(Fa(s,s.h),s.h=null))}if(r.D){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.za=e,ya(r.F,r.D,e))}}n.G=3,n.l&&n.l.xa(),n.$&&(n.P=Date.now()-e.F,n.j.info("Handshake RTT: "+n.P+"ms"));var o=e;if((r=n).sa=Oc(r,r.H?r.ka:null,r.V),o.J){ja(r.h,o);var a=o,c=r.J;c&&a.setTimeout(c),a.B&&(oa(a),ia(a)),r.g=o}else bc(r);0<n.i.length&&mc(n)}else"stop"!=u[0]&&"close"!=u[0]||Cc(n,7);else 3==n.G&&("stop"==u[0]||"close"==u[0]?"stop"==u[0]?Cc(n,7):fc(n):"noop"!=u[0]&&n.l&&n.l.wa(u),n.A=0)}Po(4)}catch(e){}}function la(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(Qi(e)||"string"==typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.oa&&"function"==typeof e.oa)return e.oa();if(!e.W||"function"!=typeof e.W){if("undefined"!=typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!=typeof Set&&e instanceof Set)){if(Qi(e)||"string"==typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.W&&"function"==typeof e.W)return e.W();if("undefined"!=typeof Map&&e instanceof Map||"undefined"!=typeof Set&&e instanceof Set)return Array.from(e.values());if("string"==typeof e)return e.split("");if(Qi(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,s=0;s<i;s++)t.call(void 0,r[s],n&&n[s],e)}(Hi=Wo.prototype).setTimeout=function(e){this.O=e},Hi.ib=function(e){e=e.target;const t=this.L;t&&3==ac(e)?t.l():this.La(e)},Hi.La=function(e){try{if(e==this.g)e:{const l=ac(this.g);var t=this.g.Ea();const h=this.g.aa();if(!(3>l)&&(3!=l||Is||this.g&&(this.h.h||this.g.fa()||cc(this.g)))){this.I||4!=l||7==t||Po(8==t||0>=h?3:2),oa(this);var n=this.g.aa();this.Y=n;t:if(ta(this)){var r=cc(this.g);e="";var i=r.length,s=4==ac(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){ca(this),aa(this);var o="";break t}this.h.i=new Gi.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:s&&t==i-1});r.splice(0,i),this.h.g+=e,this.C=0,o=this.h.g}else o=this.g.fa();if(this.i=200==n,function(e,t,n,r,i,s,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+o}))}(this.j,this.u,this.A,this.m,this.U,l,n),this.i){if(this.Z&&!this.J){t:{if(this.g){var a,c=this.g;if((a=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!hs(a)){var u=a;break t}}u=null}if(!(n=u)){this.i=!1,this.o=3,Mo(12),ca(this),aa(this);break e}Ao(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,ua(this,n)}this.P?(na(this,l,o),Is&&this.i&&3==l&&(So(this.S,this.T,"tick",this.hb),this.T.start())):(Ao(this.j,this.m,o,null),ua(this,o)),4==l&&ca(this),this.i&&!this.I&&(4==l?Sc(this.l,this):(this.i=!1,ia(this)))}else 400==n&&0<o.indexOf("Unknown SID")?(this.o=3,Mo(12)):(this.o=0,Mo(13)),ca(this),aa(this)}}}catch(e){}},Hi.hb=function(){if(this.g){var e=ac(this.g),t=this.g.fa();this.C<t.length&&(oa(this),na(this,e,t),this.i&&4!=e&&ia(this))}},Hi.cancel=function(){this.I=!0,ca(this)},Hi.gb=function(){this.B=null;const e=Date.now();0<=e-this.V?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.K&&(Po(3),Mo(17)),ca(this),this.o=2,aa(this)):sa(this,this.V-e)};var ha=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function da(e,t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof da){this.h=void 0!==t?t:e.h,pa(this,e.j),this.s=e.s,this.g=e.g,ga(this,e.m),this.l=e.l,t=e.i;var n=new Ca;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),ma(this,n),this.o=e.o}else e&&(n=String(e).match(ha))?(this.h=!!t,pa(this,n[1]||"",!0),this.s=wa(n[2]||""),this.g=wa(n[3]||"",!0),ga(this,n[4]),this.l=wa(n[5]||"",!0),ma(this,n[6]||"",!0),this.o=wa(n[7]||"")):(this.h=!!t,this.i=new Ca(null,this.h))}function fa(e){return new da(e)}function pa(e,t,n){e.j=n?wa(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function ga(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function ma(e,t,n){t instanceof Ca?(e.i=t,function(e,t){t&&!e.j&&(Aa(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Oa(this,t),Da(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=ba(t,Sa)),e.i=new Ca(t,e.h))}function ya(e,t,n){e.i.set(t,n)}function va(e){return ya(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function wa(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function ba(e,t,n){return"string"==typeof e?(e=encodeURI(e).replace(t,Ia),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Ia(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}da.prototype.toString=function(){var e=[],t=this.j;t&&e.push(ba(t,Ea,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(ba(t,Ea,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(ba(n,"/"==n.charAt(0)?_a:Ta,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",ba(n,ka)),e.join("")};var Ea=/[#\/\?@]/g,Ta=/[#\?:]/g,_a=/[#\?]/g,Sa=/[#\?@]/g,ka=/#/g;function Ca(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Aa(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Oa(e,t){Aa(e),t=Ra(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Na(e,t){return Aa(e),t=Ra(e,t),e.g.has(t)}function Da(e,t,n){Oa(e,t),0<n.length&&(e.i=null,e.g.set(Ra(e,t),as(n)),e.h+=n.length)}function Ra(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(Hi=Ca.prototype).add=function(e,t){Aa(this),this.i=null,e=Ra(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},Hi.forEach=function(e,t){Aa(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},Hi.oa=function(){Aa(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},Hi.W=function(e){Aa(this);let t=[];if("string"==typeof e)Na(this,e)&&(t=t.concat(this.g.get(Ra(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},Hi.set=function(e,t){return Aa(this),this.i=null,Na(this,e=Ra(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},Hi.get=function(e,t){return e&&0<(e=this.W(e)).length?String(e[0]):t},Hi.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const s=encodeURIComponent(String(r)),o=this.W(r);for(r=0;r<o.length;r++){var i=s;""!==o[r]&&(i+="="+encodeURIComponent(String(o[r]))),e.push(i)}}return this.i=e.join("&")};function Pa(e){this.l=e||La,Gi.PerformanceNavigationTiming?e=0<(e=Gi.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(Gi.g&&Gi.g.Ga&&Gi.g.Ga()&&Gi.g.Ga().$b),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var La=10;function Ma(e){return!!e.h||!!e.g&&e.g.size>=e.j}function xa(e){return e.h?1:e.g?e.g.size:0}function Ua(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Fa(e,t){e.g?e.g.add(t):e.h=t}function ja(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Va(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return as(e.i)}function Ba(){}function qa(){this.g=new Ba}function Ha(e,t,n){const r=n||"";try{la(e,(function(e,n){let i=e;Xi(e)&&(i=ao(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(e){throw t.push(r+"type="+encodeURIComponent("_badmap")),e}}function $a(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(e){}}function za(e){this.l=e.ac||null,this.j=e.jb||!1}function Ka(e,t){io.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=Ga,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Pa.prototype.cancel=function(){if(this.i=Va(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}},Ba.prototype.stringify=function(e){return Gi.JSON.stringify(e,void 0)},Ba.prototype.parse=function(e){return Gi.JSON.parse(e,void 0)},rs(za,Vo),za.prototype.g=function(){return new Ka(this.l,this.j)},za.prototype.i=function(e){return function(){return e}}({}),rs(Ka,io);var Ga=0;function Wa(e){e.j.read().then(e.Ta.bind(e)).catch(e.ga.bind(e))}function Qa(e){e.readyState=4,e.l=null,e.j=null,e.A=null,Xa(e)}function Xa(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(Hi=Ka.prototype).open=function(e,t){if(this.readyState!=Ga)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,Xa(this)},Hi.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||Gi).fetch(new Request(this.B,t)).then(this.Wa.bind(this),this.ga.bind(this))},Hi.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Qa(this)),this.readyState=Ga},Hi.Wa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Xa(this)),this.g&&(this.readyState=3,Xa(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(void 0!==Gi.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Wa(this)}else e.text().then(this.Va.bind(this),this.ga.bind(this))},Hi.Ta=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Qa(this):Xa(this),3==this.readyState&&Wa(this)}},Hi.Va=function(e){this.g&&(this.response=this.responseText=e,Qa(this))},Hi.Ua=function(e){this.g&&(this.response=e,Qa(this))},Hi.ga=function(){this.g&&Qa(this)},Hi.setRequestHeader=function(e,t){this.v.append(e,t)},Hi.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},Hi.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Ka.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var Ja=Gi.JSON.parse;function Ya(e){io.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Za,this.K=this.L=!1}rs(Ya,io);var Za="",ec=/^https?$/i,tc=["POST","PUT"];function nc(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,rc(e),sc(e)}function rc(e){e.D||(e.D=!0,so(e,"complete"),so(e,"error"))}function ic(e){if(e.h&&void 0!==Ki&&(!e.C[1]||4!=ac(e)||2!=e.aa()))if(e.v&&4==ac(e))bo(e.Ha,0,e);else if(so(e,"readystatechange"),4==ac(e)){e.h=!1;try{const a=e.aa();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var r;if(r=0===a){var i=String(e.H).match(ha)[1]||null;if(!i&&Gi.self&&Gi.self.location){var s=Gi.self.location.protocol;i=s.substr(0,s.length-1)}r=!ec.test(i?i.toLowerCase():"")}n=r}if(n)so(e,"complete"),so(e,"success");else{e.m=6;try{var o=2<ac(e)?e.g.statusText:""}catch(e){o=""}e.j=o+" ["+e.aa()+"]",rc(e)}}finally{sc(e)}}}function sc(e,t){if(e.g){oc(e);const n=e.g,r=e.C[0]?Wi:null;e.g=null,e.C=null,t||so(e,"ready");try{n.onreadystatechange=r}catch(e){}}}function oc(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(Gi.clearTimeout(e.A),e.A=null)}function ac(e){return e.g?e.g.readyState:0}function cc(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case Za:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(e){return null}}function uc(e){let t="";return js(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function lc(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=uc(n),"string"==typeof e?null!=n&&encodeURIComponent(String(n)):ya(e,t,n))}function hc(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function dc(e){this.Ca=0,this.i=[],this.j=new Co,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=hc("failFast",!1,e),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=hc("baseRetryDelayMs",5e3,e),this.bb=hc("retryDelaySeedMs",1e4,e),this.$a=hc("forwardChannelMaxRetries",2,e),this.ta=hc("forwardChannelRequestTimeoutMs",2e4,e),this.ra=e&&e.xmlHttpFactory||void 0,this.Da=e&&e.Zb||!1,this.J=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.I="",this.h=new Pa(e&&e.concurrentRequestLimit),this.Fa=new qa,this.O=e&&e.fastHandshake||!1,this.N=e&&e.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=e&&e.Xb||!1,e&&e.Aa&&this.j.Aa(),e&&e.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&e&&e.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function fc(e){if(gc(e),3==e.G){var t=e.U++,n=fa(e.F);ya(n,"SID",e.I),ya(n,"RID",t),ya(n,"TYPE","terminate"),vc(e,n),(t=new Wo(e,e.j,t,void 0)).K=2,t.v=va(fa(n)),n=!1,Gi.navigator&&Gi.navigator.sendBeacon&&(n=Gi.navigator.sendBeacon(t.v.toString(),"")),!n&&Gi.Image&&((new Image).src=t.v,n=!0),n||(t.g=Nc(t.l,null),t.g.da(t.v)),t.F=Date.now(),ia(t)}Ac(e)}function pc(e){e.g&&(Ec(e),e.g.cancel(),e.g=null)}function gc(e){pc(e),e.u&&(Gi.clearTimeout(e.u),e.u=null),_c(e),e.h.cancel(),e.m&&("number"==typeof e.m&&Gi.clearTimeout(e.m),e.m=null)}function mc(e){Ma(e.h)||e.m||(e.m=!0,po(e.Ja,e),e.C=0)}function yc(e,t){var n;n=t?t.m:e.U++;const r=fa(e.F);ya(r,"SID",e.I),ya(r,"RID",n),ya(r,"AID",e.T),vc(e,r),e.o&&e.s&&lc(r,e.o,e.s),n=new Wo(e,e.j,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.i=t.D.concat(e.i)),t=wc(e,n,1e3),n.setTimeout(Math.round(.5*e.ta)+Math.round(.5*e.ta*Math.random())),Fa(e.h,n),Zo(n,r,t)}function vc(e,t){e.ia&&js(e.ia,(function(e,n){ya(t,n,e)})),e.l&&la({},(function(e,n){ya(t,n,e)}))}function wc(e,t,n){n=Math.min(e.i.length,n);var r=e.l?ts(e.l.Ra,e.l,e):null;e:{var i=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].h,e.push("ofs="+t)):t=0:e.push("ofs="+t);let s=!0;for(let o=0;o<n;o++){let n=i[o].h;const a=i[o].g;if(n-=t,0>n)t=Math.max(0,i[o].h-100),s=!1;else try{Ha(a,e,"req"+n+"_")}catch(e){r&&r(a)}}if(s){r=e.join("&");break e}}}return e=e.i.splice(0,n),t.D=e,r}function bc(e){e.g||e.u||(e.Z=1,po(e.Ia,e),e.A=0)}function Ic(e){return!(e.g||e.u||3<=e.A)&&(e.Z++,e.u=Uo(ts(e.Ia,e),kc(e,e.A)),e.A++,!0)}function Ec(e){null!=e.B&&(Gi.clearTimeout(e.B),e.B=null)}function Tc(e){e.g=new Wo(e,e.j,"rpc",e.Z),null===e.o&&(e.g.H=e.s),e.g.N=0;var t=fa(e.sa);ya(t,"RID","rpc"),ya(t,"SID",e.I),ya(t,"CI",e.L?"0":"1"),ya(t,"AID",e.T),ya(t,"TYPE","xmlhttp"),vc(e,t),e.o&&e.s&&lc(t,e.o,e.s),e.J&&e.g.setTimeout(e.J);var n=e.g;e=e.ka,n.K=1,n.v=va(fa(t)),n.s=null,n.P=!0,ea(n,e)}function _c(e){null!=e.v&&(Gi.clearTimeout(e.v),e.v=null)}function Sc(e,t){var n=null;if(e.g==t){_c(e),Ec(e),e.g=null;var r=2}else{if(!Ua(e.h,t))return;n=t.D,ja(e.h,t),r=1}if(0!=e.G)if(e.pa=t.Y,t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;so(r=Do(),new xo(r,n,t,i)),mc(e)}else bc(e);else if(3==(i=t.o)||0==i&&0<e.pa||!(1==r&&function(e,t){return!(xa(e.h)>=e.h.j-(e.m?1:0)||(e.m?(e.i=t.D.concat(e.i),0):1==e.G||2==e.G||e.C>=(e.Za?0:e.$a)||(e.m=Uo(ts(e.Ja,e,t),kc(e,e.C)),e.C++,0)))}(e,t)||2==r&&Ic(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),i){case 1:Cc(e,5);break;case 4:Cc(e,10);break;case 3:Cc(e,6);break;default:Cc(e,2)}}function kc(e,t){let n=e.Xa+Math.floor(Math.random()*e.bb);return e.l||(n*=2),n*t}function Cc(e,t){if(e.j.info("Error code "+t),2==t){var n=null;e.l&&(n=null);var r=ts(e.kb,e);n||(n=new da("//www.google.com/images/cleardot.gif"),Gi.location&&"http"==Gi.location.protocol||pa(n,"https"),va(n)),function(e,t){const n=new Co;if(Gi.Image){const r=new Image;r.onload=ns($a,n,r,"TestLoadImage: loaded",!0,t),r.onerror=ns($a,n,r,"TestLoadImage: error",!1,t),r.onabort=ns($a,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=ns($a,n,r,"TestLoadImage: timeout",!1,t),Gi.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else Mo(2);e.G=0,e.l&&e.l.va(t),Ac(e),gc(e)}function Ac(e){if(e.G=0,e.la=[],e.l){const t=Va(e.h);0==t.length&&0==e.i.length||(cs(e.la,t),cs(e.la,e.i),e.h.i.length=0,as(e.i),e.i.length=0),e.l.ua()}}function Oc(e,t,n){var r=n instanceof da?fa(n):new da(n,void 0);if(""!=r.g)t&&(r.g=t+"."+r.g),ga(r,r.m);else{var i=Gi.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var s=new da(null,void 0);r&&pa(s,r),t&&(s.g=t),i&&ga(s,i),n&&(s.l=n),r=s}return n=e.D,t=e.za,n&&t&&ya(r,n,t),ya(r,"VER",e.ma),vc(e,r),r}function Nc(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Da&&!e.ra?new Ya(new za({jb:!0})):new Ya(e.ra)).Ka(e.H),t}function Dc(){}function Rc(){if(ws&&!(10<=Number(Rs)))throw Error("Environmental error: no available transport.")}function Pc(e,t){io.call(this),this.g=new dc(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.S=e,(e=t&&t.Yb)&&!hs(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!hs(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new xc(this)}function Lc(e){zo.call(this);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Mc(){Ko.call(this),this.status=1}function xc(e){this.g=e}(Hi=Ya.prototype).Ka=function(e){this.L=e},Hi.da=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Ho.g(),this.C=this.u?Bo(this.u):Bo(Ho),this.g.onreadystatechange=ts(this.Ha,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(e){return void nc(this,e)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find((e=>"content-type"==e.toLowerCase())),i=Gi.FormData&&e instanceof Gi.FormData,!(0<=os(tc,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[e,t]of n)this.g.setRequestHeader(e,t);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{oc(this),0<this.B&&((this.K=function(e){return ws&&Ns()&&"number"==typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=ts(this.qa,this)):this.A=bo(this.qa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(e){nc(this,e)}},Hi.qa=function(){void 0!==Ki&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,so(this,"timeout"),this.abort(8))},Hi.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,so(this,"complete"),so(this,"abort"),sc(this))},Hi.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),sc(this,!0)),Ya.X.M.call(this)},Hi.Ha=function(){this.s||(this.F||this.v||this.l?ic(this):this.fb())},Hi.fb=function(){ic(this)},Hi.aa=function(){try{return 2<ac(this)?this.g.status:-1}catch(e){return-1}},Hi.fa=function(){try{return this.g?this.g.responseText:""}catch(e){return""}},Hi.Sa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),Ja(t)}},Hi.Ea=function(){return this.m},Hi.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(Hi=dc.prototype).ma=8,Hi.G=1,Hi.Ja=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;const i=new Wo(this,this.j,e,void 0);let s=this.s;if(this.S&&(s?(s=Vs(s),qs(s,this.S)):s=this.S),null!==this.o||this.N||(i.H=s,s=null),this.O)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=wc(this,i,t),ya(n=fa(this.F),"RID",e),ya(n,"CVER",22),this.D&&ya(n,"X-HTTP-Session-Id",this.D),vc(this,n),s&&(this.N?t="headers="+encodeURIComponent(String(uc(s)))+"&"+t:this.o&&lc(n,this.o,s)),Fa(this.h,i),this.Ya&&ya(n,"TYPE","init"),this.O?(ya(n,"$req",t),ya(n,"SID","null"),i.Z=!0,Zo(i,n,null)):Zo(i,n,t),this.G=2}}else 3==this.G&&(e?yc(this,e):0==this.i.length||Ma(this.h)||yc(this))},Hi.Ia=function(){if(this.u=null,Tc(this),this.$&&!(this.K||null==this.g||0>=this.P)){var e=2*this.P;this.j.info("BP detection timer enabled: "+e),this.B=Uo(ts(this.eb,this),e)}},Hi.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,Mo(10),pc(this),Tc(this))},Hi.cb=function(){null!=this.v&&(this.v=null,pc(this),Ic(this),Mo(19))},Hi.kb=function(e){e?(this.j.info("Successfully pinged google.com"),Mo(2)):(this.j.info("Failed to ping google.com"),Mo(1))},(Hi=Dc.prototype).xa=function(){},Hi.wa=function(){},Hi.va=function(){},Hi.ua=function(){},Hi.Ra=function(){},Rc.prototype.g=function(e,t){return new Pc(e,t)},rs(Pc,io),Pc.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;Mo(0),e.V=t,e.ia=n||{},e.L=e.Y,e.F=Oc(e,null,e.V),mc(e)},Pc.prototype.close=function(){fc(this.g)},Pc.prototype.u=function(e){var t=this.g;if("string"==typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=ao(e),e=n);t.i.push(new class{constructor(e,t){this.h=e,this.g=t}}(t.ab++,e)),3==t.G&&mc(t)},Pc.prototype.M=function(){this.g.l=null,delete this.j,fc(this.g),delete this.g,Pc.X.M.call(this)},rs(Lc,zo),rs(Mc,Ko),rs(xc,Dc),xc.prototype.xa=function(){so(this.g,"a")},xc.prototype.wa=function(e){so(this.g,new Lc(e))},xc.prototype.va=function(e){so(this.g,new Mc(e))},xc.prototype.ua=function(){so(this.g,"b")},Rc.prototype.createWebChannel=Rc.prototype.g,Pc.prototype.send=Pc.prototype.u,Pc.prototype.open=Pc.prototype.m,Pc.prototype.close=Pc.prototype.close,Fo.NO_ERROR=0,Fo.TIMEOUT=8,Fo.HTTP_ERROR=6,jo.COMPLETE="complete",qo.EventType=$o,$o.OPEN="a",$o.CLOSE="b",$o.ERROR="c",$o.MESSAGE="d",io.prototype.listen=io.prototype.N,Ya.prototype.listenOnce=Ya.prototype.O,Ya.prototype.getLastError=Ya.prototype.Oa,Ya.prototype.getLastErrorCode=Ya.prototype.Ea,Ya.prototype.getStatus=Ya.prototype.aa,Ya.prototype.getResponseJson=Ya.prototype.Sa,Ya.prototype.getResponseText=Ya.prototype.fa,Ya.prototype.send=Ya.prototype.da,Ya.prototype.setWithCredentials=Ya.prototype.Ka;var Uc=zi.createWebChannelTransport=function(){return new Rc},Fc=zi.getStatEventTarget=function(){return Do()},jc=zi.ErrorCode=Fo,Vc=zi.EventType=jo,Bc=zi.Event=Oo,qc=zi.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},Hc=zi.FetchXmlHttpFactory=za,$c=zi.WebChannel=qo,zc=zi.XhrIo=Ya;n(155);const Kc="@firebase/firestore";class Gc{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Gc.UNAUTHENTICATED=new Gc(null),Gc.GOOGLE_CREDENTIALS=new Gc("google-credentials-uid"),Gc.FIRST_PARTY=new Gc("first-party-uid"),Gc.MOCK_USER=new Gc("mock-user");let Wc="9.12.0";const Qc=new j("@firebase/firestore");function Xc(){return Qc.logLevel}function Jc(e,...t){if(Qc.logLevel<=L.DEBUG){const n=t.map(eu);Qc.debug(`Firestore (${Wc}): ${e}`,...n)}}function Yc(e,...t){if(Qc.logLevel<=L.ERROR){const n=t.map(eu);Qc.error(`Firestore (${Wc}): ${e}`,...n)}}function Zc(e,...t){if(Qc.logLevel<=L.WARN){const n=t.map(eu);Qc.warn(`Firestore (${Wc}): ${e}`,...n)}}function eu(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function tu(e="Unexpected state"){const t=`FIRESTORE (${Wc}) INTERNAL ASSERTION FAILED: `+e;throw Yc(t),new Error(t)}function nu(e,t){e||tu()}function ru(e,t){return e}const iu={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class su extends y{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class ou{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class au{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class cu{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Gc.UNAUTHENTICATED)))}shutdown(){}}class uu{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class lu{constructor(e){this.t=e,this.currentUser=Gc.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new ou;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new ou,e.enqueueRetryable((()=>r(this.currentUser)))};const s=()=>{const t=i;e.enqueueRetryable((async()=>{await t.promise,await r(this.currentUser)}))},o=e=>{Jc("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit((e=>o(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?o(e):(Jc("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new ou)}}),0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(Jc("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(nu("string"==typeof t.accessToken),new au(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return nu(null===e||"string"==typeof e),new Gc(e)}}class hu{constructor(e,t,n,r){this.h=e,this.l=t,this.m=n,this.g=r,this.type="FirstParty",this.user=Gc.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(nu(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class du{constructor(e,t,n,r){this.h=e,this.l=t,this.m=n,this.g=r}getToken(){return Promise.resolve(new hu(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable((()=>t(Gc.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class fu{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class pu{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const n=e=>{null!=e.error&&Jc("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);const n=e.token!==this.A;return this.A=e.token,Jc("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};const r=e=>{Jc("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.appCheck.addTokenListener(this.o)};this.T.onInit((e=>r(e))),setTimeout((()=>{if(!this.appCheck){const e=this.T.getImmediate({optional:!0});e?r(e):Jc("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(nu("string"==typeof e.token),this.A=e.token,new fu(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function gu(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let t=0;t<e;t++)n[t]=Math.floor(256*Math.random());return n}class mu{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let n="";for(;n.length<20;){const r=gu(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length))}return n}}function yu(e,t){return e<t?-1:e>t?1:0}function vu(e,t,n){return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))}class wu{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new su(iu.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new su(iu.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new su(iu.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new su(iu.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return wu.fromMillis(Date.now())}static fromDate(e){return wu.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new wu(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?yu(this.nanoseconds,e.nanoseconds):yu(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class bu{constructor(e){this.timestamp=e}static fromTimestamp(e){return new bu(e)}static min(){return new bu(new wu(0,0))}static max(){return new bu(new wu(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Iu{constructor(e,t,n){void 0===t?t=0:t>e.length&&tu(),void 0===n?n=e.length-t:n>e.length-t&&tu(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===Iu.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Iu?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),i=t.get(r);if(n<i)return-1;if(n>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Eu extends Iu{construct(e,t,n){return new Eu(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const n of e){if(n.indexOf("//")>=0)throw new su(iu.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter((e=>e.length>0)))}return new Eu(t)}static emptyPath(){return new Eu([])}}const Tu=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class _u extends Iu{construct(e,t,n){return new _u(e,t,n)}static isValidIdentifier(e){return Tu.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),_u.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new _u(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new su(iu.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new su(iu.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new su(iu.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new su(iu.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new _u(t)}static emptyPath(){return new _u([])}}class Su{constructor(e){this.path=e}static fromPath(e){return new Su(Eu.fromString(e))}static fromName(e){return new Su(Eu.fromString(e).popFirst(5))}static empty(){return new Su(Eu.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Eu.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Eu.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Su(new Eu(e.slice()))}}class ku{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}ku.UNKNOWN_ID=-1;function Cu(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=bu.fromTimestamp(1e9===r?new wu(n+1,0):new wu(n,r));return new Ou(i,Su.empty(),t)}function Au(e){return new Ou(e.readTime,e.key,-1)}class Ou{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new Ou(bu.min(),Su.empty(),-1)}static max(){return new Ou(bu.max(),Su.empty(),-1)}}function Nu(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=Su.comparator(e.documentKey,t.documentKey),0!==n?n:yu(e.largestBatchId,t.largestBatchId))}const Du="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Ru{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Pu(e){if(e.code!==iu.FAILED_PRECONDITION||e.message!==Du)throw e;Jc("LocalStore","Unexpectedly lost primary lease")}class Lu{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&tu(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Lu(((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof Lu?t:Lu.resolve(t)}catch(e){return Lu.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):Lu.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):Lu.reject(t)}static resolve(e){return new Lu(((t,n)=>{t(e)}))}static reject(e){return new Lu(((t,n)=>{n(e)}))}static waitFor(e){return new Lu(((t,n)=>{let r=0,i=0,s=!1;e.forEach((e=>{++r,e.next((()=>{++i,s&&i===r&&t()}),(e=>n(e)))})),s=!0,i===r&&t()}))}static or(e){let t=Lu.resolve(!1);for(const n of e)t=t.next((e=>e?Lu.resolve(e):n()));return t}static forEach(e,t){const n=[];return e.forEach(((e,r)=>{n.push(t.call(this,e,r))})),this.waitFor(n)}static mapArray(e,t){return new Lu(((n,r)=>{const i=e.length,s=new Array(i);let o=0;for(let a=0;a<i;a++){const c=a;t(e[c]).next((e=>{s[c]=e,++o,o===i&&n(s)}),(e=>r(e)))}}))}static doWhile(e,t){return new Lu(((n,r)=>{const i=()=>{!0===e()?t().next((()=>{i()}),r):n()};i()}))}}function Mu(e){return"IndexedDbTransactionError"===e.name}class xu{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ut(e),this.ct=e=>t.writeSequenceNumber(e))}ut(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ct&&this.ct(e),e}}function Uu(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Fu(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function ju(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}xu.at=-1;class Vu{constructor(e,t){this.comparator=e,this.root=t||qu.EMPTY}insert(e,t){return new Vu(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,qu.BLACK,null,null))}remove(e){return new Vu(this.comparator,this.root.remove(e,this.comparator).copy(null,null,qu.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push(`${t}:${n}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Bu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Bu(this.root,e,this.comparator,!1)}getReverseIterator(){return new Bu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Bu(this.root,e,this.comparator,!0)}}class Bu{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class qu{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:qu.RED,this.left=null!=r?r:qu.EMPTY,this.right=null!=i?i:qu.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new qu(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return qu.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return qu.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,qu.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,qu.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw tu();if(this.right.isRed())throw tu();const e=this.left.check();if(e!==this.right.check())throw tu();return e+(this.isRed()?0:1)}}qu.EMPTY=null,qu.RED=!0,qu.BLACK=!1,qu.EMPTY=new class{constructor(){this.size=0}get key(){throw tu()}get value(){throw tu()}get color(){throw tu()}get left(){throw tu()}get right(){throw tu()}copy(e,t,n,r,i){return this}insert(e,t,n){return new qu(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Hu{constructor(e){this.comparator=e,this.data=new Vu(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new $u(this.data.getIterator())}getIteratorFrom(e){return new $u(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof Hu))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Hu(this.comparator);return t.data=e,t}}class $u{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class zu{constructor(e){this.fields=e,e.sort(_u.comparator)}static empty(){return new zu([])}unionWith(e){let t=new Hu(_u.comparator);for(const e of this.fields)t=t.add(e);for(const n of e)t=t.add(n);return new zu(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return vu(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}class Ku{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Ku(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new Ku(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return yu(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ku.EMPTY_BYTE_STRING=new Ku("");const Gu=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Wu(e){if(nu(!!e),"string"==typeof e){let t=0;const n=Gu.exec(e);if(nu(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Qu(e.seconds),nanos:Qu(e.nanos)}}function Qu(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Xu(e){return"string"==typeof e?Ku.fromBase64String(e):Ku.fromUint8Array(e)}function Ju(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Yu(e){const t=e.mapValue.fields.__previous_value__;return Ju(t)?Yu(t):t}function Zu(e){const t=Wu(e.mapValue.fields.__local_write_time__.timestampValue);return new wu(t.seconds,t.nanos)}class el{constructor(e,t,n,r,i,s,o,a){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.useFetchStreams=a}}class tl{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new tl("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof tl&&e.projectId===this.projectId&&e.database===this.database}}function nl(e){return null==e}function rl(e){return 0===e&&1/e==-1/0}function il(e){return"number"==typeof e&&Number.isInteger(e)&&!rl(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}const sl={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function ol(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Ju(e)?4:wl(e)?9007199254740991:10:tu()}function al(e,t){if(e===t)return!0;const n=ol(e);if(n!==ol(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Zu(e).isEqual(Zu(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=Wu(e.timestampValue),r=Wu(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Xu(e.bytesValue).isEqual(Xu(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Qu(e.geoPointValue.latitude)===Qu(t.geoPointValue.latitude)&&Qu(e.geoPointValue.longitude)===Qu(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Qu(e.integerValue)===Qu(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=Qu(e.doubleValue),r=Qu(t.doubleValue);return n===r?rl(n)===rl(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return vu(e.arrayValue.values||[],t.arrayValue.values||[],al);case 10:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Uu(n)!==Uu(r))return!1;for(const e in n)if(n.hasOwnProperty(e)&&(void 0===r[e]||!al(n[e],r[e])))return!1;return!0}(e,t);default:return tu()}}function cl(e,t){return void 0!==(e.values||[]).find((e=>al(e,t)))}function ul(e,t){if(e===t)return 0;const n=ol(e),r=ol(t);if(n!==r)return yu(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return yu(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=Qu(e.integerValue||e.doubleValue),r=Qu(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return ll(e.timestampValue,t.timestampValue);case 4:return ll(Zu(e),Zu(t));case 5:return yu(e.stringValue,t.stringValue);case 6:return function(e,t){const n=Xu(e),r=Xu(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let e=0;e<n.length&&e<r.length;e++){const t=yu(n[e],r[e]);if(0!==t)return t}return yu(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=yu(Qu(e.latitude),Qu(t.latitude));return 0!==n?n:yu(Qu(e.longitude),Qu(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){const n=e.values||[],r=t.values||[];for(let e=0;e<n.length&&e<r.length;++e){const t=ul(n[e],r[e]);if(t)return t}return yu(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===sl.mapValue&&t===sl.mapValue)return 0;if(e===sl.mapValue)return 1;if(t===sl.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let e=0;e<r.length&&e<s.length;++e){const t=yu(r[e],s[e]);if(0!==t)return t;const o=ul(n[r[e]],i[s[e]]);if(0!==o)return o}return yu(r.length,s.length)}(e.mapValue,t.mapValue);default:throw tu()}}function ll(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return yu(e,t);const n=Wu(e),r=Wu(t),i=yu(n.seconds,r.seconds);return 0!==i?i:yu(n.nanos,r.nanos)}function hl(e){return dl(e)}function dl(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=Wu(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?Xu(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,Su.fromName(n).toString()):"geoPointValue"in e?`geo(${(t=e.geoPointValue).latitude},${t.longitude})`:"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=dl(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+=`${i}:${dl(e.fields[i])}`;return n+"}"}(e.mapValue):tu();var t,n}function fl(e){return!!e&&"integerValue"in e}function pl(e){return!!e&&"arrayValue"in e}function gl(e){return!!e&&"nullValue"in e}function ml(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function yl(e){return!!e&&"mapValue"in e}function vl(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Fu(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=vl(n))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=vl(e.arrayValue.values[n]);return t}return Object.assign({},e)}function wl(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}class bl{constructor(e){this.value=e}static empty(){return new bl({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!yl(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=vl(t)}setAll(e){let t=_u.emptyPath(),n={},r=[];e.forEach(((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=vl(e):r.push(i.lastSegment())}));const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());yl(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return al(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];yl(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){Fu(t,((t,n)=>e[t]=n));for(const t of n)delete e[t]}clone(){return new bl(vl(this.value))}}function Il(e){const t=[];return Fu(e.fields,((e,n)=>{const r=new _u([e]);if(yl(n)){const e=Il(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)})),new zu(t)}class El{constructor(e,t,n,r,i,s){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.data=i,this.documentState=s}static newInvalidDocument(e){return new El(e,0,bu.min(),bu.min(),bl.empty(),0)}static newFoundDocument(e,t,n){return new El(e,1,t,bu.min(),n,0)}static newNoDocument(e,t){return new El(e,2,t,bu.min(),bl.empty(),0)}static newUnknownDocument(e,t){return new El(e,3,t,bu.min(),bl.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=bl.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=bl.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=bu.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof El&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new El(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Tl{constructor(e,t=null,n=[],r=[],i=null,s=null,o=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o,this.ht=null}}function _l(e,t=null,n=[],r=[],i=null,s=null,o=null){return new Tl(e,t,n,r,i,s,o)}function Sl(e){const t=ru(e);if(null===t.ht){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>{return(t=e).field.canonicalString()+t.op.toString()+hl(t.value);var t})).join(","),e+="|ob:",e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(","),nl(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((e=>hl(e))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((e=>hl(e))).join(",")),t.ht=e}return t.ht}function kl(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!jl(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let i=0;i<e.filters.length;i++)if(n=e.filters[i],r=t.filters[i],n.op!==r.op||!n.field.isEqual(r.field)||!al(n.value,r.value))return!1;var n,r;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Bl(e.startAt,t.startAt)&&Bl(e.endAt,t.endAt)}function Cl(e){return Su.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class Al extends class{}{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.lt(e,t,n):new Ol(e,t,n):"array-contains"===t?new Pl(e,n):"in"===t?new Ll(e,n):"not-in"===t?new Ml(e,n):"array-contains-any"===t?new xl(e,n):new Al(e,t,n)}static lt(e,t,n){return"in"===t?new Nl(e,n):new Dl(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.ft(ul(t,this.value)):null!==t&&ol(this.value)===ol(t)&&this.ft(ul(t,this.value))}ft(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return tu()}}dt(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class Ol extends Al{constructor(e,t,n){super(e,t,n),this.key=Su.fromName(n.referenceValue)}matches(e){const t=Su.comparator(e.key,this.key);return this.ft(t)}}class Nl extends Al{constructor(e,t){super(e,"in",t),this.keys=Rl("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class Dl extends Al{constructor(e,t){super(e,"not-in",t),this.keys=Rl("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Rl(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((e=>Su.fromName(e.referenceValue)))}class Pl extends Al{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return pl(t)&&cl(t.arrayValue,this.value)}}class Ll extends Al{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&cl(this.value.arrayValue,t)}}class Ml extends Al{constructor(e,t){super(e,"not-in",t)}matches(e){if(cl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!cl(this.value.arrayValue,t)}}class xl extends Al{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!pl(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>cl(this.value.arrayValue,e)))}}class Ul{constructor(e,t){this.position=e,this.inclusive=t}}class Fl{constructor(e,t="asc"){this.field=e,this.dir=t}}function jl(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function Vl(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(r=s.field.isKeyField()?Su.comparator(Su.fromName(o.referenceValue),n.key):ul(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function Bl(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!al(e.position[n],t.position[n]))return!1;return!0}class ql{constructor(e,t=null,n=[],r=[],i=null,s="F",o=null,a=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this._t=null,this.wt=null,this.startAt,this.endAt}}function Hl(e,t,n,r,i,s,o,a){return new ql(e,t,n,r,i,s,o,a)}function $l(e){return new ql(e)}function zl(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Kl(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function Gl(e){for(const t of e.filters)if(t.dt())return t.field;return null}function Wl(e){return null!==e.collectionGroup}function Ql(e){const t=ru(e);if(null===t._t){t._t=[];const e=Gl(t),n=Kl(t);if(null!==e&&null===n)e.isKeyField()||t._t.push(new Fl(e)),t._t.push(new Fl(_u.keyField(),"asc"));else{let e=!1;for(const n of t.explicitOrderBy)t._t.push(n),n.field.isKeyField()&&(e=!0);if(!e){const e=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t._t.push(new Fl(_u.keyField(),e))}}}return t._t}function Xl(e){const t=ru(e);if(!t.wt)if("F"===t.limitType)t.wt=_l(t.path,t.collectionGroup,Ql(t),t.filters,t.limit,t.startAt,t.endAt);else{const e=[];for(const n of Ql(t)){const t="desc"===n.dir?"asc":"desc";e.push(new Fl(n.field,t))}const n=t.endAt?new Ul(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Ul(t.startAt.position,t.startAt.inclusive):null;t.wt=_l(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}return t.wt}function Jl(e,t,n){return new ql(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Yl(e,t){return kl(Xl(e),Xl(t))&&e.limitType===t.limitType}function Zl(e){return`${Sl(Xl(e))}|lt:${e.limitType}`}function eh(e){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map((e=>{return`${(t=e).field.canonicalString()} ${t.op} ${hl(t.value)}`;var t})).join(", ")}]`),nl(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map((e=>function(e){return`${e.field.canonicalString()} (${e.dir})`}(e))).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((e=>hl(e))).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((e=>hl(e))).join(",")),`Target(${t})`}(Xl(e))}; limitType=${e.limitType})`}function th(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Su.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of e.explicitOrderBy)if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=Vl(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Ql(e),t))&&!(e.endAt&&!function(e,t,n){const r=Vl(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Ql(e),t))}(e,t)}function nh(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function rh(e){return(t,n)=>{let r=!1;for(const i of Ql(e)){const e=ih(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function ih(e,t,n){const r=e.field.isKeyField()?Su.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?ul(r,i):tu()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return tu()}}function sh(e,t){if(e.gt){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:rl(t)?"-0":t}}function oh(e){return{integerValue:""+e}}function ah(e,t){return il(t)?oh(t):sh(e,t)}class ch{constructor(){this._=void 0}}function uh(e,t,n){return e instanceof dh?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof fh?ph(e,t):e instanceof gh?mh(e,t):function(e,t){const n=hh(e,t),r=vh(n)+vh(e.yt);return fl(n)&&fl(e.yt)?oh(r):sh(e.It,r)}(e,t)}function lh(e,t,n){return e instanceof fh?ph(e,t):e instanceof gh?mh(e,t):n}function hh(e,t){return e instanceof yh?fl(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}class dh extends ch{}class fh extends ch{constructor(e){super(),this.elements=e}}function ph(e,t){const n=wh(t);for(const t of e.elements)n.some((e=>al(e,t)))||n.push(t);return{arrayValue:{values:n}}}class gh extends ch{constructor(e){super(),this.elements=e}}function mh(e,t){let n=wh(t);for(const t of e.elements)n=n.filter((e=>!al(e,t)));return{arrayValue:{values:n}}}class yh extends ch{constructor(e,t){super(),this.It=e,this.yt=t}}function vh(e){return Qu(e.integerValue||e.doubleValue)}function wh(e){return pl(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class bh{constructor(e,t){this.field=e,this.transform=t}}class Ih{constructor(e,t){this.version=e,this.transformResults=t}}class Eh{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Eh}static exists(e){return new Eh(void 0,e)}static updateTime(e){return new Eh(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Th(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class _h{}function Sh(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Mh(e.key,Eh.none()):new Nh(e.key,e.data,Eh.none());{const n=e.data,r=bl.empty();let i=new Hu(_u.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new Dh(e.key,r,new zu(i.toArray()),Eh.none())}}function kh(e,t,n){e instanceof Nh?function(e,t,n){const r=e.value.clone(),i=Ph(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Dh?function(e,t,n){if(!Th(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=Ph(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Rh(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Ch(e,t,n,r){return e instanceof Nh?function(e,t,n,r){if(!Th(e.precondition,t))return n;const i=e.value.clone(),s=Lh(e.fieldTransforms,r,t);return i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof Dh?function(e,t,n,r){if(!Th(e.precondition,t))return n;const i=Lh(e.fieldTransforms,r,t),s=t.data;return s.setAll(Rh(e)),s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,r):function(e,t,n){return Th(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Ah(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=hh(r.transform,e||null);null!=i&&(null===n&&(n=bl.empty()),n.set(r.field,i))}return n||null}function Oh(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&vu(e,t,((e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof fh&&t instanceof fh||e instanceof gh&&t instanceof gh?vu(e.elements,t.elements,al):e instanceof yh&&t instanceof yh?al(e.yt,t.yt):e instanceof dh&&t instanceof dh}(e.transform,t.transform)}(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Nh extends _h{constructor(e,t,n,r=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Dh extends _h{constructor(e,t,n,r,i=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Rh(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}})),t}function Ph(e,t,n){const r=new Map;nu(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,lh(o,a,n[i]))}return r}function Lh(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,uh(e,s,t))}return r}class Mh extends _h{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class xh extends _h{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Uh{constructor(e){this.count=e}}var Fh,jh;function Vh(e){switch(e){default:return tu();case iu.CANCELLED:case iu.UNKNOWN:case iu.DEADLINE_EXCEEDED:case iu.RESOURCE_EXHAUSTED:case iu.INTERNAL:case iu.UNAVAILABLE:case iu.UNAUTHENTICATED:return!1;case iu.INVALID_ARGUMENT:case iu.NOT_FOUND:case iu.ALREADY_EXISTS:case iu.PERMISSION_DENIED:case iu.FAILED_PRECONDITION:case iu.ABORTED:case iu.OUT_OF_RANGE:case iu.UNIMPLEMENTED:case iu.DATA_LOSS:return!0}}function Bh(e){if(void 0===e)return Yc("GRPC error has no .code"),iu.UNKNOWN;switch(e){case Fh.OK:return iu.OK;case Fh.CANCELLED:return iu.CANCELLED;case Fh.UNKNOWN:return iu.UNKNOWN;case Fh.DEADLINE_EXCEEDED:return iu.DEADLINE_EXCEEDED;case Fh.RESOURCE_EXHAUSTED:return iu.RESOURCE_EXHAUSTED;case Fh.INTERNAL:return iu.INTERNAL;case Fh.UNAVAILABLE:return iu.UNAVAILABLE;case Fh.UNAUTHENTICATED:return iu.UNAUTHENTICATED;case Fh.INVALID_ARGUMENT:return iu.INVALID_ARGUMENT;case Fh.NOT_FOUND:return iu.NOT_FOUND;case Fh.ALREADY_EXISTS:return iu.ALREADY_EXISTS;case Fh.PERMISSION_DENIED:return iu.PERMISSION_DENIED;case Fh.FAILED_PRECONDITION:return iu.FAILED_PRECONDITION;case Fh.ABORTED:return iu.ABORTED;case Fh.OUT_OF_RANGE:return iu.OUT_OF_RANGE;case Fh.UNIMPLEMENTED:return iu.UNIMPLEMENTED;case Fh.DATA_LOSS:return iu.DATA_LOSS;default:return tu()}}(jh=Fh||(Fh={}))[jh.OK=0]="OK",jh[jh.CANCELLED=1]="CANCELLED",jh[jh.UNKNOWN=2]="UNKNOWN",jh[jh.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",jh[jh.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",jh[jh.NOT_FOUND=5]="NOT_FOUND",jh[jh.ALREADY_EXISTS=6]="ALREADY_EXISTS",jh[jh.PERMISSION_DENIED=7]="PERMISSION_DENIED",jh[jh.UNAUTHENTICATED=16]="UNAUTHENTICATED",jh[jh.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",jh[jh.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",jh[jh.ABORTED=10]="ABORTED",jh[jh.OUT_OF_RANGE=11]="OUT_OF_RANGE",jh[jh.UNIMPLEMENTED=12]="UNIMPLEMENTED",jh[jh.INTERNAL=13]="INTERNAL",jh[jh.UNAVAILABLE=14]="UNAVAILABLE",jh[jh.DATA_LOSS=15]="DATA_LOSS";class qh{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[t,r]of n)if(this.equalsFn(t,e))return r}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let n=0;n<r.length;n++)if(this.equalsFn(r[n][0],e))return void(r[n]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Fu(this.inner,((t,n)=>{for(const[t,r]of n)e(t,r)}))}isEmpty(){return ju(this.inner)}size(){return this.innerSize}}const Hh=new Vu(Su.comparator);function $h(){return Hh}const zh=new Vu(Su.comparator);function Kh(...e){let t=zh;for(const n of e)t=t.insert(n.key,n);return t}function Gh(e){let t=zh;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function Wh(){return Xh()}function Qh(){return Xh()}function Xh(){return new qh((e=>e.toString()),((e,t)=>e.isEqual(t)))}const Jh=new Vu(Su.comparator),Yh=new Hu(Su.comparator);function Zh(...e){let t=Yh;for(const n of e)t=t.add(n);return t}const ed=new Hu(yu);function td(){return ed}class nd{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,rd.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new nd(bu.min(),r,td(),$h(),Zh())}}class rd{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new rd(n,t,Zh(),Zh(),Zh())}}class id{constructor(e,t,n,r){this.Tt=e,this.removedTargetIds=t,this.key=n,this.Et=r}}class sd{constructor(e,t){this.targetId=e,this.At=t}}class od{constructor(e,t,n=Ku.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class ad{constructor(){this.Rt=0,this.bt=ld(),this.Pt=Ku.EMPTY_BYTE_STRING,this.vt=!1,this.Vt=!0}get current(){return this.vt}get resumeToken(){return this.Pt}get St(){return 0!==this.Rt}get Dt(){return this.Vt}Ct(e){e.approximateByteSize()>0&&(this.Vt=!0,this.Pt=e)}xt(){let e=Zh(),t=Zh(),n=Zh();return this.bt.forEach(((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:tu()}})),new rd(this.Pt,this.vt,e,t,n)}Nt(){this.Vt=!1,this.bt=ld()}kt(e,t){this.Vt=!0,this.bt=this.bt.insert(e,t)}Ot(e){this.Vt=!0,this.bt=this.bt.remove(e)}Mt(){this.Rt+=1}Ft(){this.Rt-=1}$t(){this.Vt=!0,this.vt=!0}}class cd{constructor(e){this.Bt=e,this.Lt=new Map,this.Ut=$h(),this.qt=ud(),this.Kt=new Hu(yu)}Gt(e){for(const t of e.Tt)e.Et&&e.Et.isFoundDocument()?this.Qt(t,e.Et):this.jt(t,e.key,e.Et);for(const t of e.removedTargetIds)this.jt(t,e.key,e.Et)}Wt(e){this.forEachTarget(e,(t=>{const n=this.zt(t);switch(e.state){case 0:this.Ht(t)&&n.Ct(e.resumeToken);break;case 1:n.Ft(),n.St||n.Nt(),n.Ct(e.resumeToken);break;case 2:n.Ft(),n.St||this.removeTarget(t);break;case 3:this.Ht(t)&&(n.$t(),n.Ct(e.resumeToken));break;case 4:this.Ht(t)&&(this.Jt(t),n.Ct(e.resumeToken));break;default:tu()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Lt.forEach(((e,n)=>{this.Ht(n)&&t(n)}))}Yt(e){const t=e.targetId,n=e.At.count,r=this.Xt(t);if(r){const e=r.target;if(Cl(e))if(0===n){const n=new Su(e.path);this.jt(t,n,El.newNoDocument(n,bu.min()))}else nu(1===n);else this.Zt(t)!==n&&(this.Jt(t),this.Kt=this.Kt.add(t))}}te(e){const t=new Map;this.Lt.forEach(((n,r)=>{const i=this.Xt(r);if(i){if(n.current&&Cl(i.target)){const t=new Su(i.target.path);null!==this.Ut.get(t)||this.ee(r,t)||this.jt(r,t,El.newNoDocument(t,e))}n.Dt&&(t.set(r,n.xt()),n.Nt())}}));let n=Zh();this.qt.forEach(((e,t)=>{let r=!0;t.forEachWhile((e=>{const t=this.Xt(e);return!t||2===t.purpose||(r=!1,!1)})),r&&(n=n.add(e))})),this.Ut.forEach(((t,n)=>n.setReadTime(e)));const r=new nd(e,t,this.Kt,this.Ut,n);return this.Ut=$h(),this.qt=ud(),this.Kt=new Hu(yu),r}Qt(e,t){if(!this.Ht(e))return;const n=this.ee(e,t.key)?2:0;this.zt(e).kt(t.key,n),this.Ut=this.Ut.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ne(t.key).add(e))}jt(e,t,n){if(!this.Ht(e))return;const r=this.zt(e);this.ee(e,t)?r.kt(t,1):r.Ot(t),this.qt=this.qt.insert(t,this.ne(t).delete(e)),n&&(this.Ut=this.Ut.insert(t,n))}removeTarget(e){this.Lt.delete(e)}Zt(e){const t=this.zt(e).xt();return this.Bt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Mt(e){this.zt(e).Mt()}zt(e){let t=this.Lt.get(e);return t||(t=new ad,this.Lt.set(e,t)),t}ne(e){let t=this.qt.get(e);return t||(t=new Hu(yu),this.qt=this.qt.insert(e,t)),t}Ht(e){const t=null!==this.Xt(e);return t||Jc("WatchChangeAggregator","Detected inactive target",e),t}Xt(e){const t=this.Lt.get(e);return t&&t.St?null:this.Bt.se(e)}Jt(e){this.Lt.set(e,new ad),this.Bt.getRemoteKeysForTarget(e).forEach((t=>{this.jt(e,t,null)}))}ee(e,t){return this.Bt.getRemoteKeysForTarget(e).has(t)}}function ud(){return new Vu(Su.comparator)}function ld(){return new Vu(Su.comparator)}const hd={asc:"ASCENDING",desc:"DESCENDING"},dd={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class fd{constructor(e,t){this.databaseId=e,this.gt=t}}function pd(e,t){return e.gt?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function gd(e,t){return e.gt?t.toBase64():t.toUint8Array()}function md(e,t){return pd(e,t.toTimestamp())}function yd(e){return nu(!!e),bu.fromTimestamp(function(e){const t=Wu(e);return new wu(t.seconds,t.nanos)}(e))}function vd(e,t){return function(e){return new Eu(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function wd(e){const t=Eu.fromString(e);return nu(jd(t)),t}function bd(e,t){return vd(e.databaseId,t.path)}function Id(e,t){const n=wd(t);if(n.get(1)!==e.databaseId.projectId)throw new su(iu.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new su(iu.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Su(Sd(n))}function Ed(e,t){return vd(e.databaseId,t)}function Td(e){const t=wd(e);return 4===t.length?Eu.emptyPath():Sd(t)}function _d(e){return new Eu(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Sd(e){return nu(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function kd(e,t,n){return{name:bd(e,t),fields:n.value.mapValue.fields}}function Cd(e,t){let n;if(t instanceof Nh)n={update:kd(e,t.key,t.value)};else if(t instanceof Mh)n={delete:bd(e,t.key)};else if(t instanceof Dh)n={update:kd(e,t.key,t.data),updateMask:Fd(t.fieldMask)};else{if(!(t instanceof xh))return tu();n={verify:bd(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){const n=t.transform;if(n instanceof dh)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof fh)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof gh)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof yh)return{fieldPath:t.field.canonicalString(),increment:n.yt};throw tu()}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:md(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:tu()}(e,t.precondition)),n}function Ad(e,t){return{documents:[Ed(e,t.path)]}}function Od(e,t){const n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=Ed(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=Ed(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(e){if(0===e.length)return;const t=e.map((e=>function(e){if("=="===e.op){if(ml(e.value))return{unaryFilter:{field:Ld(e.field),op:"IS_NAN"}};if(gl(e.value))return{unaryFilter:{field:Ld(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(ml(e.value))return{unaryFilter:{field:Ld(e.field),op:"IS_NOT_NAN"}};if(gl(e.value))return{unaryFilter:{field:Ld(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ld(e.field),op:Pd(e.op),value:e.value}}}(e)));return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}(t.filters);i&&(n.structuredQuery.where=i);const s=function(e){if(0!==e.length)return e.map((e=>function(e){return{field:Ld(e.field),direction:Rd(e.dir)}}(e)))}(t.orderBy);s&&(n.structuredQuery.orderBy=s);const o=function(e,t){return e.gt||nl(t)?t:{value:t}}(e,t.limit);var a;return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt={before:(a=t.startAt).inclusive,values:a.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function Nd(e){let t=Td(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){nu(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=Dd(n.where));let o=[];n.orderBy&&(o=n.orderBy.map((e=>function(e){return new Fl(Md(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e))));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,nl(t)?null:t}(n.limit));let c=null;n.startAt&&(c=function(e){const t=!!e.before,n=e.values||[];return new Ul(n,t)}(n.startAt));let u=null;return n.endAt&&(u=function(e){const t=!e.before,n=e.values||[];return new Ul(n,t)}(n.endAt)),Hl(t,i,o,s,a,"F",c,u)}function Dd(e){return e?void 0!==e.unaryFilter?[Ud(e)]:void 0!==e.fieldFilter?[xd(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((e=>Dd(e))).reduce(((e,t)=>e.concat(t))):tu():[]}function Rd(e){return hd[e]}function Pd(e){return dd[e]}function Ld(e){return{fieldPath:e.canonicalString()}}function Md(e){return _u.fromServerFormat(e.fieldPath)}function xd(e){return Al.create(Md(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return tu()}}(e.fieldFilter.op),e.fieldFilter.value)}function Ud(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Md(e.unaryFilter.field);return Al.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=Md(e.unaryFilter.field);return Al.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Md(e.unaryFilter.field);return Al.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Md(e.unaryFilter.field);return Al.create(i,"!=",{nullValue:"NULL_VALUE"});default:return tu()}}function Fd(e){const t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function jd(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}const Vd=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Bd=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],qd=Bd;class Hd{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let t=0;t<this.mutations.length;t++){const r=this.mutations[t];r.key.isEqual(e.key)&&kh(r,e,n[t])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Ch(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Ch(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=Qh();return this.mutations.forEach((r=>{const i=e.get(r.key),s=i.overlayedDocument;let o=this.applyToLocalView(s,i.mutatedFields);o=t.has(r.key)?null:o;const a=Sh(s,o);null!==a&&n.set(r.key,a),s.isValidDocument()||s.convertToNoDocument(bu.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Zh())}isEqual(e){return this.batchId===e.batchId&&vu(this.mutations,e.mutations,((e,t)=>Oh(e,t)))&&vu(this.baseMutations,e.baseMutations,((e,t)=>Oh(e,t)))}}class $d{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){nu(e.mutations.length===n.length);let r=Jh;const i=e.mutations;for(let e=0;e<i.length;e++)r=r.insert(i[e].key,n[e].version);return new $d(e,t,n,r)}}class zd{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Kd{constructor(e,t,n,r,i=bu.min(),s=bu.min(),o=Ku.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o}withSequenceNumber(e){return new Kd(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Kd(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Kd(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class Gd{constructor(e){this.re=e}}function Wd(e){const t=Nd({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Jl(t,t.limit,"L"):t}class Qd{constructor(){}ce(e,t){this.ae(e,t),t.he()}ae(e,t){if("nullValue"in e)this.le(t,5);else if("booleanValue"in e)this.le(t,10),t.fe(e.booleanValue?1:0);else if("integerValue"in e)this.le(t,15),t.fe(Qu(e.integerValue));else if("doubleValue"in e){const n=Qu(e.doubleValue);isNaN(n)?this.le(t,13):(this.le(t,15),rl(n)?t.fe(0):t.fe(n))}else if("timestampValue"in e){const n=e.timestampValue;this.le(t,20),"string"==typeof n?t.de(n):(t.de(`${n.seconds||""}`),t.fe(n.nanos||0))}else if("stringValue"in e)this._e(e.stringValue,t),this.we(t);else if("bytesValue"in e)this.le(t,30),t.me(Xu(e.bytesValue)),this.we(t);else if("referenceValue"in e)this.ge(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.le(t,45),t.fe(n.latitude||0),t.fe(n.longitude||0)}else"mapValue"in e?wl(e)?this.le(t,Number.MAX_SAFE_INTEGER):(this.ye(e.mapValue,t),this.we(t)):"arrayValue"in e?(this.pe(e.arrayValue,t),this.we(t)):tu()}_e(e,t){this.le(t,25),this.Ie(e,t)}Ie(e,t){t.de(e)}ye(e,t){const n=e.fields||{};this.le(t,55);for(const e of Object.keys(n))this._e(e,t),this.ae(n[e],t)}pe(e,t){const n=e.values||[];this.le(t,50);for(const e of n)this.ae(e,t)}ge(e,t){this.le(t,37),Su.fromName(e).path.forEach((e=>{this.le(t,60),this.Ie(e,t)}))}le(e,t){e.fe(t)}we(e){e.fe(2)}}Qd.Te=new Qd;class Xd{constructor(){this.Ye=new Jd}addToCollectionParentIndex(e,t){return this.Ye.add(t),Lu.resolve()}getCollectionParents(e,t){return Lu.resolve(this.Ye.getEntries(t))}addFieldIndex(e,t){return Lu.resolve()}deleteFieldIndex(e,t){return Lu.resolve()}getDocumentsMatchingTarget(e,t){return Lu.resolve(null)}getIndexType(e,t){return Lu.resolve(0)}getFieldIndexes(e,t){return Lu.resolve([])}getNextCollectionGroupToUpdate(e){return Lu.resolve(null)}getMinOffset(e,t){return Lu.resolve(Ou.min())}getMinOffsetFromCollectionGroup(e,t){return Lu.resolve(Ou.min())}updateCollectionGroup(e,t,n){return Lu.resolve()}updateIndexEntries(e,t){return Lu.resolve()}}class Jd{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Hu(Eu.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new Hu(Eu.comparator)).toArray()}}new Uint8Array(0);class Yd{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new Yd(e,Yd.DEFAULT_COLLECTION_PERCENTILE,Yd.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}Yd.DEFAULT_COLLECTION_PERCENTILE=10,Yd.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Yd.DEFAULT=new Yd(41943040,Yd.DEFAULT_COLLECTION_PERCENTILE,Yd.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Yd.DISABLED=new Yd(-1,0,0);class Zd{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new Zd(0)}static vn(){return new Zd(-1)}}class ef{constructor(){this.changes=new qh((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,El.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?Lu.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class tf{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class nf{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(n=r,this.getBaseDocument(e,t,n)))).next((e=>(null!==n&&Ch(n.mutation,e,zu.empty(),wu.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,Zh()).next((()=>t))))}getLocalViewOfDocuments(e,t,n=Zh()){const r=Wh();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,n).next((e=>{let t=Kh();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){const n=Wh();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,Zh())))}populateOverlays(e,t,n){const r=[];return n.forEach((e=>{t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,r){let i=$h();const s=Xh(),o=Xh();return t.forEach(((e,t)=>{const o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof Dh)?i=i.insert(t.key,t):void 0!==o&&(s.set(t.key,o.mutation.getFieldMask()),Ch(o.mutation,t,o.mutation.getFieldMask(),wu.now()))})),this.recalculateAndSaveOverlays(e,i).next((e=>(e.forEach(((e,t)=>s.set(e,t))),t.forEach(((e,t)=>{var n;return o.set(e,new tf(t,null!==(n=s.get(e))&&void 0!==n?n:null))})),o)))}recalculateAndSaveOverlays(e,t){const n=Xh();let r=new Vu(((e,t)=>e-t)),i=Zh();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(const i of e)i.keys().forEach((e=>{const s=t.get(e);if(null===s)return;let o=n.get(e)||zu.empty();o=i.applyToLocalView(s,o),n.set(e,o);const a=(r.get(i.batchId)||Zh()).add(e);r=r.insert(i.batchId,a)}))})).next((()=>{const s=[],o=r.getReverseIterator();for(;o.hasNext();){const r=o.getNext(),a=r.key,c=r.value,u=Qh();c.forEach((e=>{if(!i.has(e)){const r=Sh(t.get(e),n.get(e));null!==r&&u.set(e,r),i=i.add(e)}})),s.push(this.documentOverlayCache.saveOverlays(e,a,u))}return Lu.waitFor(s)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n){return function(e){return Su.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Wl(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((i=>{const s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):Lu.resolve(Wh());let o=-1,a=i;return s.next((t=>Lu.forEach(t,((t,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),i.get(t)?Lu.resolve():this.getBaseDocument(e,t,n).next((e=>{a=a.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,i))).next((()=>this.computeViews(e,a,t,Zh()))).next((e=>({batchId:o,changes:Gh(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Su(t)).next((e=>{let t=Kh();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n){const r=t.collectionGroup;let i=Kh();return this.indexManager.getCollectionParents(e,r).next((s=>Lu.forEach(s,(s=>{const o=function(e,t){return new ql(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,s.child(r));return this.getDocumentsMatchingCollectionQuery(e,o,n).next((e=>{e.forEach(((e,t)=>{i=i.insert(e,t)}))}))})).next((()=>i))))}getDocumentsMatchingCollectionQuery(e,t,n){let r;return this.remoteDocumentCache.getAllFromCollection(e,t.path,n).next((i=>(r=i,this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId)))).next((e=>{e.forEach(((e,t)=>{const n=t.getKey();null===r.get(n)&&(r=r.insert(n,El.newInvalidDocument(n)))}));let n=Kh();return r.forEach(((r,i)=>{const s=e.get(r);void 0!==s&&Ch(s.mutation,i,zu.empty(),wu.now()),th(t,i)&&(n=n.insert(r,i))})),n}))}getBaseDocument(e,t,n){return null===n||1===n.mutation.type?this.remoteDocumentCache.getEntry(e,t):Lu.resolve(El.newInvalidDocument(t))}}class rf{constructor(e){this.It=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return Lu.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var n;return this.Zn.set(t.id,{id:(n=t).id,version:n.version,createTime:yd(n.createTime)}),Lu.resolve()}getNamedQuery(e,t){return Lu.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,function(e){return{name:e.name,query:Wd(e.bundledQuery),readTime:yd(e.readTime)}}(t)),Lu.resolve()}}class sf{constructor(){this.overlays=new Vu(Su.comparator),this.es=new Map}getOverlay(e,t){return Lu.resolve(this.overlays.get(t))}getOverlays(e,t){const n=Wh();return Lu.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,r)=>{this.ue(e,t,r)})),Lu.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.es.get(n);return void 0!==r&&(r.forEach((e=>this.overlays=this.overlays.remove(e))),this.es.delete(n)),Lu.resolve()}getOverlaysForCollection(e,t,n){const r=Wh(),i=t.length+1,s=new Su(t.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const e=o.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return Lu.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new Vu(((e,t)=>e-t));const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=Wh(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const o=Wh(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach(((e,t)=>o.set(e,t))),!(o.size()>=r)););return Lu.resolve(o)}ue(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.es.get(r.largestBatchId).delete(n.key);this.es.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new zd(t,n));let i=this.es.get(t);void 0===i&&(i=Zh(),this.es.set(t,i)),this.es.set(t,i.add(n.key))}}class of{constructor(){this.ns=new Hu(af.ss),this.rs=new Hu(af.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const n=new af(e,t);this.ns=this.ns.add(n),this.rs=this.rs.add(n)}us(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.cs(new af(e,t))}hs(e,t){e.forEach((e=>this.removeReference(e,t)))}ls(e){const t=new Su(new Eu([])),n=new af(t,e),r=new af(t,e+1),i=[];return this.rs.forEachInRange([n,r],(e=>{this.cs(e),i.push(e.key)})),i}fs(){this.ns.forEach((e=>this.cs(e)))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new Su(new Eu([])),n=new af(t,e),r=new af(t,e+1);let i=Zh();return this.rs.forEachInRange([n,r],(e=>{i=i.add(e.key)})),i}containsKey(e){const t=new af(e,0),n=this.ns.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class af{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return Su.comparator(e.key,t.key)||yu(e._s,t._s)}static os(e,t){return yu(e._s,t._s)||Su.comparator(e.key,t.key)}}class cf{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new Hu(af.ss)}checkEmpty(e){return Lu.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.ws;this.ws++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new Hd(i,t,n,r);this.mutationQueue.push(s);for(const t of r)this.gs=this.gs.add(new af(t.key,i)),this.indexManager.addToCollectionParentIndex(e,t.key.path.popLast());return Lu.resolve(s)}lookupMutationBatch(e,t){return Lu.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.ps(n),i=r<0?0:r;return Lu.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return Lu.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return Lu.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new af(t,0),r=new af(t,Number.POSITIVE_INFINITY),i=[];return this.gs.forEachInRange([n,r],(e=>{const t=this.ys(e._s);i.push(t)})),Lu.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Hu(yu);return t.forEach((e=>{const t=new af(e,0),r=new af(e,Number.POSITIVE_INFINITY);this.gs.forEachInRange([t,r],(e=>{n=n.add(e._s)}))})),Lu.resolve(this.Is(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;Su.isDocumentKey(i)||(i=i.child(""));const s=new af(new Su(i),0);let o=new Hu(yu);return this.gs.forEachWhile((e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e._s)),!0)}),s),Lu.resolve(this.Is(o))}Is(e){const t=[];return e.forEach((e=>{const n=this.ys(e);null!==n&&t.push(n)})),t}removeMutationBatch(e,t){nu(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();let n=this.gs;return Lu.forEach(t.mutations,(r=>{const i=new af(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.gs=n}))}An(e){}containsKey(e,t){const n=new af(t,0),r=this.gs.firstAfterOrEqual(n);return Lu.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,Lu.resolve()}Ts(e,t){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class uf{constructor(e){this.Es=e,this.docs=new Vu(Su.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,s=this.Es(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return Lu.resolve(n?n.document.mutableCopy():El.newInvalidDocument(t))}getEntries(e,t){let n=$h();return t.forEach((e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():El.newInvalidDocument(e))})),Lu.resolve(n)}getAllFromCollection(e,t,n){let r=$h();const i=new Su(t.child("")),s=this.docs.getIteratorFrom(i);for(;s.hasNext();){const{key:e,value:{document:i}}=s.getNext();if(!t.isPrefixOf(e.path))break;e.path.length>t.length+1||Nu(Au(i),n)<=0||(r=r.insert(i.key,i.mutableCopy()))}return Lu.resolve(r)}getAllFromCollectionGroup(e,t,n,r){tu()}As(e,t){return Lu.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new lf(this)}getSize(e){return Lu.resolve(this.size)}}class lf extends ef{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?t.push(this.Yn.addEntry(e,r)):this.Yn.removeEntry(n)})),Lu.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}class hf{constructor(e){this.persistence=e,this.Rs=new qh((e=>Sl(e)),kl),this.lastRemoteSnapshotVersion=bu.min(),this.highestTargetId=0,this.bs=0,this.Ps=new of,this.targetCount=0,this.vs=Zd.Pn()}forEachTarget(e,t){return this.Rs.forEach(((e,n)=>t(n))),Lu.resolve()}getLastRemoteSnapshotVersion(e){return Lu.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Lu.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),Lu.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.bs&&(this.bs=t),Lu.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new Zd(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,Lu.resolve()}updateTargetData(e,t){return this.Dn(t),Lu.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,Lu.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.Rs.forEach(((s,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.Rs.delete(s),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)})),Lu.waitFor(i).next((()=>r))}getTargetCount(e){return Lu.resolve(this.targetCount)}getTargetData(e,t){const n=this.Rs.get(t)||null;return Lu.resolve(n)}addMatchingKeys(e,t,n){return this.Ps.us(t,n),Lu.resolve()}removeMatchingKeys(e,t,n){this.Ps.hs(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((t=>{i.push(r.markPotentiallyOrphaned(e,t))})),Lu.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),Lu.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Ps.ds(t);return Lu.resolve(n)}containsKey(e,t){return Lu.resolve(this.Ps.containsKey(t))}}class df{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new xu(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new hf(this),this.indexManager=new Xd,this.remoteDocumentCache=function(e){return new uf(e)}((e=>this.referenceDelegate.xs(e))),this.It=new Gd(t),this.Ns=new rf(this.It)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new sf,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.Vs[e.toKey()];return n||(n=new cf(t,this.referenceDelegate),this.Vs[e.toKey()]=n),n}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,n){Jc("MemoryPersistence","Starting transaction:",e);const r=new ff(this.Ss.next());return this.referenceDelegate.ks(),n(r).next((e=>this.referenceDelegate.Os(r).next((()=>e)))).toPromise().then((e=>(r.raiseOnCommittedEvent(),e)))}Ms(e,t){return Lu.or(Object.values(this.Vs).map((n=>()=>n.containsKey(e,t))))}}class ff extends Ru{constructor(e){super(),this.currentSequenceNumber=e}}class pf{constructor(e){this.persistence=e,this.Fs=new of,this.$s=null}static Bs(e){return new pf(e)}get Ls(){if(this.$s)return this.$s;throw tu()}addReference(e,t,n){return this.Fs.addReference(n,t),this.Ls.delete(n.toString()),Lu.resolve()}removeReference(e,t,n){return this.Fs.removeReference(n,t),this.Ls.add(n.toString()),Lu.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),Lu.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach((e=>this.Ls.add(e.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.Ls.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}ks(){this.$s=new Set}Os(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Lu.forEach(this.Ls,(n=>{const r=Su.fromPath(n);return this.Us(e,r).next((e=>{e||t.removeEntry(r,bu.min())}))})).next((()=>(this.$s=null,t.apply(e))))}updateLimboDocument(e,t){return this.Us(e,t).next((e=>{e?this.Ls.delete(t.toString()):this.Ls.add(t.toString())}))}xs(e){return 0}Us(e,t){return Lu.or([()=>Lu.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ms(e,t)])}}class gf{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Si=n,this.Di=r}static Ci(e,t){let n=Zh(),r=Zh();for(const e of t.docChanges)switch(e.type){case 0:n=n.add(e.doc.key);break;case 1:r=r.add(e.doc.key)}return new gf(e,t.fromCache,n,r)}}class mf{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,n,r){return this.ki(e,t).next((i=>i||this.Oi(e,t,r,n))).next((n=>n||this.Mi(e,t)))}ki(e,t){if(zl(t))return Lu.resolve(null);let n=Xl(t);return this.indexManager.getIndexType(e,n).next((r=>0===r?null:(null!==t.limit&&1===r&&(t=Jl(t,null,"F"),n=Xl(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((r=>{const i=Zh(...r);return this.Ni.getDocuments(e,i).next((r=>this.indexManager.getMinOffset(e,n).next((n=>{const s=this.Fi(t,r);return this.$i(t,s,i,n.readTime)?this.ki(e,Jl(t,null,"F")):this.Bi(e,s,t,n)}))))})))))}Oi(e,t,n,r){return zl(t)||r.isEqual(bu.min())?this.Mi(e,t):this.Ni.getDocuments(e,n).next((i=>{const s=this.Fi(t,i);return this.$i(t,s,n,r)?this.Mi(e,t):(Xc()<=L.DEBUG&&Jc("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),eh(t)),this.Bi(e,s,t,Cu(r,-1)))}))}Fi(e,t){let n=new Hu(rh(e));return t.forEach(((t,r)=>{th(e,r)&&(n=n.add(r))})),n}$i(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Mi(e,t){return Xc()<=L.DEBUG&&Jc("QueryEngine","Using full collection scan to execute query:",eh(t)),this.Ni.getDocumentsMatchingQuery(e,t,Ou.min())}Bi(e,t,n,r){return this.Ni.getDocumentsMatchingQuery(e,n,r).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}}class yf{constructor(e,t,n,r){this.persistence=e,this.Li=t,this.It=r,this.Ui=new Vu(yu),this.qi=new qh((e=>Sl(e)),kl),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(n)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new nf(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ui)))}}function vf(e,t,n,r){return new yf(e,t,n,r)}async function wf(e,t){const n=ru(e);return await n.persistence.runTransaction("Handle user change","readonly",(e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next((i=>(r=i,n.Qi(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{const i=[],s=[];let o=Zh();for(const e of r){i.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return n.localDocuments.getDocuments(e,o).next((e=>({ji:e,removedBatchIds:i,addedBatchIds:s})))}))}))}function bf(e){const t=ru(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.Cs.getLastRemoteSnapshotVersion(e)))}function If(e,t,n){let r=Zh(),i=Zh();return n.forEach((e=>r=r.add(e))),t.getEntries(e,r).next((e=>{let r=$h();return n.forEach(((n,s)=>{const o=e.get(n);s.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),s.isNoDocument()&&s.version.isEqual(bu.min())?(t.removeEntry(n,s.readTime),r=r.insert(n,s)):!o.isValidDocument()||s.version.compareTo(o.version)>0||0===s.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(s),r=r.insert(n,s)):Jc("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",s.version)})),{Wi:r,zi:i}}))}function Ef(e,t){const n=ru(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t))))}function Tf(e,t){const n=ru(e);return n.persistence.runTransaction("Allocate target","readwrite",(e=>{let r;return n.Cs.getTargetData(e,t).next((i=>i?(r=i,Lu.resolve(r)):n.Cs.allocateTargetId(e).next((i=>(r=new Kd(t,i,0,e.currentSequenceNumber),n.Cs.addTargetData(e,r).next((()=>r)))))))})).then((e=>{const r=n.Ui.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ui=n.Ui.insert(e.targetId,e),n.qi.set(t,e.targetId)),e}))}async function _f(e,t,n){const r=ru(e),i=r.Ui.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,(e=>r.persistence.referenceDelegate.removeTarget(e,i)))}catch(e){if(!Mu(e))throw e;Jc("LocalStore",`Failed to update sequence numbers for target ${t}: ${e}`)}r.Ui=r.Ui.remove(t),r.qi.delete(i.target)}function Sf(e,t,n){const r=ru(e);let i=bu.min(),s=Zh();return r.persistence.runTransaction("Execute query","readonly",(e=>function(e,t,n){const r=ru(e),i=r.qi.get(n);return void 0!==i?Lu.resolve(r.Ui.get(i)):r.Cs.getTargetData(t,n)}(r,e,Xl(t)).next((t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Cs.getMatchingKeysForTargetId(e,t.targetId).next((e=>{s=e}))})).next((()=>r.Li.getDocumentsMatchingQuery(e,t,n?i:bu.min(),n?s:Zh()))).next((e=>(kf(r,nh(t),e),{documents:e,Hi:s})))))}function kf(e,t,n){let r=e.Ki.get(t)||bu.min();n.forEach(((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Ki.set(t,r)}class Cf{constructor(){this.activeTargetIds=td()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Af{constructor(){this.Lr=new Cf,this.Ur={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return this.Lr.er(e),this.Ur[e]||"not-current"}updateQueryState(e,t,n){this.Ur[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.Ur[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new Cf,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Of{qr(e){}shutdown(){}}class Nf{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}qr(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){Jc("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){Jc("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const Df={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Rf{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class Pf extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http";this.oo=t+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(e,t,n,r,i){const s=this.ho(e,t);Jc("RestConnection","Sending: ",s,n);const o={};return this.lo(o,r,i),this.fo(e,s,o,n).then((e=>(Jc("RestConnection","Received: ",e),e)),(t=>{throw Zc("RestConnection",`${e} failed with error: `,t,"url: ",s,"request:",n),t}))}_o(e,t,n,r,i,s){return this.ao(e,t,n,r,i)}lo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Wc,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}ho(e,t){const n=Df[e];return`${this.oo}/v1/${t}:${n}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,n,r){return new Promise(((i,s)=>{const o=new zc;o.setWithCredentials(!0),o.listenOnce(Vc.COMPLETE,(()=>{try{switch(o.getLastErrorCode()){case jc.NO_ERROR:const t=o.getResponseJson();Jc("Connection","XHR received:",JSON.stringify(t)),i(t);break;case jc.TIMEOUT:Jc("Connection",'RPC "'+e+'" timed out'),s(new su(iu.DEADLINE_EXCEEDED,"Request time out"));break;case jc.HTTP_ERROR:const n=o.getStatus();if(Jc("Connection",'RPC "'+e+'" failed with status:',n,"response text:",o.getResponseText()),n>0){const e=o.getResponseJson().error;if(e&&e.status&&e.message){const t=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(iu).indexOf(t)>=0?t:iu.UNKNOWN}(e.status);s(new su(t,e.message))}else s(new su(iu.UNKNOWN,"Server responded with status "+o.getStatus()))}else s(new su(iu.UNAVAILABLE,"Connection failed."));break;default:tu()}}finally{Jc("Connection",'RPC "'+e+'" completed.')}}));const a=JSON.stringify(r);o.send(t,"POST",a,n,15)}))}wo(e,t,n){const r=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=Uc(),s=Fc(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new Hc({})),this.lo(o.initMessageHeaders,t,n),o.encodeInitMessageHeaders=!0;const a=r.join("");Jc("Connection","Creating WebChannel: "+a,o);const c=i.createWebChannel(a,o);let u=!1,l=!1;const h=new Rf({Hr:e=>{l?Jc("Connection","Not sending because WebChannel is closed:",e):(u||(Jc("Connection","Opening WebChannel transport."),c.open(),u=!0),Jc("Connection","WebChannel sending:",e),c.send(e))},Jr:()=>c.close()}),d=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return d(c,$c.EventType.OPEN,(()=>{l||Jc("Connection","WebChannel transport opened.")})),d(c,$c.EventType.CLOSE,(()=>{l||(l=!0,Jc("Connection","WebChannel transport closed"),h.io())})),d(c,$c.EventType.ERROR,(e=>{l||(l=!0,Zc("Connection","WebChannel transport errored:",e),h.io(new su(iu.UNAVAILABLE,"The operation could not be completed")))})),d(c,$c.EventType.MESSAGE,(e=>{var t;if(!l){const n=e.data[0];nu(!!n);const r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){Jc("Connection","WebChannel received error:",i);const e=i.status;let t=function(e){const t=Fh[e];if(void 0!==t)return Bh(t)}(e),n=i.message;void 0===t&&(t=iu.INTERNAL,n="Unknown error status: "+e+" with message "+i.message),l=!0,h.io(new su(t,n)),c.close()}else Jc("Connection","WebChannel received:",n),h.ro(n)}})),d(s,Bc.STAT_EVENT,(e=>{e.stat===qc.PROXY?Jc("Connection","Detected buffering proxy"):e.stat===qc.NOPROXY&&Jc("Connection","Detected no buffering proxy")})),setTimeout((()=>{h.so()}),0),h}}function Lf(){return"undefined"!=typeof document?document:null}function Mf(e){return new fd(e,!0)}class xf{constructor(e,t,n=1e3,r=1.5,i=6e4){this.Hs=e,this.timerId=t,this.mo=n,this.yo=r,this.po=i,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),n=Math.max(0,Date.now()-this.Eo),r=Math.max(0,t-n);r>0&&Jc("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,r,(()=>(this.Eo=Date.now(),e()))),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class Uf{constructor(e,t,n,r,i,s,o,a){this.Hs=e,this.vo=n,this.Vo=r,this.So=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.Do=0,this.Co=null,this.xo=null,this.stream=null,this.No=new xf(e,t)}ko(){return 1===this.state||5===this.state||this.Oo()}Oo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Mo()}async stop(){this.ko()&&await this.close(0)}Fo(){this.state=0,this.No.reset()}$o(){this.Oo()&&null===this.Co&&(this.Co=this.Hs.enqueueAfterDelay(this.vo,6e4,(()=>this.Bo())))}Lo(e){this.Uo(),this.stream.send(e)}async Bo(){if(this.Oo())return this.close(0)}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}qo(){this.xo&&(this.xo.cancel(),this.xo=null)}async close(e,t){this.Uo(),this.qo(),this.No.cancel(),this.Do++,4!==e?this.No.reset():t&&t.code===iu.RESOURCE_EXHAUSTED?(Yc(t.toString()),Yc("Using maximum backoff delay to prevent overloading the backend."),this.No.Ao()):t&&t.code===iu.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Ko(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Zr(t)}Ko(){}auth(){this.state=1;const e=this.Go(this.Do),t=this.Do;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([e,n])=>{this.Do===t&&this.Qo(e,n)}),(t=>{e((()=>{const e=new su(iu.UNKNOWN,"Fetching auth token failed: "+t.message);return this.jo(e)}))}))}Qo(e,t){const n=this.Go(this.Do);this.stream=this.Wo(e,t),this.stream.Yr((()=>{n((()=>(this.state=2,this.xo=this.Hs.enqueueAfterDelay(this.Vo,1e4,(()=>(this.Oo()&&(this.state=3),Promise.resolve()))),this.listener.Yr())))})),this.stream.Zr((e=>{n((()=>this.jo(e)))})),this.stream.onMessage((e=>{n((()=>this.onMessage(e)))}))}Mo(){this.state=5,this.No.Ro((async()=>{this.state=0,this.start()}))}jo(e){return Jc("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Go(e){return t=>{this.Hs.enqueueAndForget((()=>this.Do===e?t():(Jc("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Ff extends Uf{constructor(e,t,n,r,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,s),this.It=i}Wo(e,t){return this.So.wo("Listen",e,t)}onMessage(e){this.No.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:tu()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(e,t){return e.gt?(nu(void 0===t||"string"==typeof t),Ku.fromBase64String(t||"")):(nu(void 0===t||t instanceof Uint8Array),Ku.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(e){const t=void 0===e.code?iu.UNKNOWN:Bh(e.code);return new su(t,e.message||"")}(o);n=new od(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=Id(e,r.document.name),s=yd(r.document.updateTime),o=new bl({mapValue:{fields:r.document.fields}}),a=El.newFoundDocument(i,s,o),c=r.targetIds||[],u=r.removedTargetIds||[];n=new id(c,u,a.key,a)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=Id(e,r.document),s=r.readTime?yd(r.readTime):bu.min(),o=El.newNoDocument(i,s),a=r.removedTargetIds||[];n=new id([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=Id(e,r.document),s=r.removedTargetIds||[];n=new id([],s,i,null)}else{if(!("filter"in t))return tu();{t.filter;const e=t.filter;e.targetId;const r=e.count||0,i=new Uh(r),s=e.targetId;n=new sd(s,i)}}return n}(this.It,e),n=function(e){if(!("targetChange"in e))return bu.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?bu.min():t.readTime?yd(t.readTime):bu.min()}(e);return this.listener.zo(t,n)}Ho(e){const t={};t.database=_d(this.It),t.addTarget=function(e,t){let n;const r=t.target;return n=Cl(r)?{documents:Ad(e,r)}:{query:Od(e,r)},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=gd(e,t.resumeToken):t.snapshotVersion.compareTo(bu.min())>0&&(n.readTime=pd(e,t.snapshotVersion.toTimestamp())),n}(this.It,e);const n=function(e,t){const n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return tu()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.It,e);n&&(t.labels=n),this.Lo(t)}Jo(e){const t={};t.database=_d(this.It),t.removeTarget=e,this.Lo(t)}}class jf extends Uf{constructor(e,t,n,r,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,s),this.It=i,this.Yo=!1}get Xo(){return this.Yo}start(){this.Yo=!1,this.lastStreamToken=void 0,super.start()}Ko(){this.Yo&&this.Zo([])}Wo(e,t){return this.So.wo("Write",e,t)}onMessage(e){if(nu(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Yo){this.No.reset();const t=function(e,t){return e&&e.length>0?(nu(void 0!==t),e.map((e=>function(e,t){let n=e.updateTime?yd(e.updateTime):yd(t);return n.isEqual(bu.min())&&(n=yd(t)),new Ih(n,e.transformResults||[])}(e,t)))):[]}(e.writeResults,e.commitTime),n=yd(e.commitTime);return this.listener.tu(n,t)}return nu(!e.writeResults||0===e.writeResults.length),this.Yo=!0,this.listener.eu()}nu(){const e={};e.database=_d(this.It),this.Lo(e)}Zo(e){const t={streamToken:this.lastStreamToken,writes:e.map((e=>Cd(this.It,e)))};this.Lo(t)}}class Vf extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.So=n,this.It=r,this.su=!1}iu(){if(this.su)throw new su(iu.FAILED_PRECONDITION,"The client has already been terminated.")}ao(e,t,n){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([r,i])=>this.So.ao(e,t,n,r,i))).catch((e=>{throw"FirebaseError"===e.name?(e.code===iu.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new su(iu.UNKNOWN,e.toString())}))}_o(e,t,n,r){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([i,s])=>this.So._o(e,t,n,i,s,r))).catch((e=>{throw"FirebaseError"===e.name?(e.code===iu.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new su(iu.UNKNOWN,e.toString())}))}terminate(){this.su=!0}}class Bf{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.ru=0,this.ou=null,this.uu=!0}cu(){0===this.ru&&(this.au("Unknown"),this.ou=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.ou=null,this.hu("Backend didn't respond within 10 seconds."),this.au("Offline"),Promise.resolve()))))}lu(e){"Online"===this.state?this.au("Unknown"):(this.ru++,this.ru>=1&&(this.fu(),this.hu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.au("Offline")))}set(e){this.fu(),this.ru=0,"Online"===e&&(this.uu=!1),this.au(e)}au(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}hu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.uu?(Yc(t),this.uu=!1):Jc("OnlineStateTracker",t)}fu(){null!==this.ou&&(this.ou.cancel(),this.ou=null)}}class qf{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.du=[],this._u=new Map,this.wu=new Set,this.mu=[],this.gu=i,this.gu.qr((e=>{n.enqueueAndForget((async()=>{Jf(this)&&(Jc("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=ru(e);t.wu.add(4),await $f(t),t.yu.set("Unknown"),t.wu.delete(4),await Hf(t)}(this))}))})),this.yu=new Bf(n,r)}}async function Hf(e){if(Jf(e))for(const t of e.mu)await t(!0)}async function $f(e){for(const t of e.mu)await t(!1)}function zf(e,t){const n=ru(e);n._u.has(t.targetId)||(n._u.set(t.targetId,t),Xf(n)?Qf(n):gp(n).Oo()&&Gf(n,t))}function Kf(e,t){const n=ru(e),r=gp(n);n._u.delete(t),r.Oo()&&Wf(n,t),0===n._u.size&&(r.Oo()?r.$o():Jf(n)&&n.yu.set("Unknown"))}function Gf(e,t){e.pu.Mt(t.targetId),gp(e).Ho(t)}function Wf(e,t){e.pu.Mt(t),gp(e).Jo(t)}function Qf(e){e.pu=new cd({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),se:t=>e._u.get(t)||null}),gp(e).start(),e.yu.cu()}function Xf(e){return Jf(e)&&!gp(e).ko()&&e._u.size>0}function Jf(e){return 0===ru(e).wu.size}function Yf(e){e.pu=void 0}async function Zf(e){e._u.forEach(((t,n)=>{Gf(e,t)}))}async function ep(e,t){Yf(e),Xf(e)?(e.yu.lu(t),Qf(e)):e.yu.set("Unknown")}async function tp(e,t,n){if(e.yu.set("Online"),t instanceof od&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e._u.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e._u.delete(r),e.pu.removeTarget(r))}(e,t)}catch(n){Jc("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await np(e,n)}else if(t instanceof id?e.pu.Gt(t):t instanceof sd?e.pu.Yt(t):e.pu.Wt(t),!n.isEqual(bu.min()))try{const t=await bf(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.pu.te(t);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e._u.get(r);i&&e._u.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((t=>{const n=e._u.get(t);if(!n)return;e._u.set(t,n.withResumeToken(Ku.EMPTY_BYTE_STRING,n.snapshotVersion)),Wf(e,t);const r=new Kd(n.target,t,1,n.sequenceNumber);Gf(e,r)})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){Jc("RemoteStore","Failed to raise snapshot:",t),await np(e,t)}}async function np(e,t,n){if(!Mu(t))throw t;e.wu.add(1),await $f(e),e.yu.set("Offline"),n||(n=()=>bf(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{Jc("RemoteStore","Retrying IndexedDB access"),await n(),e.wu.delete(1),await Hf(e)}))}function rp(e,t){return t().catch((n=>np(e,n,t)))}async function ip(e){const t=ru(e),n=mp(t);let r=t.du.length>0?t.du[t.du.length-1].batchId:-1;for(;sp(t);)try{const e=await Ef(t.localStore,r);if(null===e){0===t.du.length&&n.$o();break}r=e.batchId,op(t,e)}catch(e){await np(t,e)}ap(t)&&cp(t)}function sp(e){return Jf(e)&&e.du.length<10}function op(e,t){e.du.push(t);const n=mp(e);n.Oo()&&n.Xo&&n.Zo(t.mutations)}function ap(e){return Jf(e)&&!mp(e).ko()&&e.du.length>0}function cp(e){mp(e).start()}async function up(e){mp(e).nu()}async function lp(e){const t=mp(e);for(const n of e.du)t.Zo(n.mutations)}async function hp(e,t,n){const r=e.du.shift(),i=$d.from(r,t,n);await rp(e,(()=>e.remoteSyncer.applySuccessfulWrite(i))),await ip(e)}async function dp(e,t){t&&mp(e).Xo&&await async function(e,t){if(Vh(n=t.code)&&n!==iu.ABORTED){const n=e.du.shift();mp(e).Fo(),await rp(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await ip(e)}var n}(e,t),ap(e)&&cp(e)}async function fp(e,t){const n=ru(e);n.asyncQueue.verifyOperationInProgress(),Jc("RemoteStore","RemoteStore received new credentials");const r=Jf(n);n.wu.add(3),await $f(n),r&&n.yu.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.wu.delete(3),await Hf(n)}async function pp(e,t){const n=ru(e);t?(n.wu.delete(2),await Hf(n)):t||(n.wu.add(2),await $f(n),n.yu.set("Unknown"))}function gp(e){return e.Iu||(e.Iu=function(e,t,n){const r=ru(e);return r.iu(),new Ff(t,r.So,r.authCredentials,r.appCheckCredentials,r.It,n)}(e.datastore,e.asyncQueue,{Yr:Zf.bind(null,e),Zr:ep.bind(null,e),zo:tp.bind(null,e)}),e.mu.push((async t=>{t?(e.Iu.Fo(),Xf(e)?Qf(e):e.yu.set("Unknown")):(await e.Iu.stop(),Yf(e))}))),e.Iu}function mp(e){return e.Tu||(e.Tu=function(e,t,n){const r=ru(e);return r.iu(),new jf(t,r.So,r.authCredentials,r.appCheckCredentials,r.It,n)}(e.datastore,e.asyncQueue,{Yr:up.bind(null,e),Zr:dp.bind(null,e),eu:lp.bind(null,e),tu:hp.bind(null,e)}),e.mu.push((async t=>{t?(e.Tu.Fo(),await ip(e)):(await e.Tu.stop(),e.du.length>0&&(Jc("RemoteStore",`Stopping write stream with ${e.du.length} pending writes`),e.du=[]))}))),e.Tu}class yp{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new ou,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,o=new yp(e,t,s,r,i);return o.start(n),o}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new su(iu.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function vp(e,t){if(Yc("AsyncQueue",`${t}: ${e}`),Mu(e))return new su(iu.UNAVAILABLE,`${t}: ${e}`);throw e}class wp{constructor(e){this.comparator=e?(t,n)=>e(t,n)||Su.comparator(t.key,n.key):(e,t)=>Su.comparator(e.key,t.key),this.keyedMap=Kh(),this.sortedSet=new Vu(this.comparator)}static emptySet(e){return new wp(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof wp))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new wp;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class bp{constructor(){this.Eu=new Vu(Su.comparator)}track(e){const t=e.doc.key,n=this.Eu.get(t);n?0!==e.type&&3===n.type?this.Eu=this.Eu.insert(t,e):3===e.type&&1!==n.type?this.Eu=this.Eu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Eu=this.Eu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Eu=this.Eu.remove(t):1===e.type&&2===n.type?this.Eu=this.Eu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):tu():this.Eu=this.Eu.insert(t,e)}Au(){const e=[];return this.Eu.inorderTraversal(((t,n)=>{e.push(n)})),e}}class Ip{constructor(e,t,n,r,i,s,o,a,c){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=c}static fromInitialDocuments(e,t,n,r,i){const s=[];return t.forEach((e=>{s.push({type:0,doc:e})})),new Ip(e,t,wp.emptySet(t),s,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Yl(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let e=0;e<t.length;e++)if(t[e].type!==n[e].type||!t[e].doc.isEqual(n[e].doc))return!1;return!0}}class Ep{constructor(){this.Ru=void 0,this.listeners=[]}}class Tp{constructor(){this.queries=new qh((e=>Zl(e)),Yl),this.onlineState="Unknown",this.bu=new Set}}async function _p(e,t){const n=ru(e),r=t.query;let i=!1,s=n.queries.get(r);if(s||(i=!0,s=new Ep),i)try{s.Ru=await n.onListen(r)}catch(e){const n=vp(e,`Initialization of query '${eh(t.query)}' failed`);return void t.onError(n)}n.queries.set(r,s),s.listeners.push(t),t.Pu(n.onlineState),s.Ru&&t.vu(s.Ru)&&Ap(n)}async function Sp(e,t){const n=ru(e),r=t.query;let i=!1;const s=n.queries.get(r);if(s){const e=s.listeners.indexOf(t);e>=0&&(s.listeners.splice(e,1),i=0===s.listeners.length)}if(i)return n.queries.delete(r),n.onUnlisten(r)}function kp(e,t){const n=ru(e);let r=!1;for(const e of t){const t=e.query,i=n.queries.get(t);if(i){for(const t of i.listeners)t.vu(e)&&(r=!0);i.Ru=e}}r&&Ap(n)}function Cp(e,t,n){const r=ru(e),i=r.queries.get(t);if(i)for(const e of i.listeners)e.onError(n);r.queries.delete(t)}function Ap(e){e.bu.forEach((e=>{e.next()}))}class Op{constructor(e,t,n){this.query=e,this.Vu=t,this.Su=!1,this.Du=null,this.onlineState="Unknown",this.options=n||{}}vu(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new Ip(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Su?this.Cu(e)&&(this.Vu.next(e),t=!0):this.xu(e,this.onlineState)&&(this.Nu(e),t=!0),this.Du=e,t}onError(e){this.Vu.error(e)}Pu(e){this.onlineState=e;let t=!1;return this.Du&&!this.Su&&this.xu(this.Du,e)&&(this.Nu(this.Du),t=!0),t}xu(e,t){if(!e.fromCache)return!0;const n="Offline"!==t;return(!this.options.ku||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Cu(e){if(e.docChanges.length>0)return!0;const t=this.Du&&this.Du.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}Nu(e){e=Ip.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Su=!0,this.Vu.next(e)}}class Np{constructor(e){this.key=e}}class Dp{constructor(e){this.key=e}}class Rp{constructor(e,t){this.query=e,this.Uu=t,this.qu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=Zh(),this.mutatedKeys=Zh(),this.Gu=rh(e),this.Qu=new wp(this.Gu)}get ju(){return this.Uu}Wu(e,t){const n=t?t.zu:new bp,r=t?t.Qu:this.Qu;let i=t?t.mutatedKeys:this.mutatedKeys,s=r,o=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,c="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((e,t)=>{const u=r.get(e),l=th(this.query,t)?t:null,h=!!u&&this.mutatedKeys.has(u.key),d=!!l&&(l.hasLocalMutations||this.mutatedKeys.has(l.key)&&l.hasCommittedMutations);let f=!1;u&&l?u.data.isEqual(l.data)?h!==d&&(n.track({type:3,doc:l}),f=!0):this.Hu(u,l)||(n.track({type:2,doc:l}),f=!0,(a&&this.Gu(l,a)>0||c&&this.Gu(l,c)<0)&&(o=!0)):!u&&l?(n.track({type:0,doc:l}),f=!0):u&&!l&&(n.track({type:1,doc:u}),f=!0,(a||c)&&(o=!0)),f&&(l?(s=s.add(l),i=d?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))})),null!==this.query.limit)for(;s.size>this.query.limit;){const e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{Qu:s,zu:n,$i:o,mutatedKeys:i}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n){const r=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const i=e.zu.Au();i.sort(((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return tu()}};return n(e)-n(t)}(e.type,t.type)||this.Gu(e.doc,t.doc))),this.Ju(n);const s=t?this.Yu():[],o=0===this.Ku.size&&this.current?1:0,a=o!==this.qu;return this.qu=o,0!==i.length||a?{snapshot:new Ip(this.query,e.Qu,r,i,e.mutatedKeys,0===o,a,!1,!!n&&n.resumeToken.approximateByteSize()>0),Xu:s}:{Xu:s}}Pu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new bp,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach((e=>this.Uu=this.Uu.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.Uu=this.Uu.delete(e))),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=Zh(),this.Qu.forEach((e=>{this.Zu(e.key)&&(this.Ku=this.Ku.add(e.key))}));const t=[];return e.forEach((e=>{this.Ku.has(e)||t.push(new Dp(e))})),this.Ku.forEach((n=>{e.has(n)||t.push(new Np(n))})),t}tc(e){this.Uu=e.Hi,this.Ku=Zh();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ec(){return Ip.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu,this.hasCachedResults)}}class Pp{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class Lp{constructor(e){this.key=e,this.nc=!1}}class Mp{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.sc={},this.ic=new qh((e=>Zl(e)),Yl),this.rc=new Map,this.oc=new Set,this.uc=new Vu(Su.comparator),this.cc=new Map,this.ac=new of,this.hc={},this.lc=new Map,this.fc=Zd.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return!0===this.dc}}async function xp(e,t){const n=eg(e);let r,i;const s=n.ic.get(t);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.ec();else{const e=await Tf(n.localStore,Xl(t));n.isPrimaryClient&&zf(n.remoteStore,e);const s=n.sharedClientState.addLocalQueryTarget(e.targetId);r=e.targetId,i=await Up(n,t,r,"current"===s,e.resumeToken)}return i}async function Up(e,t,n,r,i){e._c=(t,n,r)=>async function(e,t,n,r){let i=t.view.Wu(n);i.$i&&(i=await Sf(e.localStore,t.query,!1).then((({documents:e})=>t.view.Wu(e,i))));const s=r&&r.targetChanges.get(t.targetId),o=t.view.applyChanges(i,e.isPrimaryClient,s);return Wp(e,t.targetId,o.Xu),o.snapshot}(e,t,n,r);const s=await Sf(e.localStore,t,!0),o=new Rp(t,s.Hi),a=o.Wu(s.documents),c=rd.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),u=o.applyChanges(a,e.isPrimaryClient,c);Wp(e,n,u.Xu);const l=new Pp(t,n,o);return e.ic.set(t,l),e.rc.has(n)?e.rc.get(n).push(t):e.rc.set(n,[t]),u.snapshot}async function Fp(e,t){const n=ru(e),r=n.ic.get(t),i=n.rc.get(r.targetId);if(i.length>1)return n.rc.set(r.targetId,i.filter((e=>!Yl(e,t)))),void n.ic.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await _f(n.localStore,r.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(r.targetId),Kf(n.remoteStore,r.targetId),Kp(n,r.targetId)})).catch(Pu)):(Kp(n,r.targetId),await _f(n.localStore,r.targetId,!0))}async function jp(e,t){const n=ru(e);try{const e=await function(e,t){const n=ru(e),r=t.snapshotVersion;let i=n.Ui;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(e=>{const s=n.Gi.newChangeBuffer({trackRemovals:!0});i=n.Ui;const o=[];t.targetChanges.forEach(((s,a)=>{const c=i.get(a);if(!c)return;o.push(n.Cs.removeMatchingKeys(e,s.removedDocuments,a).next((()=>n.Cs.addMatchingKeys(e,s.addedDocuments,a))));let u=c.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.has(a)?u=u.withResumeToken(Ku.EMPTY_BYTE_STRING,bu.min()).withLastLimboFreeSnapshotVersion(bu.min()):s.resumeToken.approximateByteSize()>0&&(u=u.withResumeToken(s.resumeToken,r)),i=i.insert(a,u),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(c,u,s)&&o.push(n.Cs.updateTargetData(e,u))}));let a=$h(),c=Zh();if(t.documentUpdates.forEach((r=>{t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(If(e,s,t.documentUpdates).next((e=>{a=e.Wi,c=e.zi}))),!r.isEqual(bu.min())){const t=n.Cs.getLastRemoteSnapshotVersion(e).next((t=>n.Cs.setTargetsMetadata(e,e.currentSequenceNumber,r)));o.push(t)}return Lu.waitFor(o).next((()=>s.apply(e))).next((()=>n.localDocuments.getLocalViewOfDocuments(e,a,c))).next((()=>a))})).then((e=>(n.Ui=i,e)))}(n.localStore,t);t.targetChanges.forEach(((e,t)=>{const r=n.cc.get(t);r&&(nu(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.nc=!0:e.modifiedDocuments.size>0?nu(r.nc):e.removedDocuments.size>0&&(nu(r.nc),r.nc=!1))})),await Jp(n,e,t)}catch(e){await Pu(e)}}function Vp(e,t,n){const r=ru(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.ic.forEach(((n,r)=>{const i=r.view.Pu(t);i.snapshot&&e.push(i.snapshot)})),function(e,t){const n=ru(e);n.onlineState=t;let r=!1;n.queries.forEach(((e,n)=>{for(const e of n.listeners)e.Pu(t)&&(r=!0)})),r&&Ap(n)}(r.eventManager,t),e.length&&r.sc.zo(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function Bp(e,t,n){const r=ru(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.cc.get(t),s=i&&i.key;if(s){let e=new Vu(Su.comparator);e=e.insert(s,El.newNoDocument(s,bu.min()));const n=Zh().add(s),i=new nd(bu.min(),new Map,new Hu(yu),e,n);await jp(r,i),r.uc=r.uc.remove(s),r.cc.delete(t),Xp(r)}else await _f(r.localStore,t,!1).then((()=>Kp(r,t,n))).catch(Pu)}async function qp(e,t){const n=ru(e),r=t.batch.batchId;try{const e=await function(e,t){const n=ru(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(e=>{const r=t.batch.keys(),i=n.Gi.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let o=Lu.resolve();return s.forEach((e=>{o=o.next((()=>r.getEntry(t,e))).next((t=>{const s=n.docVersions.get(e);nu(null!==s),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((()=>e.mutationQueue.removeMutationBatch(t,i)))}(n,e,t,i).next((()=>i.apply(e))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=Zh();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t)))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(n.localStore,t);zp(n,r,null),$p(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Jp(n,e)}catch(e){await Pu(e)}}async function Hp(e,t,n){const r=ru(e);try{const e=await function(e,t){const n=ru(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next((t=>(nu(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(r.localStore,t);zp(r,t,n),$p(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await Jp(r,e)}catch(n){await Pu(n)}}function $p(e,t){(e.lc.get(t)||[]).forEach((e=>{e.resolve()})),e.lc.delete(t)}function zp(e,t,n){const r=ru(e);let i=r.hc[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.hc[r.currentUser.toKey()]=i}}function Kp(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.rc.get(t))e.ic.delete(r),n&&e.sc.wc(r,n);e.rc.delete(t),e.isPrimaryClient&&e.ac.ls(t).forEach((t=>{e.ac.containsKey(t)||Gp(e,t)}))}function Gp(e,t){e.oc.delete(t.path.canonicalString());const n=e.uc.get(t);null!==n&&(Kf(e.remoteStore,n),e.uc=e.uc.remove(t),e.cc.delete(n),Xp(e))}function Wp(e,t,n){for(const r of n)r instanceof Np?(e.ac.addReference(r.key,t),Qp(e,r)):r instanceof Dp?(Jc("SyncEngine","Document no longer in limbo: "+r.key),e.ac.removeReference(r.key,t),e.ac.containsKey(r.key)||Gp(e,r.key)):tu()}function Qp(e,t){const n=t.key,r=n.path.canonicalString();e.uc.get(n)||e.oc.has(r)||(Jc("SyncEngine","New document in limbo: "+n),e.oc.add(r),Xp(e))}function Xp(e){for(;e.oc.size>0&&e.uc.size<e.maxConcurrentLimboResolutions;){const t=e.oc.values().next().value;e.oc.delete(t);const n=new Su(Eu.fromString(t)),r=e.fc.next();e.cc.set(r,new Lp(n)),e.uc=e.uc.insert(n,r),zf(e.remoteStore,new Kd(Xl($l(n.path)),r,2,xu.at))}}async function Jp(e,t,n){const r=ru(e),i=[],s=[],o=[];r.ic.isEmpty()||(r.ic.forEach(((e,a)=>{o.push(r._c(a,t,n).then((e=>{if((e||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){i.push(e);const t=gf.Ci(a.targetId,e);s.push(t)}})))})),await Promise.all(o),r.sc.zo(i),await async function(e,t){const n=ru(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>Lu.forEach(t,(t=>Lu.forEach(t.Si,(r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r))).next((()=>Lu.forEach(t.Di,(r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))))))}catch(e){if(!Mu(e))throw e;Jc("LocalStore","Failed to update sequence numbers: "+e)}for(const e of t){const t=e.targetId;if(!e.fromCache){const e=n.Ui.get(t),r=e.snapshotVersion,i=e.withLastLimboFreeSnapshotVersion(r);n.Ui=n.Ui.insert(t,i)}}}(r.localStore,s))}async function Yp(e,t){const n=ru(e);if(!n.currentUser.isEqual(t)){Jc("SyncEngine","User change. New user:",t.toKey());const e=await wf(n.localStore,t);n.currentUser=t,function(e,t){e.lc.forEach((e=>{e.forEach((e=>{e.reject(new su(iu.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.lc.clear()}(n),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await Jp(n,e.ji)}}function Zp(e,t){const n=ru(e),r=n.cc.get(t);if(r&&r.nc)return Zh().add(r.key);{let e=Zh();const r=n.rc.get(t);if(!r)return e;for(const t of r){const r=n.ic.get(t);e=e.unionWith(r.view.ju)}return e}}function eg(e){const t=ru(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=jp.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Zp.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Bp.bind(null,t),t.sc.zo=kp.bind(null,t.eventManager),t.sc.wc=Cp.bind(null,t.eventManager),t}function tg(e){const t=ru(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=qp.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Hp.bind(null,t),t}class ng{constructor(){this.synchronizeTabs=!1}async initialize(e){this.It=Mf(e.databaseInfo.databaseId),this.sharedClientState=this.gc(e),this.persistence=this.yc(e),await this.persistence.start(),this.localStore=this.Ic(e),this.gcScheduler=this.Tc(e,this.localStore),this.indexBackfillerScheduler=this.Ec(e,this.localStore)}Tc(e,t){return null}Ec(e,t){return null}Ic(e){return vf(this.persistence,new mf,e.initialUser,this.It)}yc(e){return new df(pf.Bs,this.It)}gc(e){return new Af}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class rg{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>Vp(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=Yp.bind(null,this.syncEngine),await pp(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new Tp}createDatastore(e){const t=Mf(e.databaseInfo.databaseId),n=(r=e.databaseInfo,new Pf(r));var r;return function(e,t,n,r){return new Vf(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=e=>Vp(this.syncEngine,e,0),s=Nf.C()?new Nf:new Of,new qf(t,n,r,i,s);var t,n,r,i,s}createSyncEngine(e,t){return function(e,t,n,r,i,s,o){const a=new Mp(e,t,n,r,i,s);return o&&(a.dc=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return async function(e){const t=ru(e);Jc("RemoteStore","RemoteStore shutting down."),t.wu.add(5),await $f(t),t.gu.shutdown(),t.yu.set("Unknown")}(this.remoteStore)}}function ig(e,t,n){if(!n)throw new su(iu.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function sg(e){if(!Su.isDocumentKey(e))throw new su(iu.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function og(e){if(Su.isDocumentKey(e))throw new su(iu.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function ag(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return"function"==typeof e?"a function":tu()}function cg(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new su(iu.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=ag(e);throw new su(iu.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}const ug=new Map;class lg{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new su(iu.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new su(iu.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,function(e,t,n,r){if(!0===t&&!0===r)throw new su(iu.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class hg{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new lg({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new su(iu.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new su(iu.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new lg(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new cu;switch(e.type){case"gapi":const t=e.client;return new du(t,e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new su(iu.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=ug.get(e);t&&(Jc("ComponentProvider","Removing Datastore"),ug.delete(e),t.terminate())}(this),Promise.resolve()}}function dg(e,t,n,r={}){var i;const s=(e=cg(e,hg))._getSettings();if("firestore.googleapis.com"!==s.host&&s.host!==t&&Zc("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},s),{host:`${t}:${n}`,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=Gc.MOCK_USER;else{t=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[o(JSON.stringify({alg:"none",type:"JWT"})),o(JSON.stringify(s)),""].join(".")}(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new su(iu.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new Gc(s)}e._authCredentials=new uu(new au(t,n))}}class fg{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new gg(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new fg(this.firestore,e,this._key)}}class pg{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new pg(this.firestore,e,this._query)}}class gg extends pg{constructor(e,t,n){super(e,t,$l(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new fg(this.firestore,null,new Su(e))}withConverter(e){return new gg(this.firestore,e,this._path)}}function mg(e,t,...n){if(e=A(e),ig("collection","path",t),e instanceof hg){const r=Eu.fromString(t,...n);return og(r),new gg(e,null,r)}{if(!(e instanceof fg||e instanceof gg))throw new su(iu.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(Eu.fromString(t,...n));return og(r),new gg(e.firestore,null,r)}}function yg(e,t,...n){if(e=A(e),1===arguments.length&&(t=mu.R()),ig("doc","path",t),e instanceof hg){const r=Eu.fromString(t,...n);return sg(r),new fg(e,null,new Su(r))}{if(!(e instanceof fg||e instanceof gg))throw new su(iu.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(Eu.fromString(t,...n));return sg(r),new fg(e.firestore,e instanceof gg?e.converter:null,new Su(r))}}class vg{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Rc(this.observer.next,e)}error(e){this.observer.error?this.Rc(this.observer.error,e):Yc("Uncaught Error in snapshot listener:",e)}bc(){this.muted=!0}Rc(e,t){this.muted||setTimeout((()=>{this.muted||e(t)}),0)}}class wg{constructor(e,t,n,r){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=Gc.UNAUTHENTICATED,this.clientId=mu.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,(async e=>{Jc("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(Jc("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user))))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new su(iu.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ou;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this.onlineComponents&&await this.onlineComponents.terminate(),this.offlineComponents&&await this.offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=vp(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function bg(e,t){e.asyncQueue.verifyOperationInProgress(),Jc("FirestoreClient","Initializing OfflineComponentProvider");const n=await e.getConfiguration();await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async e=>{r.isEqual(e)||(await wf(t.localStore,e),r=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e.offlineComponents=t}async function Ig(e,t){e.asyncQueue.verifyOperationInProgress();const n=await Eg(e);Jc("FirestoreClient","Initializing OnlineComponentProvider");const r=await e.getConfiguration();await t.initialize(n,r),e.setCredentialChangeListener((e=>fp(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>fp(t.remoteStore,n))),e.onlineComponents=t}async function Eg(e){return e.offlineComponents||(Jc("FirestoreClient","Using default OfflineComponentProvider"),await bg(e,new ng)),e.offlineComponents}async function Tg(e){return e.onlineComponents||(Jc("FirestoreClient","Using default OnlineComponentProvider"),await Ig(e,new rg)),e.onlineComponents}function _g(e){return Tg(e).then((e=>e.syncEngine))}async function Sg(e){const t=await Tg(e),n=t.eventManager;return n.onListen=xp.bind(null,t.syncEngine),n.onUnlisten=Fp.bind(null,t.syncEngine),n}class kg{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.Uc=!1,this.qc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.No=new xf(this,"async_queue_retry"),this.Wc=()=>{const e=Lf();e&&Jc("AsyncQueue","Visibility state changed to "+e.visibilityState),this.No.Po()};const e=Lf();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.Uc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.Uc){this.Uc=!0,this.Qc=e||!1;const t=Lf();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.Uc)return new Promise((()=>{}));const t=new ou;return this.Hc((()=>this.Uc&&this.Qc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Lc.push(e),this.Jc())))}async Jc(){if(0!==this.Lc.length){try{await this.Lc[0](),this.Lc.shift(),this.No.reset()}catch(e){if(!Mu(e))throw e;Jc("AsyncQueue","Operation failed with retryable error: "+e)}this.Lc.length>0&&this.No.Ro((()=>this.Jc()))}}Hc(e){const t=this.Bc.then((()=>(this.Gc=!0,e().catch((e=>{this.Kc=e,this.Gc=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Yc("INTERNAL UNHANDLED ERROR: ",t),e})).then((e=>(this.Gc=!1,e))))));return this.Bc=t,t}enqueueAfterDelay(e,t,n){this.zc(),this.jc.indexOf(e)>-1&&(t=0);const r=yp.createAndSchedule(this,e,t,n,(e=>this.Yc(e)));return this.qc.push(r),r}zc(){this.Kc&&tu()}verifyOperationInProgress(){}async Xc(){let e;do{e=this.Bc,await e}while(e!==this.Bc)}Zc(e){for(const t of this.qc)if(t.timerId===e)return!0;return!1}ta(e){return this.Xc().then((()=>{this.qc.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this.qc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Xc()}))}ea(e){this.jc.push(e)}Yc(e){const t=this.qc.indexOf(e);this.qc.splice(t,1)}}function Cg(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const e of["next","error","complete"])if(e in n&&"function"==typeof n[e])return!0;return!1}(e)}class Ag extends hg{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new kg,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||Ng(this),this._firestoreClient.terminate()}}function Og(e){return e._firestoreClient||Ng(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function Ng(e){var t;const n=e._freezeSettings(),r=function(e,t,n,r){return new el(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new wg(e._authCredentials,e._appCheckCredentials,e._queue,r)}class Dg{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Dg(Ku.fromBase64String(e))}catch(e){throw new su(iu.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new Dg(Ku.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Rg{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new su(iu.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new _u(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Pg{constructor(e){this._methodName=e}}class Lg{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new su(iu.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new su(iu.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return yu(this._lat,e._lat)||yu(this._long,e._long)}}const Mg=/^__.*__$/;class xg{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new Dh(e,this.data,this.fieldMask,t,this.fieldTransforms):new Nh(e,this.data,t,this.fieldTransforms)}}function Ug(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw tu()}}class Fg{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.It=n,this.ignoreUndefinedProperties=r,void 0===i&&this.na(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(e){return new Fg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.It,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ia({path:n,oa:!1});return r.ua(e),r}ca(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ia({path:n,oa:!1});return r.na(),r}aa(e){return this.ia({path:void 0,oa:!0})}ha(e){return Xg(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(e){return void 0!==this.fieldMask.find((t=>e.isPrefixOf(t)))||void 0!==this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))}na(){if(this.path)for(let e=0;e<this.path.length;e++)this.ua(this.path.get(e))}ua(e){if(0===e.length)throw this.ha("Document fields must not be empty");if(Ug(this.sa)&&Mg.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}class jg{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.It=n||Mf(e)}da(e,t,n,r=!1){return new Fg({sa:e,methodName:t,fa:n,path:_u.emptyPath(),oa:!1,la:r},this.databaseId,this.It,this.ignoreUndefinedProperties)}}function Vg(e){const t=e._freezeSettings(),n=Mf(e._databaseId);return new jg(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Bg(e,t,n,r,i,s={}){const o=e.da(s.merge||s.mergeFields?2:0,t,n,i);Kg("Data must be an object, but it was:",o,r);const a=$g(r,o);let c,u;if(s.merge)c=new zu(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=Gg(t,r,n);if(!o.contains(i))throw new su(iu.INVALID_ARGUMENT,`Field '${i}' is specified in your field mask but missing from your input data.`);Jg(e,i)||e.push(i)}c=new zu(e),u=o.fieldTransforms.filter((e=>c.covers(e.field)))}else c=null,u=o.fieldTransforms;return new xg(new bl(a),c,u)}class qg extends Pg{_toFieldTransform(e){return new bh(e.path,new dh)}isEqual(e){return e instanceof qg}}function Hg(e,t){if(zg(e=A(e)))return Kg("Unsupported field value:",t,e),$g(e,t);if(e instanceof Pg)return function(e,t){if(!Ug(t.sa))throw t.ha(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t.ha(`${e._methodName}() is not currently supported inside arrays`);const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.oa&&4!==t.sa)throw t.ha("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=Hg(i,t.aa(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=A(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return ah(t.It,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=wu.fromDate(e);return{timestampValue:pd(t.It,n)}}if(e instanceof wu){const n=new wu(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:pd(t.It,n)}}if(e instanceof Lg)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Dg)return{bytesValue:gd(t.It,e._byteString)};if(e instanceof fg){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.ha(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:vd(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.ha(`Unsupported field value: ${ag(e)}`)}(e,t)}function $g(e,t){const n={};return ju(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Fu(e,((e,r)=>{const i=Hg(r,t.ra(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function zg(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof wu||e instanceof Lg||e instanceof Dg||e instanceof fg||e instanceof Pg)}function Kg(e,t,n){if(!zg(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=ag(n);throw"an object"===r?t.ha(e+" a custom object"):t.ha(e+" "+r)}}function Gg(e,t,n){if((t=A(t))instanceof Rg)return t._internalPath;if("string"==typeof t)return Qg(e,t);throw Xg("Field path arguments must be of type string or ",e,!1,void 0,n)}const Wg=new RegExp("[~\\*/\\[\\]]");function Qg(e,t,n){if(t.search(Wg)>=0)throw Xg(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new Rg(...t.split("."))._internalPath}catch(r){throw Xg(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function Xg(e,t,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new su(iu.INVALID_ARGUMENT,a+e+c)}function Jg(e,t){return e.some((e=>e.isEqual(t)))}class Yg{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new fg(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Zg(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(em("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Zg extends Yg{data(){return super.data()}}function em(e,t){return"string"==typeof t?Qg(e,t):t instanceof Rg?t._internalPath:t._delegate._internalPath}function tm(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new su(iu.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class nm{convertValue(e,t="none"){switch(ol(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Qu(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Xu(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw tu()}}convertObject(e,t){const n={};return Fu(e.fields,((e,r)=>{n[e]=this.convertValue(r,t)})),n}convertGeoPoint(e){return new Lg(Qu(e.latitude),Qu(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Yu(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Zu(e));default:return null}}convertTimestamp(e){const t=Wu(e);return new wu(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=Eu.fromString(e);nu(jd(n));const r=new tl(n.get(1),n.get(3)),i=new Su(n.popFirst(5));return r.isEqual(t)||Yc(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}}function rm(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class im{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class sm extends Yg{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new om(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const n=this._document.data.field(em("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class om extends sm{data(e={}){return super.data(e)}}class am{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new im(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new om(this._firestore,this._userDataWriter,n.key,n,new im(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new su(iu.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((n=>({type:"added",doc:new om(e._firestore,e._userDataWriter,n.doc.key,n.doc,new im(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter),oldIndex:-1,newIndex:t++})))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||3!==e.type)).map((t=>{const r=new om(e._firestore,e._userDataWriter,t.doc.key,t.doc,new im(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,s=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:cm(t.type),doc:r,oldIndex:i,newIndex:s}}))}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function cm(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return tu()}}class um extends nm{constructor(e){super(),this.firestore=e}convertBytes(e){return new Dg(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new fg(this.firestore,null,t)}}function lm(e,t){const n=cg(e.firestore,Ag),r=yg(e),i=rm(e.converter,t);return dm(n,[Bg(Vg(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Eh.exists(!1))]).then((()=>r))}function hm(e,...t){var n,r,i;e=A(e);let s={includeMetadataChanges:!1},o=0;"object"!=typeof t[o]||Cg(t[o])||(s=t[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges};if(Cg(t[o])){const e=t[o];t[o]=null===(n=e.next)||void 0===n?void 0:n.bind(e),t[o+1]=null===(r=e.error)||void 0===r?void 0:r.bind(e),t[o+2]=null===(i=e.complete)||void 0===i?void 0:i.bind(e)}let c,u,l;if(e instanceof fg)u=cg(e.firestore,Ag),l=$l(e._key.path),c={next:n=>{t[o]&&t[o](fm(u,e,n))},error:t[o+1],complete:t[o+2]};else{const n=cg(e,pg);u=cg(n.firestore,Ag),l=n._query;const r=new um(u);c={next:e=>{t[o]&&t[o](new am(u,r,n,e))},error:t[o+1],complete:t[o+2]},tm(e._query)}return function(e,t,n,r){const i=new vg(r),s=new Op(t,i,n);return e.asyncQueue.enqueueAndForget((async()=>_p(await Sg(e),s))),()=>{i.bc(),e.asyncQueue.enqueueAndForget((async()=>Sp(await Sg(e),s)))}}(Og(u),l,a,c)}function dm(e,t){return function(e,t){const n=new ou;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){const r=tg(e);try{const e=await function(e,t){const n=ru(e),r=wu.now(),i=t.reduce(((e,t)=>e.add(t.key)),Zh());let s,o;return n.persistence.runTransaction("Locally write mutations","readwrite",(e=>{let a=$h(),c=Zh();return n.Gi.getEntries(e,i).next((e=>{a=e,a.forEach(((e,t)=>{t.isValidDocument()||(c=c.add(e))}))})).next((()=>n.localDocuments.getOverlayedDocuments(e,a))).next((i=>{s=i;const o=[];for(const e of t){const t=Ah(e,s.get(e.key).overlayedDocument);null!=t&&o.push(new Dh(e.key,t,Il(t.value.mapValue),Eh.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,o,t)})).next((t=>{o=t;const r=t.applyToLocalDocumentSet(s,c);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)}))})).then((()=>({batchId:o.batchId,changes:Gh(s)})))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.hc[e.currentUser.toKey()];r||(r=new Vu(yu)),r=r.insert(t,n),e.hc[e.currentUser.toKey()]=r}(r,e.batchId,n),await Jp(r,e.changes),await ip(r.remoteStore)}catch(e){const t=vp(e,"Failed to persist write");n.reject(t)}}(await _g(e),t,n))),n.promise}(Og(e),t)}function fm(e,t,n){const r=n.docs.get(t._key),i=new um(e);return new sm(e,i,t._key,r,new im(n.hasPendingWrites,n.fromCache),t.converter)}function pm(){return new qg("serverTimestamp")}!function(e,t=!0){Wc="9.12.0",de(new O("firestore",((e,{instanceIdentifier:n,options:r})=>{const i=e.getProvider("app").getImmediate(),s=new Ag(new lu(e.getProvider("auth-internal")),new pu(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new su(iu.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new tl(e.options.projectId,t)}(i,n),i);return r=Object.assign({useFetchStreams:t},r),s._setSettings(r),s}),"PUBLIC").setMultipleInstances(!0)),we(Kc,"3.7.0",e),we(Kc,"3.7.0","esm2017")}();var gm=ye({apiKey:"AIzaSyAdfXlnRAILb9w125vhhM2grnzTXAznOJs",authDomain:"ilabcastle.firebaseapp.com",projectId:"ilabcastle",storageBucket:"ilabcastle.appspot.com",messagingSenderId:"1003779176831",appId:"1:1003779176831:web:ee67d82ef353d5ba1ec24a",measurementId:"G-40VK8WXFS3"}),mm=(function(e=ve()){const t=fe(e=A(e),fi);t.isInitialized()?t.getImmediate():function(e,t={}){const n=fe(e,fi);if(n.isInitialized()){const e=n.getImmediate();if(b(t,n.getOptions()))return e;throw vi.create("already-initialized")}n.initialize({options:t})}(e)}(gm),function(e,t){const n="string"==typeof e?e:t||"(default)",r=fe("object"==typeof e?e:ve(),"firestore").getImmediate({identifier:n});if(!r._initialized){const e=(e=>{const t=p(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]})("firestore");e&&dg(r,...e)}return r}(gm)),ym=function(e=ve()){const t=fe(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=fe(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(b(n.getOptions(),null!=t?t:{}))return e;xe(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:yr,persistence:[On,dn,pn]}),r=g("authTokenSyncURL");if(r){const e=(i=r,async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>Ir)return;const r=null==t?void 0:t.token;Er!==r&&(Er=r,await fetch(i,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))});!function(e,t,n){A(e).beforeAuthStateChanged(t,n)}(n,e,(()=>e(n.currentUser))),function(e,t,n,r){A(e).onIdTokenChanged(t,n,r)}(n,(t=>e(t)))}var i;const s=p("auth");return s&&Ut(n,`http://${s}`),n}(gm),vm=new Yt;const wm=mm;function bm(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map((function(e){return"'"+e+"'"})).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function Im(e){return!!e&&!!e[ly]}function Em(e){return!!e&&(function(e){if(!e||"object"!=typeof e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;var n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object||"function"==typeof n&&Function.toString.call(n)===hy}(e)||Array.isArray(e)||!!e[uy]||!!e.constructor[uy]||Om(e)||Nm(e))}function Tm(e,t,n){void 0===n&&(n=!1),0===_m(e)?(n?Object.keys:dy)(e).forEach((function(r){n&&"symbol"==typeof r||t(r,e[r],e)})):e.forEach((function(n,r){return t(r,n,e)}))}function _m(e){var t=e[ly];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:Om(e)?2:Nm(e)?3:0}function Sm(e,t){return 2===_m(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function km(e,t){return 2===_m(e)?e.get(t):e[t]}function Cm(e,t,n){var r=_m(e);2===r?e.set(t,n):3===r?(e.delete(t),e.add(n)):e[t]=n}function Am(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function Om(e){return sy&&e instanceof Map}function Nm(e){return oy&&e instanceof Set}function Dm(e){return e.o||e.t}function Rm(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=fy(e);delete t[ly];for(var n=dy(t),r=0;r<n.length;r++){var i=n[r],s=t[i];!1===s.writable&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(t[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function Pm(e,t){return void 0===t&&(t=!1),Mm(e)||Im(e)||!Em(e)||(_m(e)>1&&(e.set=e.add=e.clear=e.delete=Lm),Object.freeze(e),t&&Tm(e,(function(e,t){return Pm(t,!0)}),!0)),e}function Lm(){bm(2)}function Mm(e){return null==e||"object"!=typeof e||Object.isFrozen(e)}function xm(e){var t=py[e];return t||bm(18,e),t}function Um(e,t){py[e]||(py[e]=t)}function Fm(){return ry}function jm(e,t){t&&(xm("Patches"),e.u=[],e.s=[],e.v=t)}function Vm(e){Bm(e),e.p.forEach(Hm),e.p=null}function Bm(e){e===ry&&(ry=e.l)}function qm(e){return ry={p:[],l:ry,h:e,m:!0,_:0}}function Hm(e){var t=e[ly];0===t.i||1===t.i?t.j():t.O=!0}function $m(e,t){t._=t.p.length;var n=t.p[0],r=void 0!==e&&e!==n;return t.h.g||xm("ES5").S(t,e,r),r?(n[ly].P&&(Vm(t),bm(4)),Em(e)&&(e=zm(t,e),t.l||Gm(t,e)),t.u&&xm("Patches").M(n[ly].t,e,t.u,t.s)):e=zm(t,n,[]),Vm(t),t.u&&t.v(t.u,t.s),e!==cy?e:void 0}function zm(e,t,n){if(Mm(t))return t;var r=t[ly];if(!r)return Tm(t,(function(i,s){return Km(e,r,t,i,s,n)}),!0),t;if(r.A!==e)return t;if(!r.P)return Gm(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=4===r.i||5===r.i?r.o=Rm(r.k):r.o;Tm(3===r.i?new Set(i):i,(function(t,s){return Km(e,r,i,t,s,n)})),Gm(e,i,!1),n&&e.u&&xm("Patches").R(r,n,e.u,e.s)}return r.o}function Km(e,t,n,r,i,s){if(Im(i)){var o=zm(e,i,s&&t&&3!==t.i&&!Sm(t.D,r)?s.concat(r):void 0);if(Cm(n,r,o),!Im(o))return;e.m=!1}if(Em(i)&&!Mm(i)){if(!e.h.F&&e._<1)return;zm(e,i),t&&t.A.l||Gm(e,i)}}function Gm(e,t,n){void 0===n&&(n=!1),e.h.F&&e.m&&Pm(t,n)}function Wm(e,t){var n=e[ly];return(n?Dm(n):e)[t]}function Qm(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function Xm(e){e.P||(e.P=!0,e.l&&Xm(e.l))}function Jm(e){e.o||(e.o=Rm(e.t))}function Ym(e,t,n){var r=Om(t)?xm("MapSet").N(t,n):Nm(t)?xm("MapSet").T(t,n):e.g?function(e,t){var n=Array.isArray(e),r={i:n?1:0,A:t?t.A:Fm(),P:!1,I:!1,D:{},l:t,t:e,k:null,o:null,j:null,C:!1},i=r,s=gy;n&&(i=[r],s=my);var o=Proxy.revocable(i,s),a=o.revoke,c=o.proxy;return r.k=c,r.j=a,c}(t,n):xm("ES5").J(t,n);return(n?n.A:Fm()).p.push(r),r}function Zm(e){return Im(e)||bm(22,e),function e(t){if(!Em(t))return t;var n,r=t[ly],i=_m(t);if(r){if(!r.P&&(r.i<4||!xm("ES5").K(r)))return r.t;r.I=!0,n=ey(t,i),r.I=!1}else n=ey(t,i);return Tm(n,(function(t,i){r&&km(r.t,t)===i||Cm(n,t,e(i))})),3===i?new Set(n):n}(e)}function ey(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return Rm(e)}function ty(){function e(e,t){var n=i[e];return n?n.enumerable=t:i[e]=n={configurable:!0,enumerable:t,get:function(){var t=this[ly];return gy.get(t,e)},set:function(t){var n=this[ly];gy.set(n,e,t)}},n}function t(e){for(var t=e.length-1;t>=0;t--){var i=e[t][ly];if(!i.P)switch(i.i){case 5:r(i)&&Xm(i);break;case 4:n(i)&&Xm(i)}}}function n(e){for(var t=e.t,n=e.k,r=dy(n),i=r.length-1;i>=0;i--){var s=r[i];if(s!==ly){var o=t[s];if(void 0===o&&!Sm(t,s))return!0;var a=n[s],c=a&&a[ly];if(c?c.t!==o:!Am(a,o))return!0}}var u=!!t[ly];return r.length!==dy(t).length+(u?0:1)}function r(e){var t=e.k;if(t.length!==e.t.length)return!0;var n=Object.getOwnPropertyDescriptor(t,t.length-1);if(n&&!n.get)return!0;for(var r=0;r<t.length;r++)if(!t.hasOwnProperty(r))return!0;return!1}var i={};Um("ES5",{J:function(t,n){var r=Array.isArray(t),i=function(t,n){if(t){for(var r=Array(n.length),i=0;i<n.length;i++)Object.defineProperty(r,""+i,e(i,!0));return r}var s=fy(n);delete s[ly];for(var o=dy(s),a=0;a<o.length;a++){var c=o[a];s[c]=e(c,t||!!s[c].enumerable)}return Object.create(Object.getPrototypeOf(n),s)}(r,t),s={i:r?5:4,A:n?n.A:Fm(),P:!1,I:!1,D:{},l:n,t,k:i,o:null,O:!1,C:!1};return Object.defineProperty(i,ly,{value:s,writable:!0}),i},S:function(e,n,i){i?Im(n)&&n[ly].A===e&&t(e.p):(e.u&&function e(t){if(t&&"object"==typeof t){var n=t[ly];if(n){var i=n.t,s=n.k,o=n.D,a=n.i;if(4===a)Tm(s,(function(t){t!==ly&&(void 0!==i[t]||Sm(i,t)?o[t]||e(s[t]):(o[t]=!0,Xm(n)))})),Tm(i,(function(e){void 0!==s[e]||Sm(s,e)||(o[e]=!1,Xm(n))}));else if(5===a){if(r(n)&&(Xm(n),o.length=!0),s.length<i.length)for(var c=s.length;c<i.length;c++)o[c]=!1;else for(var u=i.length;u<s.length;u++)o[u]=!0;for(var l=Math.min(s.length,i.length),h=0;h<l;h++)s.hasOwnProperty(h)||(o[h]=!0),void 0===o[h]&&e(s[h])}}}}(e.p[0]),t(e.p))},K:function(e){return 4===e.i?n(e):r(e)}})}var ny,ry,iy="undefined"!=typeof Symbol&&"symbol"==typeof Symbol("x"),sy="undefined"!=typeof Map,oy="undefined"!=typeof Set,ay="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,cy=iy?Symbol.for("immer-nothing"):((ny={})["immer-nothing"]=!0,ny),uy=iy?Symbol.for("immer-draftable"):"__$immer_draftable",ly=iy?Symbol.for("immer-state"):"__$immer_state",hy=("undefined"!=typeof Symbol&&Symbol.iterator,""+Object.prototype.constructor),dy="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,fy=Object.getOwnPropertyDescriptors||function(e){var t={};return dy(e).forEach((function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)})),t},py={},gy={get:function(e,t){if(t===ly)return e;var n=Dm(e);if(!Sm(n,t))return function(e,t,n){var r,i=Qm(t,n);return i?"value"in i?i.value:null===(r=i.get)||void 0===r?void 0:r.call(e.k):void 0}(e,n,t);var r=n[t];return e.I||!Em(r)?r:r===Wm(e.t,t)?(Jm(e),e.o[t]=Ym(e.A.h,r,e)):r},has:function(e,t){return t in Dm(e)},ownKeys:function(e){return Reflect.ownKeys(Dm(e))},set:function(e,t,n){var r=Qm(Dm(e),t);if(null==r?void 0:r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=Wm(Dm(e),t),s=null==i?void 0:i[ly];if(s&&s.t===n)return e.o[t]=n,e.D[t]=!1,!0;if(Am(n,i)&&(void 0!==n||Sm(e.t,t)))return!0;Jm(e),Xm(e)}return e.o[t]===n&&"number"!=typeof n&&(void 0!==n||t in e.o)||(e.o[t]=n,e.D[t]=!0,!0)},deleteProperty:function(e,t){return void 0!==Wm(e.t,t)||t in e.t?(e.D[t]=!1,Jm(e),Xm(e)):delete e.D[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=Dm(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r?{writable:!0,configurable:1!==e.i||"length"!==t,enumerable:r.enumerable,value:n[t]}:r},defineProperty:function(){bm(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){bm(12)}},my={};Tm(gy,(function(e,t){my[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),my.deleteProperty=function(e,t){return my.set.call(this,e,t,void 0)},my.set=function(e,t,n){return gy.set.call(this,e[0],t,n,e[0])};var yy=function(){function e(e){var t=this;this.g=ay,this.F=!0,this.produce=function(e,n,r){if("function"==typeof e&&"function"!=typeof n){var i=n;n=e;var s=t;return function(e){var t=this;void 0===e&&(e=i);for(var r=arguments.length,o=Array(r>1?r-1:0),a=1;a<r;a++)o[a-1]=arguments[a];return s.produce(e,(function(e){var r;return(r=n).call.apply(r,[t,e].concat(o))}))}}var o;if("function"!=typeof n&&bm(6),void 0!==r&&"function"!=typeof r&&bm(7),Em(e)){var a=qm(t),c=Ym(t,e,void 0),u=!0;try{o=n(c),u=!1}finally{u?Vm(a):Bm(a)}return"undefined"!=typeof Promise&&o instanceof Promise?o.then((function(e){return jm(a,r),$m(e,a)}),(function(e){throw Vm(a),e})):(jm(a,r),$m(o,a))}if(!e||"object"!=typeof e){if(void 0===(o=n(e))&&(o=e),o===cy&&(o=void 0),t.F&&Pm(o,!0),r){var l=[],h=[];xm("Patches").M(e,o,l,h),r(l,h)}return o}bm(21,e)},this.produceWithPatches=function(e,n){if("function"==typeof e)return function(n){for(var r=arguments.length,i=Array(r>1?r-1:0),s=1;s<r;s++)i[s-1]=arguments[s];return t.produceWithPatches(n,(function(t){return e.apply(void 0,[t].concat(i))}))};var r,i,s=t.produce(e,n,(function(e,t){r=e,i=t}));return"undefined"!=typeof Promise&&s instanceof Promise?s.then((function(e){return[e,r,i]})):[s,r,i]},"boolean"==typeof(null==e?void 0:e.useProxies)&&this.setUseProxies(e.useProxies),"boolean"==typeof(null==e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze)}var t=e.prototype;return t.createDraft=function(e){Em(e)||bm(8),Im(e)&&(e=Zm(e));var t=qm(this),n=Ym(this,e,void 0);return n[ly].C=!0,Bm(t),n},t.finishDraft=function(e,t){var n=(e&&e[ly]).A;return jm(n,t),$m(void 0,n)},t.setAutoFreeze=function(e){this.F=e},t.setUseProxies=function(e){e&&!ay&&bm(20),this.g=e},t.applyPatches=function(e,t){var n;for(n=t.length-1;n>=0;n--){var r=t[n];if(0===r.path.length&&"replace"===r.op){e=r.value;break}}n>-1&&(t=t.slice(n+1));var i=xm("Patches").$;return Im(e)?i(e,t):this.produce(e,(function(e){return i(e,t)}))},e}(),vy=new yy,wy=vy.produce;vy.produceWithPatches.bind(vy),vy.setAutoFreeze.bind(vy),vy.setUseProxies.bind(vy),vy.applyPatches.bind(vy),vy.createDraft.bind(vy),vy.finishDraft.bind(vy);const by=wy;function Iy(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ey(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ty(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ey(Object(n),!0).forEach((function(t){Iy(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ey(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _y(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var Sy="function"==typeof Symbol&&Symbol.observable||"@@observable",ky=function(){return Math.random().toString(36).substring(7).split("").join(".")},Cy={INIT:"@@redux/INIT"+ky(),REPLACE:"@@redux/REPLACE"+ky(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+ky()}};function Ay(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function Oy(e,t,n){var r;if("function"==typeof t&&"function"==typeof n||"function"==typeof n&&"function"==typeof arguments[3])throw new Error(_y(0));if("function"==typeof t&&void 0===n&&(n=t,t=void 0),void 0!==n){if("function"!=typeof n)throw new Error(_y(1));return n(Oy)(e,t)}if("function"!=typeof e)throw new Error(_y(2));var i=e,s=t,o=[],a=o,c=!1;function u(){a===o&&(a=o.slice())}function l(){if(c)throw new Error(_y(3));return s}function h(e){if("function"!=typeof e)throw new Error(_y(4));if(c)throw new Error(_y(5));var t=!0;return u(),a.push(e),function(){if(t){if(c)throw new Error(_y(6));t=!1,u();var n=a.indexOf(e);a.splice(n,1),o=null}}}function d(e){if(!Ay(e))throw new Error(_y(7));if(void 0===e.type)throw new Error(_y(8));if(c)throw new Error(_y(9));try{c=!0,s=i(s,e)}finally{c=!1}for(var t=o=a,n=0;n<t.length;n++){(0,t[n])()}return e}function f(e){if("function"!=typeof e)throw new Error(_y(10));i=e,d({type:Cy.REPLACE})}function p(){var e,t=h;return(e={subscribe:function(e){if("object"!=typeof e||null===e)throw new Error(_y(11));function n(){e.next&&e.next(l())}return n(),{unsubscribe:t(n)}}})[Sy]=function(){return this},e}return d({type:Cy.INIT}),(r={dispatch:d,subscribe:h,getState:l,replaceReducer:f})[Sy]=p,r}function Ny(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var i=t[r];0,"function"==typeof e[i]&&(n[i]=e[i])}var s,o=Object.keys(n);try{!function(e){Object.keys(e).forEach((function(t){var n=e[t];if(void 0===n(void 0,{type:Cy.INIT}))throw new Error(_y(12));if(void 0===n(void 0,{type:Cy.PROBE_UNKNOWN_ACTION()}))throw new Error(_y(13))}))}(n)}catch(e){s=e}return function(e,t){if(void 0===e&&(e={}),s)throw s;for(var r=!1,i={},a=0;a<o.length;a++){var c=o[a],u=n[c],l=e[c],h=u(l,t);if(void 0===h){t&&t.type;throw new Error(_y(14))}i[c]=h,r=r||h!==l}return(r=r||o.length!==Object.keys(e).length)?i:e}}function Dy(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}function Ry(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(){var n=e.apply(void 0,arguments),r=function(){throw new Error(_y(15))},i={getState:n.getState,dispatch:function(){return r.apply(void 0,arguments)}},s=t.map((function(e){return e(i)}));return r=Dy.apply(void 0,s)(n.dispatch),Ty(Ty({},n),{},{dispatch:r})}}}function Py(e){return function(t){var n=t.dispatch,r=t.getState;return function(t){return function(i){return"function"==typeof i?i(n,r,e):t(i)}}}}var Ly=Py();Ly.withExtraArgument=Py;const My=Ly;n(155);var xy=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Uy=function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},Fy=Object.defineProperty,jy=(Object.defineProperties,Object.getOwnPropertyDescriptors,Object.getOwnPropertySymbols),Vy=Object.prototype.hasOwnProperty,By=Object.prototype.propertyIsEnumerable,qy=function(e,t,n){return t in e?Fy(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},Hy=function(e,t){for(var n in t||(t={}))Vy.call(t,n)&&qy(e,n,t[n]);if(jy)for(var r=0,i=jy(t);r<i.length;r++){n=i[r];By.call(t,n)&&qy(e,n,t[n])}return e},$y="undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!==arguments.length)return"object"==typeof arguments[0]?Dy:Dy.apply(null,arguments)};"undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__;function zy(e){if("object"!=typeof e||null===e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;for(var n=t;null!==Object.getPrototypeOf(n);)n=Object.getPrototypeOf(n);return t===n}var Ky=function(e){function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return xy(t,e),Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.prototype.concat.apply(this,t)},t.prototype.prepend=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return 1===e.length&&Array.isArray(e[0])?new(t.bind.apply(t,Uy([void 0],e[0].concat(this)))):new(t.bind.apply(t,Uy([void 0],e.concat(this))))},t}(Array);function Gy(e){return Em(e)?by(e,(function(){})):e}function Wy(){return function(e){return function(e){void 0===e&&(e={});var t=e.thunk,n=void 0===t||t,r=(e.immutableCheck,e.serializableCheck,new Ky);n&&(!function(e){return"boolean"==typeof e}(n)?r.push(My.withExtraArgument(n.extraArgument)):r.push(My));0;return r}(e)}}function Qy(e,t){function n(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];if(t){var i=t.apply(void 0,n);if(!i)throw new Error("prepareAction did not return an object");return Hy(Hy({type:e,payload:i.payload},"meta"in i&&{meta:i.meta}),"error"in i&&{error:i.error})}return{type:e,payload:n[0]}}return n.toString=function(){return""+e},n.type=e,n.match=function(t){return t.type===e},n}function Xy(e){var t,n={},r=[],i={addCase:function(e,t){var r="string"==typeof e?e:e.type;if(r in n)throw new Error("addCase cannot be called with two reducers for the same action type");return n[r]=t,i},addMatcher:function(e,t){return r.push({matcher:e,reducer:t}),i},addDefaultCase:function(e){return t=e,i}};return e(i),[n,r,t]}function Jy(e){var t=e.name;if(!t)throw new Error("`name` is a required option for createSlice");var n,r="function"==typeof e.initialState?e.initialState:Gy(e.initialState),i=e.reducers||{},s=Object.keys(i),o={},a={},c={};function u(){var t="function"==typeof e.extraReducers?Xy(e.extraReducers):[e.extraReducers],n=t[0],i=void 0===n?{}:n,s=t[1],o=void 0===s?[]:s,c=t[2],u=void 0===c?void 0:c,l=Hy(Hy({},i),a);return function(e,t,n,r){void 0===n&&(n=[]);var i,s="function"==typeof t?Xy(t):[t,n,r],o=s[0],a=s[1],c=s[2];if(function(e){return"function"==typeof e}(e))i=function(){return Gy(e())};else{var u=Gy(e);i=function(){return u}}function l(e,t){void 0===e&&(e=i());var n=Uy([o[t.type]],a.filter((function(e){return(0,e.matcher)(t)})).map((function(e){return e.reducer})));return 0===n.filter((function(e){return!!e})).length&&(n=[c]),n.reduce((function(e,n){if(n){var r;if(Im(e))return void 0===(r=n(e,t))?e:r;if(Em(e))return by(e,(function(e){return n(e,t)}));if(void 0===(r=n(e,t))){if(null===e)return e;throw Error("A case reducer on a non-draftable value must not return undefined")}return r}return e}),e)}return l.getInitialState=i,l}(r,l,o,u)}return s.forEach((function(e){var n,r,s=i[e],u=t+"/"+e;"reducer"in s?(n=s.reducer,r=s.prepare):n=s,o[e]=n,a[u]=n,c[e]=r?Qy(u,r):Qy(u)})),{name:t,reducer:function(e,t){return n||(n=u()),n(e,t)},actions:c,caseReducers:o,getInitialState:function(){return n||(n=u()),n.getInitialState()}}}Object.assign;var Yy="listenerMiddleware";Qy(Yy+"/add"),Qy(Yy+"/removeAll"),Qy(Yy+"/remove");ty();var Zy=Jy({name:"user",initialState:{user:null},reducers:{login:function(e,t){e.user=t.payload},logout:function(e){e.user=null}}}),ev=Zy.actions,tv=ev.login,nv=ev.logout;const rv=Zy.reducer;var iv=Jy({name:"app",initialState:{channelId:null,channelName:null},reducers:{setChannelInfo:function(e,t){e.channelId=t.payload.channelId,e.channelName=t.payload.channelName}}});iv.actions.setChannelInfo;const sv=iv.reducer;var ov=Jy({name:"dataUser",initialState:{user:null},reducers:{profil:function(e,t){e.dataUser=t.payload},dataJob:function(e,t){e.dataUser=t.payload},userDataPerso:function(e,t){e.user=t.payload}}}),av=ov.actions,cv=av.profil,uv=av.dataJob;var lv=function(e){var t,n=Wy(),r=e||{},i=r.reducer,s=void 0===i?void 0:i,o=r.middleware,a=void 0===o?n():o,c=r.devTools,u=void 0===c||c,l=r.preloadedState,h=void 0===l?void 0:l,d=r.enhancers,f=void 0===d?void 0:d;if("function"==typeof s)t=s;else{if(!zy(s))throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');t=Ny(s)}var p=a;"function"==typeof p&&(p=p(n));var g=Ry.apply(void 0,p),m=Dy;u&&(m=$y(Hy({trace:!1},"object"==typeof u&&u)));var y=[g];return Array.isArray(f)?y=Uy([g],f):"function"==typeof f&&(y=f(y)),Oy(t,h,m.apply(void 0,y))}({reducer:{user:rv,app:sv,dataPerso:ov.reducer}});function hv(){hm(mg(wm,"dataRange"),(function(e){lv.dispatch(uv(e.docs.map((function(e){return{id:e.id,data:e.data()}})),e.docs.forEach((function(e){console.log(e.data())}))))})),console.log("haaaaaaaaaaaaaaaaaaaa"),console.log(lv.getState().dataPerso.dataUser);for(var e=lv.getState().dataPerso.dataUser,t=0;t<e;t++)console.log(e[t]);setInterval((function(){var e=lv.getState().dataPerso.dataUser;if(console.log(e[0].id),"3zZic48M0XGDkHI9AyCr"==e[0].id){var t=document.querySelectorAll(".nav__rangeINto"),n=0;t.forEach((function(e){0==n?(e.style.width=parseInt(lv.getState().dataPerso.dataUser[0].data.nourriture,10)+"%",n++):1==n?(e.style.width=parseInt(lv.getState().dataPerso.dataUser[0].data.materiaux,10)+"%",n++):2==n?(e.style.width=parseInt(lv.getState().dataPerso.dataUser[0].data.bonheur,10)+"%",n++):3==n?(e.style.width=parseInt(lv.getState().dataPerso.dataUser[0].data.argent,10)+"%",n++):4==n?(e.style.width=parseInt(lv.getState().dataPerso.dataUser[0].data.nourriture,10)+"%",n++):5==n?(e.style.width=parseInt(lv.getState().dataPerso.dataUser[0].data.materiaux,10)+"%",n++):6==n?(e.style.width=parseInt(lv.getState().dataPerso.dataUser[0].data.bonheur,10)+"%",n++):7==n?(e.style.width=parseInt(lv.getState().dataPerso.dataUser[0].data.argent,10)+"%",n++):8==n?(e.style.width=parseInt(lv.getState().dataPerso.dataUser[0].data.nourriture,10)+"%",n++):9==n?(e.style.width=parseInt(lv.getState().dataPerso.dataUser[0].data.materiaux,10)+"%",n++):10==n?(e.style.width=parseInt(lv.getState().dataPerso.dataUser[0].data.bonheur,10)+"%",n++):11==n?(e.style.width=parseInt(lv.getState().dataPerso.dataUser[0].data.argent,10)+"%",n++):12==n?(e.style.width=parseInt(lv.getState().dataPerso.dataUser[0].data.nourriture,10)+"%",n++):13==n?(e.style.width=parseInt(lv.getState().dataPerso.dataUser[0].data.materiaux,10)+"%",n++):14==n?(e.style.width=parseInt(lv.getState().dataPerso.dataUser[0].data.bonheur,10)+"%",n++):15==n?(e.style.width=parseInt(lv.getState().dataPerso.dataUser[0].data.argent,10)+"%",n++):16==n?(e.style.width=parseInt(lv.getState().dataPerso.dataUser[0].data.nourriture,10)+"%",n++):17==n?(e.style.width=parseInt(lv.getState().dataPerso.dataUser[0].data.materiaux,10)+"%",n++):18==n?(e.style.width=parseInt(lv.getState().dataPerso.dataUser[0].data.bonheur,10)+"%",n++):19==n&&(e.style.width=parseInt(lv.getState().dataPerso.dataUser[0].data.argent,10)+"%",n++)}))}}),6e4)}function dv(){console.log("hello"),async function(e,t,n){const r=Mt(e);je(e,t,Qt);const i=Mn(r,n);return new qn(r,"signInViaPopup",t,i).executeNotNull()}(ym,vm).then((function(e){console.log(e.user);var t=e;localStorage.setItem("displayname",t.user.displayName)," "==localStorage.getItem("class")||null==localStorage.getItem("class")||""==localStorage.getItem("class")?function(e){null!=e.user?function(){console.log("je suis une chie");var e=document.createElement("div");e.classList.add("popup"),document.querySelector("body").appendChild(e);var t=document.createElement("h2");t.classList.add("popup__title"),t.innerText="Crée ton compte",e.appendChild(t);var n=document.createElement("label"),r=document.createElement("input");r.classList.add("popup__input"),r.type="texte",r.value="Ex : LeNain",r.addEventListener("click",(function(e){e.target.value=" "})),n.textContent="Rentre ton pseudo :",n.classList.add("popup__label"),e.appendChild(n),e.appendChild(r);var i=document.createElement("select"),s=document.createElement("label"),o=document.createElement("option");o.classList.add("popup__option");var a=document.createElement("option");a.classList.add("popup__option");var c=document.createElement("option");c.classList.add("popup__option");var u=document.createElement("option");u.classList.add("popup__option"),s.classList.add("popup__label"),s.innerText="Choisi ton district",o.value="mineurs",o.text="mineurs",a.value="Paysans",a.text="Paysans",c.value="bucherons",c.text="bucherons",u.value="caristes",u.text="caristes",i.classList.add("popup__select"),e.appendChild(s),e.appendChild(i),i.appendChild(o),i.appendChild(a),i.appendChild(c),i.appendChild(u);var l=document.createElement("button");l.textContent="confirmer les infos",l.classList.add("popup__btn"),l.addEventListener("click",(function(t){var n=document.querySelector(".popup__input");localStorage.setItem("pseudo",n.value);var r=document.querySelector(".popup__select");localStorage.setItem("class",r.value);try{var i=lm(mg(wm,"users"),{utilisateur:lv.getState().user.user.displayName,email:lv.getState().user.user.email,pseudo:n.value,metier:r.value});console.log("Document written with ID: "+i.id)}catch(t){console.error("Error adding document: ",t)}hm(mg(wm,"users"),(function(e){lv.dispatch(cv(e.docs.map((function(e){return{id:e.id,channel:e.data()}}))))})),lv.dispatch(tv({pseudo:n.value,metier:r.value})),e.style.display="none"})),e.appendChild(l)}():console.log("c'est mort li pop")}(t):(document.querySelector("#classeProfil").innerHTML=localStorage.getItem("class"),document.querySelector(".navProfil__name").innerHTML=localStorage.getItem("pseudo")),function(e){if(null!=e.user){var t=document.querySelector(".nav__button");t.innerHTML="Se déconnecter",t.classList.add("nav__button--logout")}else{var n=document.querySelector(".nav__button");n.innerHTML="Se connecter",n.classList.remove("nav__button--logout")}}(t),function(e){var t=document.querySelector("#profilBox");null==e.user?t.classList.add("nav__el--none"):t.classList.remove("nav__el--none")}(t),hv()})).catch((function(e){return alert(e.message)}))}function fv(){console.log("bye amigos"),function(e){return A(e).signOut()}(ym).then((function(e){var t=document.querySelector(".nav__button");t.innerHTML="Se connecter",t.classList.remove("nav__button--logout"),localStorage.clear()})).catch((function(e){console.error(e.message),console.log(e.message)}))}var pv=function(e,t,n){var r=document.createElement("li");r.classList.add("nav__rangeBox"),e.appendChild(r);var i=document.createElement("p");i.classList.add("nav__txt"),i.classList.add("nav__txt--range"),i.innerText=t,r.appendChild(i);var s=document.createElement("div");s.classList.add("nav__rangeIn"),r.appendChild(s);var o=document.createElement("div");o.title=t,o.classList.add("nav__rangeINto"),o.style.width=n+"%",o.style.backgroundColor=n<20?"#FF0F00":"#A6DC61",s.appendChild(o)};function gv(e,t){new mv(e,t);var n=document.querySelectorAll(".popupChoice"),r=document.querySelector(".popupChoice");if(n.length>4){console.log(n.length);document.querySelector(".popupChoice__list");r.parentNode.removeChild(r.parentNode.firstChild)}}var mv=function(e,t){var n=document.createElement("li");n.classList.add("popupChoice"),!1===t&&n.classList.add("popupChoice--small"),document.querySelector(".popupChoice__list").appendChild(n);var r=document.createElement("p");if(r.innerText=e,n.appendChild(r),!0===t){var i=document.createElement("div");i.classList.add("popupChoice__btnBox"),n.appendChild(i);var s=document.createElement("button");s.classList.add("popupChoice__btnChoice"),s.classList.add("popupChoice__btnChoice--vert"),s.textContent="Accepter",i.appendChild(s),s.addEventListener("click",(function(e){console.log("je ne suis pas un connard"),n.classList.add("popupChoice__animSortie");yv(e.target.parentNode.parentNode,!0)}));var o=document.createElement("button");o.classList.add("popupChoice__btnChoice"),o.classList.add("popupChoice__btnChoice--rouge"),o.textContent="Refuser",i.appendChild(o),o.addEventListener("click",(function(e){console.log("Je refuse, je suis un connard"),n.classList.add("popupChoice__animSortie");yv(e.target.parentNode.parentNode,!1)}))}};function yv(e,t){localStorage.setItem("Choix de l'utilisateur",t),setTimeout((function(){document.querySelector(".popupChoice").parentNode.removeChild(e),console.log("yes, un connard en moins ")}),810)}function vv(){var e=localStorage.getItem("class"),t=document.querySelector(".not__here"),n=document.querySelector(".slider__element--show"),r=document.querySelector(".slide__command");if("bois"==n.title&&"bucherons"==e){r.style.opacity=1,t.style.opacity=0;return!0}if(r.style.opacity=0,t.style.opacity=1,"Paysans"==n.title&&"Paysans"==e){r.style.opacity=1,t.style.opacity=0;return!0}if(r.style.opacity=0,t.style.opacity=1,"carrière"==n.title&&"caristes"==e){r.style.opacity=1,t.style.opacity=0;return!0}if(r.style.opacity=0,t.style.opacity=1,"mine"==n.title&&"mineurs"==e){r.style.opacity=1,t.style.opacity=0;return!0}r.style.opacity=0,t.style.opacity=1}function wv(){var e=document.querySelector(".slider__element--show"),t=document.querySelector("#actionPerso");"mine"==e.title?t.innerHTML="Aller fracasser des cailloux":"carrière"==e.title?t.innerHTML="Aller fracasser des pierres":"Paysans"==e.title?t.innerHTML="Aller travailler la terre ":"bois"==e.title&&(t.innerHTML="Aller couper des arbres ")}function bv(e){e<=100&&e>=80?(setTimeout((function(){e+=20,barreenergieperso.innerHTML=e}),6e5),setTimeout((function(){e+=20,barreenergieperso.innerHTML=e}),12e5)):100==e?setTimeout((function(){e+=20,barreenergieperso.innerHTML=e}),6e5):e<=80&&e>=60?(setTimeout((function(){e+=20,barreenergieperso.innerHTML=e}),6e5),setTimeout((function(){e+=20,barreenergieperso.innerHTML=e}),12e5),setTimeout((function(){e+=20,barreenergieperso.innerHTML=e}),18e5)):e<=60&&e>=40?(setTimeout((function(){e+=20,barreenergieperso.innerHTML=e}),6e5),setTimeout((function(){e+=20,barreenergieperso.innerHTML=e}),12e5),setTimeout((function(){e+=20,barreenergieperso.innerHTML=e}),18e5),setTimeout((function(){e+=20,barreenergieperso.innerHTML=e}),24e5)):e<=40&&e>=20?(setTimeout((function(){e+=20,barreenergieperso.innerHTML=e}),6e5),setTimeout((function(){e+=20,barreenergieperso.innerHTML=e}),12e5),setTimeout((function(){e+=20,barreenergieperso.innerHTML=e}),18e5),setTimeout((function(){e+=20,barreenergieperso.innerHTML=e}),24e5),setTimeout((function(){e+=20,barreenergieperso.innerHTML=e}),3e6)):e<=20&&e>=0&&(setTimeout((function(){e+=20,barreenergieperso.innerHTML=e}),6e5),setTimeout((function(){e+=20,barreenergieperso.innerHTML=e}),12e5),setTimeout((function(){e+=20,barreenergieperso.innerHTML=e}),18e5),setTimeout((function(){e+=20,barreenergieperso.innerHTML=e}),24e5),setTimeout((function(){e+=20,barreenergieperso.innerHTML=e}),3e6),setTimeout((function(){e+=20,barreenergieperso.innerHTML=e}),36e5))}n(526);console.info("Hello world"),document.querySelector(".nav__button").addEventListener("click",(function(e){if(e.target.classList.contains("nav__button--logout"))fv();else{dv(),function(e,t,n,r){A(e).onAuthStateChanged(t,n,r)}(ym,(function(e){e?(console.log(e.email),lv.dispatch(tv({uid:e.uid,photo:e.photoURL,email:e.email,displayName:e.displayName})),console.log(e.email)):lv.dispatch(nv())})),console.log(lv.getState());var t=lv.getState().user;console.table(t.user)}hm(mg(wm,"dataRange"),(function(e){lv.dispatch(uv(e.docs.map((function(e){return{id:e.id,data:e.data()}})),e.docs.forEach((function(e){console.log(e.data())}))))}));var n=document.querySelectorAll(".nav__rangeINto"),r=0;n.forEach((function(e){0==r?(e.style.width=parseInt(lv.getState().dataPerso.dataUser[0].data.nourriture,10)+"%",r++):1==r?(e.style.width=parseInt(lv.getState().dataPerso.dataUser[0].data.materiaux,10)+"%",r++):2==r?(e.style.width=parseInt(lv.getState().dataPerso.dataUser[0].data.bonheur,10)+"%",r++):3==r?(e.style.width=parseInt(lv.getState().dataPerso.dataUser[0].data.argent,10)+"%",r++):4==r?(e.style.width=parseInt(lv.getState().dataPerso.dataUser[0].data.nourriture,10)+"%",r++):5==r?(e.style.width=parseInt(lv.getState().dataPerso.dataUser[0].data.materiaux,10)+"%",r++):6==r?(e.style.width=parseInt(lv.getState().dataPerso.dataUser[0].data.bonheur,10)+"%",r++):7==r?(e.style.width=parseInt(lv.getState().dataPerso.dataUser[0].data.argent,10)+"%",r++):8==r?(e.style.width=parseInt(lv.getState().dataPerso.dataUser[0].data.nourriture,10)+"%",r++):9==r?(e.style.width=parseInt(lv.getState().dataPerso.dataUser[0].data.materiaux,10)+"%",r++):10==r?(e.style.width=parseInt(lv.getState().dataPerso.dataUser[0].data.bonheur,10)+"%",r++):11==r?(e.style.width=parseInt(lv.getState().dataPerso.dataUser[0].data.argent,10)+"%",r++):12==r?(e.style.width=parseInt(lv.getState().dataPerso.dataUser[0].data.nourriture,10)+"%",r++):13==r?(e.style.width=parseInt(lv.getState().dataPerso.dataUser[0].data.materiaux,10)+"%",r++):14==r?(e.style.width=parseInt(lv.getState().dataPerso.dataUser[0].data.bonheur,10)+"%",r++):15==r?(e.style.width=parseInt(lv.getState().dataPerso.dataUser[0].data.argent,10)+"%",r++):16==r?(e.style.width=parseInt(lv.getState().dataPerso.dataUser[0].data.nourriture,10)+"%",r++):17==r?(e.style.width=parseInt(lv.getState().dataPerso.dataUser[0].data.materiaux,10)+"%",r++):18==r?(e.style.width=parseInt(lv.getState().dataPerso.dataUser[0].data.bonheur,10)+"%",r++):19==r&&(e.style.width=parseInt(lv.getState().dataPerso.dataUser[0].data.argent,10)+"%",r++)}))})),hm(mg(wm,"dataRange"),(function(e){lv.dispatch(uv(e.docs.map((function(e){return{id:e.id,data:e.data()}})),e.docs.forEach((function(e){console.log(e.data())}))))})),function(){var e=document.querySelectorAll(".nav__rangeINto"),t=0,n=[50,50,50,50];setTimeout((function(){!function(){var e=document.querySelectorAll(".game__boxNav"),t=["Nouriture","Materiaux","Satisfaction","Argent"],n=[50,50,50,50];e.forEach((function(e){var r=document.createElement("ul");r.classList.add("nav__range"),e.appendChild(r);for(var i=0;i<=3;i++)new pv(r,t[i],n[i])}))}()}),10),e.forEach((function(e){if(console.log(e.title),n[t]<30){e.style.backgroundColor="#FF0F00",e.style.width=n[t]+"%";var r=document.createElement("div");r.classList.add("range__popUp"),document.querySelector("body").appendChild(r);var i=document.createElement("p");i.innerText="Vous allez être en pénurie dans "+e.title,r.appendChild(i);var s=document.createElement("button");s.classList.add("range__btn"),s.textContent="X",r.appendChild(s),s.addEventListener("click",(function(){r.classList.add("range__animFin"),setTimeout((function(){r.style.display="none"}),600)})),3===t?t=0:t++}else e.style.backgroundColor="#A6DC61",e.style.width=n[t]+"%",3===t?t=0:t++}))}(),function(){var e=120,t=0,n=document.querySelector("#actionPerso"),r=document.querySelector("#enrgie"),i=document.querySelector("#dodo");r.innerHTML=e;var s=document.querySelector("#bonheur");setTimeout((function(){wv(),vv();for(var e=["Nouriture","Materiaux","Satisfaction","Argent"],t=0;t<3;t++)localStorage.setItem(e[t]+"width",50)}),10),n.addEventListener("click",(function(){var i=document.querySelector(".slider__element--show");if(e-=20,0==t)if(t=1,lm(mg(wm,"works",lv.getState().user.user.uid,"enCours"),{timestamp:pm(),name:localStorage.getItem("pseudo"),uid:lv.getState().user.user.uid,metier:localStorage.getItem("class"),lieux:i.title,travail:!0}),lm(mg(wm,"works","mine","enCours"),{timestamp:pm(),name:localStorage.getItem("pseudo"),uid:lv.getState().user.user.uid,travail:!0}),localStorage.setItem("valueBtnAction",n.innerHTML),n.innerHTML="Tu dois attendre pour travailler",setTimeout((function(){n.innerHTML=localStorage.getItem("valueBtnAction"),t=0,console.log(t)}),3e4),console.log(t),e<=0)r.innerHTML=0,alert("Tu nas plus dernergie !!");else{if(r.innerHTML=e,"Paysans"==localStorage.getItem("class"))var s=" les champs";else if("bucherons"==localStorage.getItem("class"))s=" les bois";else if("mineurs"==localStorage.getItem("class"))s=" les mines";else if("caristes"==localStorage.getItem("class"))s=" les carrières";gv("Tu es parti travailler dans"+s+"!",!1),gv(localStorage.getItem("pseudo")+" +5 matériaux / -1 nourriture /-1 bonheur /-5 argent",!1),vv(),function(e){var t=document.querySelectorAll(".nav__rangeINto");if("Paysans"==localStorage.getItem("class"))e=[-1,15,-1,-5,-1,15,-1,-5,-1,15,-1,-5,-1,15,-1,-5,-1,15,-1,-5];else if("bucherons"==localStorage.getItem("class"))e=[-1,5,-1,-5,-1,5,-1,-5,-1,5,-1,-5,-1,5,-1,-5,-1,5,-1,-5];else if("mineurs"==localStorage.getItem("class"))e=[-3,-5,-1,5,-3,-5,-1,5,-3,-5,-1,5,-3,-5,-1,5,-3,-5,-1,5];else if("caristes"==localStorage.getItem("class"))e=[-3,5,-1,-5,-3,5,-1,-5,-3,5,-1,-5,-3,5,-1,-5,-3,5,-1,-5];var n=0;t.forEach((function(t){var r=t.style.width,i=(r=parseInt(r,10))+e[n];console.log(i),t.style.width=i+"%",n++,console.log(n)}));for(var r=["nourritureWidth","materiauxWidth","bonheurWidth","argentWidth"],i=0;i<4;i++){var s=t[i].style.width;s=parseInt(s,10),localStorage.setItem(r[i],s)}(function(e,t,n){e=cg(e,fg);const r=cg(e.firestore,Ag),i=rm(e.converter,t,n);dm(r,[Bg(Vg(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Eh.none())])})(yg(wm,"dataRange","3zZic48M0XGDkHI9AyCr"),{nourriture:localStorage.getItem("nourritureWidth"),materiaux:localStorage.getItem("materiauxWidth"),bonheur:localStorage.getItem("bonheurWidth"),argent:localStorage.getItem("argentWidth")}),hm(mg(wm,"dataRange"),(function(e){lv.dispatch(uv(e.docs.map((function(e){return{id:e.id,data:e.data()}})),e.docs.forEach((function(e){console.log(e.data())}))))})),console.log(lv.getState().dataPerso.dataUser)}()}else alert("Tu travail déjà !!")}));var o=!0;localStorage.setItem("rangeBonheur",50),s.addEventListener("click",(function(){hv();var e=localStorage.getItem("rangeBonheur");e=parseInt(e)+1,console.log(e),localStorage.setItem("rangeBonheur",e);var t=document.querySelectorAll(".nav__rangeINto");t[2].style.width=e+"%",t[6].style.width=e+"%",t[10].style.width=e+"%",t[13].style.width=e+"%",t[17].style.width=e+"%",gv(localStorage.getItem("pseudo")+" rend heureux le groupe.",!1),!0===o&&(o=!1,setTimeout((function(){o=!0,console.log("le dodo est fini")}),100))})),i.addEventListener("click",(function(){bv(e),gv(localStorage.getItem("pseudo")+" se repose.",!1)})),document.querySelectorAll(".nav__item").forEach((function(e){e.addEventListener("click",(function(){setTimeout((function(){vv(),wv()}),10)}))}))}();var Iv=["caristes","bucherons","capital","mineurs","Paysans"];if(localStorage.getItem("class")){if("Paysans"===localStorage.getItem("class"))var Ev=4;else if("mineurs"===localStorage.getItem("class"))Ev=3;else if("bucherons"===localStorage.getItem("class"))Ev=1;else if("caristes"===localStorage.getItem("class"))Ev=0;Ev=Iv[Ev]}var Tv=document.querySelectorAll(".action"),_v=document.querySelectorAll(".slider__element");Tv[Iv.indexOf(Ev)].classList.add("action--active"),_v[Iv.indexOf(Ev)].classList.add("slider__element--show");for(var Sv=function(e){Tv[e].addEventListener("click",(function(){for(var t=0;t<_v.length;t++)_v[t].classList.remove("slider__element--show"),Tv[t].classList.remove("action--active");e==Iv.indexOf(Ev)?(_v[e].classList.add("slider__main"),console.log(Iv.indexOf(Ev))):(_v[Iv.indexOf(Ev)].classList.remove("slider__main"),console.log(e==Iv.indexOf(Ev)));Tv[e].classList.add("action--active"),_v[e].classList.add("slider__element--show")}))},kv=0;kv<Tv.length;kv++)Sv(kv);for(var Cv=document.querySelectorAll(".zone--travail"),Av=document.querySelectorAll(".oui--travail"),Ov=0;Ov<Cv.length;Ov++){Cv[Ov].addEventListener("mouseover",(function(){for(var e=0;e<Av.length;e++)Av[e].classList.add("oui--active")})),Cv[Ov].addEventListener("mouseout",(function(){for(var e=0;e<Av.length;e++)Av[e].classList.remove("oui--active")}))}for(var Nv=document.querySelectorAll(".zone--repos"),Dv=document.querySelectorAll(".oui--repos"),Rv=0;Rv<Nv.length;Rv++){Nv[Rv].addEventListener("mouseover",(function(){for(var e=0;e<Dv.length;e++)Dv[e].classList.add("oui--active")})),Nv[Rv].addEventListener("mouseout",(function(){for(var e=0;e<Dv.length;e++)Dv[e].classList.remove("oui--active")}))}for(var Pv=document.querySelectorAll(".zone--détente"),Lv=document.querySelectorAll(".oui--détente"),Mv=0;Mv<Pv.length;Mv++){Pv[Mv].addEventListener("mouseover",(function(){for(var e=0;e<Lv.length;e++)Lv[e].classList.add("oui--active")})),Pv[Mv].addEventListener("mouseout",(function(){for(var e=0;e<Lv.length;e++)Lv[e].classList.remove("oui--active")}))}},61:(e,t,n)=>{"use strict";const r=n(434),{stdout:i,stderr:s}=n(555),{stringReplaceAll:o,stringEncaseCRLFWithFirstIndex:a}=n(559),{isArray:c}=Array,u=["ansi","ansi","ansi256","ansi16m"],l=Object.create(null);class h{constructor(e){return d(e)}}const d=e=>{const t={};return((e,t={})=>{if(t.level&&!(Number.isInteger(t.level)&&t.level>=0&&t.level<=3))throw new Error("The `level` option should be an integer from 0 to 3");const n=i?i.level:0;e.level=void 0===t.level?n:t.level})(t,e),t.template=(...e)=>b(t.template,...e),Object.setPrototypeOf(t,f.prototype),Object.setPrototypeOf(t.template,t),t.template.constructor=()=>{throw new Error("`chalk.constructor()` is deprecated. Use `new chalk.Instance()` instead.")},t.template.Instance=h,t.template};function f(e){return d(e)}for(const[e,t]of Object.entries(r))l[e]={get(){const n=y(this,m(t.open,t.close,this._styler),this._isEmpty);return Object.defineProperty(this,e,{value:n}),n}};l.visible={get(){const e=y(this,this._styler,!0);return Object.defineProperty(this,"visible",{value:e}),e}};const p=["rgb","hex","keyword","hsl","hsv","hwb","ansi","ansi256"];for(const e of p)l[e]={get(){const{level:t}=this;return function(...n){const i=m(r.color[u[t]][e](...n),r.color.close,this._styler);return y(this,i,this._isEmpty)}}};for(const e of p){l["bg"+e[0].toUpperCase()+e.slice(1)]={get(){const{level:t}=this;return function(...n){const i=m(r.bgColor[u[t]][e](...n),r.bgColor.close,this._styler);return y(this,i,this._isEmpty)}}}}const g=Object.defineProperties((()=>{}),{...l,level:{enumerable:!0,get(){return this._generator.level},set(e){this._generator.level=e}}}),m=(e,t,n)=>{let r,i;return void 0===n?(r=e,i=t):(r=n.openAll+e,i=t+n.closeAll),{open:e,close:t,openAll:r,closeAll:i,parent:n}},y=(e,t,n)=>{const r=(...e)=>c(e[0])&&c(e[0].raw)?v(r,b(r,...e)):v(r,1===e.length?""+e[0]:e.join(" "));return Object.setPrototypeOf(r,g),r._generator=e,r._styler=t,r._isEmpty=n,r},v=(e,t)=>{if(e.level<=0||!t)return e._isEmpty?"":t;let n=e._styler;if(void 0===n)return t;const{openAll:r,closeAll:i}=n;if(-1!==t.indexOf(""))for(;void 0!==n;)t=o(t,n.close,n.open),n=n.parent;const s=t.indexOf("\n");return-1!==s&&(t=a(t,i,r,s)),r+t+i};let w;const b=(e,...t)=>{const[r]=t;if(!c(r)||!c(r.raw))return t.join(" ");const i=t.slice(1),s=[r.raw[0]];for(let e=1;e<r.length;e++)s.push(String(i[e-1]).replace(/[{}\\]/g,"\\$&"),String(r.raw[e]));return void 0===w&&(w=n(515)),w(e,s.join(""))};Object.defineProperties(f.prototype,l);const I=f();I.supportsColor=i,I.stderr=f({level:s?s.level:0}),I.stderr.supportsColor=s,e.exports=I},515:e=>{"use strict";const t=/(?:\\(u(?:[a-f\d]{4}|\{[a-f\d]{1,6}\})|x[a-f\d]{2}|.))|(?:\{(~)?(\w+(?:\([^)]*\))?(?:\.\w+(?:\([^)]*\))?)*)(?:[ \t]|(?=\r?\n)))|(\})|((?:.|[\r\n\f])+?)/gi,n=/(?:^|\.)(\w+)(?:\(([^)]*)\))?/g,r=/^(['"])((?:\\.|(?!\1)[^\\])*)\1$/,i=/\\(u(?:[a-f\d]{4}|{[a-f\d]{1,6}})|x[a-f\d]{2}|.)|([^\\])/gi,s=new Map([["n","\n"],["r","\r"],["t","\t"],["b","\b"],["f","\f"],["v","\v"],["0","\0"],["\\","\\"],["e",""],["a",""]]);function o(e){const t="u"===e[0],n="{"===e[1];return t&&!n&&5===e.length||"x"===e[0]&&3===e.length?String.fromCharCode(parseInt(e.slice(1),16)):t&&n?String.fromCodePoint(parseInt(e.slice(2,-1),16)):s.get(e)||e}function a(e,t){const n=[],s=t.trim().split(/\s*,\s*/g);let a;for(const t of s){const s=Number(t);if(Number.isNaN(s)){if(!(a=t.match(r)))throw new Error(`Invalid Chalk template style argument: ${t} (in style '${e}')`);n.push(a[2].replace(i,((e,t,n)=>t?o(t):n)))}else n.push(s)}return n}function c(e){n.lastIndex=0;const t=[];let r;for(;null!==(r=n.exec(e));){const e=r[1];if(r[2]){const n=a(e,r[2]);t.push([e].concat(n))}else t.push([e])}return t}function u(e,t){const n={};for(const e of t)for(const t of e.styles)n[t[0]]=e.inverse?null:t.slice(1);let r=e;for(const[e,t]of Object.entries(n))if(Array.isArray(t)){if(!(e in r))throw new Error(`Unknown Chalk style: ${e}`);r=t.length>0?r[e](...t):r[e]}return r}e.exports=(e,n)=>{const r=[],i=[];let s=[];if(n.replace(t,((t,n,a,l,h,d)=>{if(n)s.push(o(n));else if(l){const t=s.join("");s=[],i.push(0===r.length?t:u(e,r)(t)),r.push({inverse:a,styles:c(l)})}else if(h){if(0===r.length)throw new Error("Found extraneous } in Chalk template literal");i.push(u(e,r)(s.join(""))),s=[],r.pop()}else s.push(d)})),i.push(s.join("")),r.length>0){const e=`Chalk template literal is missing ${r.length} closing bracket${1===r.length?"":"s"} (\`}\`)`;throw new Error(e)}return i.join("")}},559:e=>{"use strict";e.exports={stringReplaceAll:(e,t,n)=>{let r=e.indexOf(t);if(-1===r)return e;const i=t.length;let s=0,o="";do{o+=e.substr(s,r-s)+t+n,s=r+i,r=e.indexOf(t,s)}while(-1!==r);return o+=e.substr(s),o},stringEncaseCRLFWithFirstIndex:(e,t,n,r)=>{let i=0,s="";do{const o="\r"===e[r-1];s+=e.substr(i,(o?r-1:r)-i)+t+(o?"\r\n":"\n")+n,i=r+1,r=e.indexOf("\n",i)}while(-1!==r);return s+=e.substr(i),s}}},168:(e,t,n)=>{const r=n(874),i={};for(const e of Object.keys(r))i[r[e]]=e;const s={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};e.exports=s;for(const e of Object.keys(s)){if(!("channels"in s[e]))throw new Error("missing channels property: "+e);if(!("labels"in s[e]))throw new Error("missing channel labels property: "+e);if(s[e].labels.length!==s[e].channels)throw new Error("channel and label counts mismatch: "+e);const{channels:t,labels:n}=s[e];delete s[e].channels,delete s[e].labels,Object.defineProperty(s[e],"channels",{value:t}),Object.defineProperty(s[e],"labels",{value:n})}s.rgb.hsl=function(e){const t=e[0]/255,n=e[1]/255,r=e[2]/255,i=Math.min(t,n,r),s=Math.max(t,n,r),o=s-i;let a,c;s===i?a=0:t===s?a=(n-r)/o:n===s?a=2+(r-t)/o:r===s&&(a=4+(t-n)/o),a=Math.min(60*a,360),a<0&&(a+=360);const u=(i+s)/2;return c=s===i?0:u<=.5?o/(s+i):o/(2-s-i),[a,100*c,100*u]},s.rgb.hsv=function(e){let t,n,r,i,s;const o=e[0]/255,a=e[1]/255,c=e[2]/255,u=Math.max(o,a,c),l=u-Math.min(o,a,c),h=function(e){return(u-e)/6/l+.5};return 0===l?(i=0,s=0):(s=l/u,t=h(o),n=h(a),r=h(c),o===u?i=r-n:a===u?i=1/3+t-r:c===u&&(i=2/3+n-t),i<0?i+=1:i>1&&(i-=1)),[360*i,100*s,100*u]},s.rgb.hwb=function(e){const t=e[0],n=e[1];let r=e[2];const i=s.rgb.hsl(e)[0],o=1/255*Math.min(t,Math.min(n,r));return r=1-1/255*Math.max(t,Math.max(n,r)),[i,100*o,100*r]},s.rgb.cmyk=function(e){const t=e[0]/255,n=e[1]/255,r=e[2]/255,i=Math.min(1-t,1-n,1-r);return[100*((1-t-i)/(1-i)||0),100*((1-n-i)/(1-i)||0),100*((1-r-i)/(1-i)||0),100*i]},s.rgb.keyword=function(e){const t=i[e];if(t)return t;let n,s=1/0;for(const t of Object.keys(r)){const i=r[t],c=(a=i,((o=e)[0]-a[0])**2+(o[1]-a[1])**2+(o[2]-a[2])**2);c<s&&(s=c,n=t)}var o,a;return n},s.keyword.rgb=function(e){return r[e]},s.rgb.xyz=function(e){let t=e[0]/255,n=e[1]/255,r=e[2]/255;t=t>.04045?((t+.055)/1.055)**2.4:t/12.92,n=n>.04045?((n+.055)/1.055)**2.4:n/12.92,r=r>.04045?((r+.055)/1.055)**2.4:r/12.92;return[100*(.4124*t+.3576*n+.1805*r),100*(.2126*t+.7152*n+.0722*r),100*(.0193*t+.1192*n+.9505*r)]},s.rgb.lab=function(e){const t=s.rgb.xyz(e);let n=t[0],r=t[1],i=t[2];n/=95.047,r/=100,i/=108.883,n=n>.008856?n**(1/3):7.787*n+16/116,r=r>.008856?r**(1/3):7.787*r+16/116,i=i>.008856?i**(1/3):7.787*i+16/116;return[116*r-16,500*(n-r),200*(r-i)]},s.hsl.rgb=function(e){const t=e[0]/360,n=e[1]/100,r=e[2]/100;let i,s,o;if(0===n)return o=255*r,[o,o,o];i=r<.5?r*(1+n):r+n-r*n;const a=2*r-i,c=[0,0,0];for(let e=0;e<3;e++)s=t+1/3*-(e-1),s<0&&s++,s>1&&s--,o=6*s<1?a+6*(i-a)*s:2*s<1?i:3*s<2?a+(i-a)*(2/3-s)*6:a,c[e]=255*o;return c},s.hsl.hsv=function(e){const t=e[0];let n=e[1]/100,r=e[2]/100,i=n;const s=Math.max(r,.01);r*=2,n*=r<=1?r:2-r,i*=s<=1?s:2-s;return[t,100*(0===r?2*i/(s+i):2*n/(r+n)),100*((r+n)/2)]},s.hsv.rgb=function(e){const t=e[0]/60,n=e[1]/100;let r=e[2]/100;const i=Math.floor(t)%6,s=t-Math.floor(t),o=255*r*(1-n),a=255*r*(1-n*s),c=255*r*(1-n*(1-s));switch(r*=255,i){case 0:return[r,c,o];case 1:return[a,r,o];case 2:return[o,r,c];case 3:return[o,a,r];case 4:return[c,o,r];case 5:return[r,o,a]}},s.hsv.hsl=function(e){const t=e[0],n=e[1]/100,r=e[2]/100,i=Math.max(r,.01);let s,o;o=(2-n)*r;const a=(2-n)*i;return s=n*i,s/=a<=1?a:2-a,s=s||0,o/=2,[t,100*s,100*o]},s.hwb.rgb=function(e){const t=e[0]/360;let n=e[1]/100,r=e[2]/100;const i=n+r;let s;i>1&&(n/=i,r/=i);const o=Math.floor(6*t),a=1-r;s=6*t-o,0!=(1&o)&&(s=1-s);const c=n+s*(a-n);let u,l,h;switch(o){default:case 6:case 0:u=a,l=c,h=n;break;case 1:u=c,l=a,h=n;break;case 2:u=n,l=a,h=c;break;case 3:u=n,l=c,h=a;break;case 4:u=c,l=n,h=a;break;case 5:u=a,l=n,h=c}return[255*u,255*l,255*h]},s.cmyk.rgb=function(e){const t=e[0]/100,n=e[1]/100,r=e[2]/100,i=e[3]/100;return[255*(1-Math.min(1,t*(1-i)+i)),255*(1-Math.min(1,n*(1-i)+i)),255*(1-Math.min(1,r*(1-i)+i))]},s.xyz.rgb=function(e){const t=e[0]/100,n=e[1]/100,r=e[2]/100;let i,s,o;return i=3.2406*t+-1.5372*n+-.4986*r,s=-.9689*t+1.8758*n+.0415*r,o=.0557*t+-.204*n+1.057*r,i=i>.0031308?1.055*i**(1/2.4)-.055:12.92*i,s=s>.0031308?1.055*s**(1/2.4)-.055:12.92*s,o=o>.0031308?1.055*o**(1/2.4)-.055:12.92*o,i=Math.min(Math.max(0,i),1),s=Math.min(Math.max(0,s),1),o=Math.min(Math.max(0,o),1),[255*i,255*s,255*o]},s.xyz.lab=function(e){let t=e[0],n=e[1],r=e[2];t/=95.047,n/=100,r/=108.883,t=t>.008856?t**(1/3):7.787*t+16/116,n=n>.008856?n**(1/3):7.787*n+16/116,r=r>.008856?r**(1/3):7.787*r+16/116;return[116*n-16,500*(t-n),200*(n-r)]},s.lab.xyz=function(e){let t,n,r;n=(e[0]+16)/116,t=e[1]/500+n,r=n-e[2]/200;const i=n**3,s=t**3,o=r**3;return n=i>.008856?i:(n-16/116)/7.787,t=s>.008856?s:(t-16/116)/7.787,r=o>.008856?o:(r-16/116)/7.787,t*=95.047,n*=100,r*=108.883,[t,n,r]},s.lab.lch=function(e){const t=e[0],n=e[1],r=e[2];let i;i=360*Math.atan2(r,n)/2/Math.PI,i<0&&(i+=360);return[t,Math.sqrt(n*n+r*r),i]},s.lch.lab=function(e){const t=e[0],n=e[1],r=e[2]/360*2*Math.PI;return[t,n*Math.cos(r),n*Math.sin(r)]},s.rgb.ansi16=function(e,t=null){const[n,r,i]=e;let o=null===t?s.rgb.hsv(e)[2]:t;if(o=Math.round(o/50),0===o)return 30;let a=30+(Math.round(i/255)<<2|Math.round(r/255)<<1|Math.round(n/255));return 2===o&&(a+=60),a},s.hsv.ansi16=function(e){return s.rgb.ansi16(s.hsv.rgb(e),e[2])},s.rgb.ansi256=function(e){const t=e[0],n=e[1],r=e[2];if(t===n&&n===r)return t<8?16:t>248?231:Math.round((t-8)/247*24)+232;return 16+36*Math.round(t/255*5)+6*Math.round(n/255*5)+Math.round(r/255*5)},s.ansi16.rgb=function(e){let t=e%10;if(0===t||7===t)return e>50&&(t+=3.5),t=t/10.5*255,[t,t,t];const n=.5*(1+~~(e>50));return[(1&t)*n*255,(t>>1&1)*n*255,(t>>2&1)*n*255]},s.ansi256.rgb=function(e){if(e>=232){const t=10*(e-232)+8;return[t,t,t]}let t;e-=16;return[Math.floor(e/36)/5*255,Math.floor((t=e%36)/6)/5*255,t%6/5*255]},s.rgb.hex=function(e){const t=(((255&Math.round(e[0]))<<16)+((255&Math.round(e[1]))<<8)+(255&Math.round(e[2]))).toString(16).toUpperCase();return"000000".substring(t.length)+t},s.hex.rgb=function(e){const t=e.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!t)return[0,0,0];let n=t[0];3===t[0].length&&(n=n.split("").map((e=>e+e)).join(""));const r=parseInt(n,16);return[r>>16&255,r>>8&255,255&r]},s.rgb.hcg=function(e){const t=e[0]/255,n=e[1]/255,r=e[2]/255,i=Math.max(Math.max(t,n),r),s=Math.min(Math.min(t,n),r),o=i-s;let a,c;return a=o<1?s/(1-o):0,c=o<=0?0:i===t?(n-r)/o%6:i===n?2+(r-t)/o:4+(t-n)/o,c/=6,c%=1,[360*c,100*o,100*a]},s.hsl.hcg=function(e){const t=e[1]/100,n=e[2]/100,r=n<.5?2*t*n:2*t*(1-n);let i=0;return r<1&&(i=(n-.5*r)/(1-r)),[e[0],100*r,100*i]},s.hsv.hcg=function(e){const t=e[1]/100,n=e[2]/100,r=t*n;let i=0;return r<1&&(i=(n-r)/(1-r)),[e[0],100*r,100*i]},s.hcg.rgb=function(e){const t=e[0]/360,n=e[1]/100,r=e[2]/100;if(0===n)return[255*r,255*r,255*r];const i=[0,0,0],s=t%1*6,o=s%1,a=1-o;let c=0;switch(Math.floor(s)){case 0:i[0]=1,i[1]=o,i[2]=0;break;case 1:i[0]=a,i[1]=1,i[2]=0;break;case 2:i[0]=0,i[1]=1,i[2]=o;break;case 3:i[0]=0,i[1]=a,i[2]=1;break;case 4:i[0]=o,i[1]=0,i[2]=1;break;default:i[0]=1,i[1]=0,i[2]=a}return c=(1-n)*r,[255*(n*i[0]+c),255*(n*i[1]+c),255*(n*i[2]+c)]},s.hcg.hsv=function(e){const t=e[1]/100,n=t+e[2]/100*(1-t);let r=0;return n>0&&(r=t/n),[e[0],100*r,100*n]},s.hcg.hsl=function(e){const t=e[1]/100,n=e[2]/100*(1-t)+.5*t;let r=0;return n>0&&n<.5?r=t/(2*n):n>=.5&&n<1&&(r=t/(2*(1-n))),[e[0],100*r,100*n]},s.hcg.hwb=function(e){const t=e[1]/100,n=t+e[2]/100*(1-t);return[e[0],100*(n-t),100*(1-n)]},s.hwb.hcg=function(e){const t=e[1]/100,n=1-e[2]/100,r=n-t;let i=0;return r<1&&(i=(n-r)/(1-r)),[e[0],100*r,100*i]},s.apple.rgb=function(e){return[e[0]/65535*255,e[1]/65535*255,e[2]/65535*255]},s.rgb.apple=function(e){return[e[0]/255*65535,e[1]/255*65535,e[2]/255*65535]},s.gray.rgb=function(e){return[e[0]/100*255,e[0]/100*255,e[0]/100*255]},s.gray.hsl=function(e){return[0,0,e[0]]},s.gray.hsv=s.gray.hsl,s.gray.hwb=function(e){return[0,100,e[0]]},s.gray.cmyk=function(e){return[0,0,0,e[0]]},s.gray.lab=function(e){return[e[0],0,0]},s.gray.hex=function(e){const t=255&Math.round(e[0]/100*255),n=((t<<16)+(t<<8)+t).toString(16).toUpperCase();return"000000".substring(n.length)+n},s.rgb.gray=function(e){return[(e[0]+e[1]+e[2])/3/255*100]}},85:(e,t,n)=>{const r=n(168),i=n(111),s={};Object.keys(r).forEach((e=>{s[e]={},Object.defineProperty(s[e],"channels",{value:r[e].channels}),Object.defineProperty(s[e],"labels",{value:r[e].labels});const t=i(e);Object.keys(t).forEach((n=>{const r=t[n];s[e][n]=function(e){const t=function(...t){const n=t[0];if(null==n)return n;n.length>1&&(t=n);const r=e(t);if("object"==typeof r)for(let e=r.length,t=0;t<e;t++)r[t]=Math.round(r[t]);return r};return"conversion"in e&&(t.conversion=e.conversion),t}(r),s[e][n].raw=function(e){const t=function(...t){const n=t[0];return null==n?n:(n.length>1&&(t=n),e(t))};return"conversion"in e&&(t.conversion=e.conversion),t}(r)}))})),e.exports=s},111:(e,t,n)=>{const r=n(168);function i(e){const t=function(){const e={},t=Object.keys(r);for(let n=t.length,r=0;r<n;r++)e[t[r]]={distance:-1,parent:null};return e}(),n=[e];for(t[e].distance=0;n.length;){const e=n.pop(),i=Object.keys(r[e]);for(let r=i.length,s=0;s<r;s++){const r=i[s],o=t[r];-1===o.distance&&(o.distance=t[e].distance+1,o.parent=e,n.unshift(r))}}return t}function s(e,t){return function(n){return t(e(n))}}function o(e,t){const n=[t[e].parent,e];let i=r[t[e].parent][e],o=t[e].parent;for(;t[o].parent;)n.unshift(t[o].parent),i=s(r[t[o].parent][o],i),o=t[o].parent;return i.conversion=n,i}e.exports=function(e){const t=i(e),n={},r=Object.keys(t);for(let e=r.length,i=0;i<e;i++){const e=r[i];null!==t[e].parent&&(n[e]=o(e,t))}return n}},874:e=>{"use strict";e.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},526:(e,t,n)=>{const r=n(61);class i{static testing=!1;static fakedLogs=[];static info(e,t="default"){i.testing?i.fakedLogs.push(e):(console.log(i.colors()[t],e),i.reset())}static message(e){if(i.testing)return void i.fakedLogs.push(e.text);let t="";"info"===e.type?t=" INFO ":"warn"===e.type?t=" WARN ":"error"===e.type&&(t=" ERR ");const n=e.text.replace(/\n/g,"\n"+" ".repeat(t.length+1));"info"===e.type?console.warn(`${r.bgBlue.white(t)} ${r.white(n)}`):"warn"===e.type?console.warn(`${r.bgYellow.black(t)} ${r.yellow(n)}`):"error"===e.type&&console.warn(`${r.bgRed.white(t)} ${r.red(n)}`)}static feedback(e,t="green"){i.line("\t"+e,t)}static error(e,t="red"){i.line(e,t)}static line(e,t="default"){i.info(e,t)}static reset(){console.log(i.colors().default,"")}static fake(){i.testing=!0}static restore(){i.testing=!1,i.fakedLogs=[]}static received(e){let t=i.fakedLogs.some((t=>t.includes(e)));return i.restore(),t}static colors(){return{default:"[0m",green:"[32m",red:"[31m"}}}e.exports=i},348:()=>{},155:e=>{var t,n,r=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function o(e){if(t===setTimeout)return setTimeout(e,0);if((t===i||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:i}catch(e){t=i}try{n="function"==typeof clearTimeout?clearTimeout:s}catch(e){n=s}}();var a,c=[],u=!1,l=-1;function h(){u&&a&&(u=!1,a.length?c=a.concat(c):l=-1,c.length&&d())}function d(){if(!u){var e=o(h);u=!0;for(var t=c.length;t;){for(a=c,c=[];++l<t;)a&&a[l].run();l=-1,t=c.length}a=null,u=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===s||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function p(){}r.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new f(e,t)),1!==c.length||u||o(d)},f.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=p,r.addListener=p,r.once=p,r.off=p,r.removeListener=p,r.removeAllListeners=p,r.emit=p,r.prependListener=p,r.prependOnceListener=p,r.listeners=function(e){return[]},r.binding=function(e){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},555:e=>{"use strict";e.exports={stdout:!1,stderr:!1}}},n={};function r(e){var i=n[e];if(void 0!==i)return i.exports;var s=n[e]={id:e,loaded:!1,exports:{}};return t[e](s,s.exports,r),s.loaded=!0,s.exports}r.m=t,e=[],r.O=(t,n,i,s)=>{if(!n){var o=1/0;for(l=0;l<e.length;l++){for(var[n,i,s]=e[l],a=!0,c=0;c<n.length;c++)(!1&s||o>=s)&&Object.keys(r.O).every((e=>r.O[e](n[c])))?n.splice(c--,1):(a=!1,s<o&&(o=s));if(a){e.splice(l--,1);var u=i();void 0!==u&&(t=u)}}return t}s=s||0;for(var l=e.length;l>0&&e[l-1][2]>s;l--)e[l]=e[l-1];e[l]=[n,i,s]},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{var e={742:0,692:0};r.O.j=t=>0===e[t];var t=(t,n)=>{var i,s,[o,a,c]=n,u=0;if(o.some((t=>0!==e[t]))){for(i in a)r.o(a,i)&&(r.m[i]=a[i]);if(c)var l=c(r)}for(t&&t(n);u<o.length;u++)s=o[u],r.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return r.O(l)},n=self.webpackChunk_dwmaj_workflow=self.webpackChunk_dwmaj_workflow||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})(),r.O(void 0,[692],(()=>r(387)));var i=r.O(void 0,[692],(()=>r(348)));i=r.O(i)})();
//# sourceMappingURL=app.js.map